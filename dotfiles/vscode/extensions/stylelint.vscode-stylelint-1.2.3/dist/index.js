var uw=Object.create;var fc=Object.defineProperty;var lw=Object.getOwnPropertyDescriptor;var dw=Object.getOwnPropertyNames;var fw=Object.getPrototypeOf,hw=Object.prototype.hasOwnProperty;var gw=t=>fc(t,"__esModule",{value:!0});var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var pw=(t,e,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of dw(e))!hw.call(t,r)&&r!=="default"&&fc(t,r,{get:()=>e[r],enumerable:!(n=lw(e,r))||n.enumerable});return t},mw=t=>pw(gw(fc(t!=null?uw(fw(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var ao=T((ME,od)=>{var vw="2.0.0",yw=256,_w=Number.MAX_SAFE_INTEGER||9007199254740991,ww=16;od.exports={SEMVER_SPEC_VERSION:vw,MAX_LENGTH:yw,MAX_SAFE_INTEGER:_w,MAX_SAFE_COMPONENT_LENGTH:ww}});var co=T((xE,sd)=>{var bw=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};sd.exports=bw});var Wr=T((gr,ad)=>{var{MAX_SAFE_COMPONENT_LENGTH:hc}=ao(),Rw=co();gr=ad.exports={};var Cw=gr.re=[],U=gr.src=[],B=gr.t={},Sw=0,fe=(t,e,n)=>{let r=Sw++;Rw(t,r,e),B[t]=r,U[r]=e,Cw[r]=new RegExp(e,n?"g":void 0)};fe("NUMERICIDENTIFIER","0|[1-9]\\d*");fe("NUMERICIDENTIFIERLOOSE","[0-9]+");fe("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");fe("MAINVERSION",`(${U[B.NUMERICIDENTIFIER]})\\.(${U[B.NUMERICIDENTIFIER]})\\.(${U[B.NUMERICIDENTIFIER]})`);fe("MAINVERSIONLOOSE",`(${U[B.NUMERICIDENTIFIERLOOSE]})\\.(${U[B.NUMERICIDENTIFIERLOOSE]})\\.(${U[B.NUMERICIDENTIFIERLOOSE]})`);fe("PRERELEASEIDENTIFIER",`(?:${U[B.NUMERICIDENTIFIER]}|${U[B.NONNUMERICIDENTIFIER]})`);fe("PRERELEASEIDENTIFIERLOOSE",`(?:${U[B.NUMERICIDENTIFIERLOOSE]}|${U[B.NONNUMERICIDENTIFIER]})`);fe("PRERELEASE",`(?:-(${U[B.PRERELEASEIDENTIFIER]}(?:\\.${U[B.PRERELEASEIDENTIFIER]})*))`);fe("PRERELEASELOOSE",`(?:-?(${U[B.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${U[B.PRERELEASEIDENTIFIERLOOSE]})*))`);fe("BUILDIDENTIFIER","[0-9A-Za-z-]+");fe("BUILD",`(?:\\+(${U[B.BUILDIDENTIFIER]}(?:\\.${U[B.BUILDIDENTIFIER]})*))`);fe("FULLPLAIN",`v?${U[B.MAINVERSION]}${U[B.PRERELEASE]}?${U[B.BUILD]}?`);fe("FULL",`^${U[B.FULLPLAIN]}$`);fe("LOOSEPLAIN",`[v=\\s]*${U[B.MAINVERSIONLOOSE]}${U[B.PRERELEASELOOSE]}?${U[B.BUILD]}?`);fe("LOOSE",`^${U[B.LOOSEPLAIN]}$`);fe("GTLT","((?:<|>)?=?)");fe("XRANGEIDENTIFIERLOOSE",`${U[B.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);fe("XRANGEIDENTIFIER",`${U[B.NUMERICIDENTIFIER]}|x|X|\\*`);fe("XRANGEPLAIN",`[v=\\s]*(${U[B.XRANGEIDENTIFIER]})(?:\\.(${U[B.XRANGEIDENTIFIER]})(?:\\.(${U[B.XRANGEIDENTIFIER]})(?:${U[B.PRERELEASE]})?${U[B.BUILD]}?)?)?`);fe("XRANGEPLAINLOOSE",`[v=\\s]*(${U[B.XRANGEIDENTIFIERLOOSE]})(?:\\.(${U[B.XRANGEIDENTIFIERLOOSE]})(?:\\.(${U[B.XRANGEIDENTIFIERLOOSE]})(?:${U[B.PRERELEASELOOSE]})?${U[B.BUILD]}?)?)?`);fe("XRANGE",`^${U[B.GTLT]}\\s*${U[B.XRANGEPLAIN]}$`);fe("XRANGELOOSE",`^${U[B.GTLT]}\\s*${U[B.XRANGEPLAINLOOSE]}$`);fe("COERCE",`(^|[^\\d])(\\d{1,${hc}})(?:\\.(\\d{1,${hc}}))?(?:\\.(\\d{1,${hc}}))?(?:$|[^\\d])`);fe("COERCERTL",U[B.COERCE],!0);fe("LONETILDE","(?:~>?)");fe("TILDETRIM",`(\\s*)${U[B.LONETILDE]}\\s+`,!0);gr.tildeTrimReplace="$1~";fe("TILDE",`^${U[B.LONETILDE]}${U[B.XRANGEPLAIN]}$`);fe("TILDELOOSE",`^${U[B.LONETILDE]}${U[B.XRANGEPLAINLOOSE]}$`);fe("LONECARET","(?:\\^)");fe("CARETTRIM",`(\\s*)${U[B.LONECARET]}\\s+`,!0);gr.caretTrimReplace="$1^";fe("CARET",`^${U[B.LONECARET]}${U[B.XRANGEPLAIN]}$`);fe("CARETLOOSE",`^${U[B.LONECARET]}${U[B.XRANGEPLAINLOOSE]}$`);fe("COMPARATORLOOSE",`^${U[B.GTLT]}\\s*(${U[B.LOOSEPLAIN]})$|^$`);fe("COMPARATOR",`^${U[B.GTLT]}\\s*(${U[B.FULLPLAIN]})$|^$`);fe("COMPARATORTRIM",`(\\s*)${U[B.GTLT]}\\s*(${U[B.LOOSEPLAIN]}|${U[B.XRANGEPLAIN]})`,!0);gr.comparatorTrimReplace="$1$2$3";fe("HYPHENRANGE",`^\\s*(${U[B.XRANGEPLAIN]})\\s+-\\s+(${U[B.XRANGEPLAIN]})\\s*$`);fe("HYPHENRANGELOOSE",`^\\s*(${U[B.XRANGEPLAINLOOSE]})\\s+-\\s+(${U[B.XRANGEPLAINLOOSE]})\\s*$`);fe("STAR","(<|>)?=?\\s*\\*");fe("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");fe("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var uo=T((IE,cd)=>{var Pw=["includePrerelease","loose","rtl"],Dw=t=>t?typeof t!="object"?{loose:!0}:Pw.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{};cd.exports=Dw});var ps=T((NE,dd)=>{var ud=/^[0-9]+$/,ld=(t,e)=>{let n=ud.test(t),r=ud.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},Tw=(t,e)=>ld(e,t);dd.exports={compareIdentifiers:ld,rcompareIdentifiers:Tw}});var ft=T((AE,pd)=>{var ms=co(),{MAX_LENGTH:fd,MAX_SAFE_INTEGER:vs}=ao(),{re:hd,t:gd}=Wr(),qw=uo(),{compareIdentifiers:li}=ps(),Bt=class{constructor(e,n){if(n=qw(n),e instanceof Bt){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>fd)throw new TypeError(`version is longer than ${fd} characters`);ms("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?hd[gd.LOOSE]:hd[gd.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>vs||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vs||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vs||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<vs)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ms("SemVer.compare",this.version,this.options,e),!(e instanceof Bt)){if(typeof e=="string"&&e===this.version)return 0;e=new Bt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Bt||(e=new Bt(e,this.options)),li(this.major,e.major)||li(this.minor,e.minor)||li(this.patch,e.patch)}comparePre(e){if(e instanceof Bt||(e=new Bt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(ms("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return li(r,i)}while(++n)}compareBuild(e){e instanceof Bt||(e=new Bt(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(ms("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return li(r,i)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(li(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};pd.exports=Bt});var $r=T((LE,_d)=>{var{MAX_LENGTH:Ew}=ao(),{re:md,t:vd}=Wr(),yd=ft(),Ow=uo(),Fw=(t,e)=>{if(e=Ow(e),t instanceof yd)return t;if(typeof t!="string"||t.length>Ew||!(e.loose?md[vd.LOOSE]:md[vd.FULL]).test(t))return null;try{return new yd(t,e)}catch{return null}};_d.exports=Fw});var bd=T((jE,wd)=>{var kw=$r(),Mw=(t,e)=>{let n=kw(t,e);return n?n.version:null};wd.exports=Mw});var Cd=T((WE,Rd)=>{var xw=$r(),Iw=(t,e)=>{let n=xw(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};Rd.exports=Iw});var Dd=T(($E,Pd)=>{var Sd=ft(),Nw=(t,e,n,r)=>{typeof n=="string"&&(r=n,n=void 0);try{return new Sd(t instanceof Sd?t.version:t,n).inc(e,r).version}catch{return null}};Pd.exports=Nw});var Gt=T((HE,qd)=>{var Td=ft(),Aw=(t,e,n)=>new Td(t,n).compare(new Td(e,n));qd.exports=Aw});var ys=T((zE,Ed)=>{var Lw=Gt(),jw=(t,e,n)=>Lw(t,e,n)===0;Ed.exports=jw});var kd=T((KE,Fd)=>{var Od=$r(),Ww=ys(),$w=(t,e)=>{if(Ww(t,e))return null;{let n=Od(t),r=Od(e),i=n.prerelease.length||r.prerelease.length,s=i?"pre":"",o=i?"prerelease":"";for(let a in n)if((a==="major"||a==="minor"||a==="patch")&&n[a]!==r[a])return s+a;return o}};Fd.exports=$w});var xd=T((UE,Md)=>{var Hw=ft(),zw=(t,e)=>new Hw(t,e).major;Md.exports=zw});var Nd=T((BE,Id)=>{var Kw=ft(),Uw=(t,e)=>new Kw(t,e).minor;Id.exports=Uw});var Ld=T((GE,Ad)=>{var Bw=ft(),Gw=(t,e)=>new Bw(t,e).patch;Ad.exports=Gw});var Wd=T((XE,jd)=>{var Xw=$r(),Vw=(t,e)=>{let n=Xw(t,e);return n&&n.prerelease.length?n.prerelease:null};jd.exports=Vw});var Hd=T((VE,$d)=>{var Jw=Gt(),Qw=(t,e,n)=>Jw(e,t,n);$d.exports=Qw});var Kd=T((JE,zd)=>{var Yw=Gt(),Zw=(t,e)=>Yw(t,e,!0);zd.exports=Zw});var _s=T((QE,Bd)=>{var Ud=ft(),eb=(t,e,n)=>{let r=new Ud(t,n),i=new Ud(e,n);return r.compare(i)||r.compareBuild(i)};Bd.exports=eb});var Xd=T((YE,Gd)=>{var tb=_s(),nb=(t,e)=>t.sort((n,r)=>tb(n,r,e));Gd.exports=nb});var Jd=T((ZE,Vd)=>{var rb=_s(),ib=(t,e)=>t.sort((n,r)=>rb(r,n,e));Vd.exports=ib});var lo=T((eO,Qd)=>{var ob=Gt(),sb=(t,e,n)=>ob(t,e,n)>0;Qd.exports=sb});var ws=T((tO,Yd)=>{var ab=Gt(),cb=(t,e,n)=>ab(t,e,n)<0;Yd.exports=cb});var gc=T((nO,Zd)=>{var ub=Gt(),lb=(t,e,n)=>ub(t,e,n)!==0;Zd.exports=lb});var bs=T((rO,ef)=>{var db=Gt(),fb=(t,e,n)=>db(t,e,n)>=0;ef.exports=fb});var Rs=T((iO,tf)=>{var hb=Gt(),gb=(t,e,n)=>hb(t,e,n)<=0;tf.exports=gb});var pc=T((oO,nf)=>{var pb=ys(),mb=gc(),vb=lo(),yb=bs(),_b=ws(),wb=Rs(),bb=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return pb(t,n,r);case"!=":return mb(t,n,r);case">":return vb(t,n,r);case">=":return yb(t,n,r);case"<":return _b(t,n,r);case"<=":return wb(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};nf.exports=bb});var of=T((sO,rf)=>{var Rb=ft(),Cb=$r(),{re:Cs,t:Ss}=Wr(),Sb=(t,e)=>{if(t instanceof Rb)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(Cs[Ss.COERCE]);else{let r;for(;(r=Cs[Ss.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),Cs[Ss.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;Cs[Ss.COERCERTL].lastIndex=-1}return n===null?null:Cb(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};rf.exports=Sb});var af=T((aO,sf)=>{"use strict";sf.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var uf=T((cO,cf)=>{"use strict";cf.exports=be;be.Node=Hr;be.create=be;function be(t){var e=this;if(e instanceof be||(e=new be),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}be.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};be.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};be.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};be.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Db(this,arguments[t]);return this.length};be.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Tb(this,arguments[t]);return this.length};be.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};be.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};be.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};be.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};be.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};be.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};be.prototype.map=function(t,e){e=e||this;for(var n=new be,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};be.prototype.mapReverse=function(t,e){e=e||this;for(var n=new be,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};be.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};be.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};be.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};be.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};be.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new be;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};be.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new be;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};be.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Pb(this,i,n[r]);return s};be.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function Pb(t,e,n){var r=e===t.head?new Hr(n,null,e,t):new Hr(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function Db(t,e){t.tail=new Hr(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Tb(t,e){t.head=new Hr(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Hr(t,e,n,r){if(!(this instanceof Hr))return new Hr(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{af()(be)}catch{}});var mf=T((uO,pf)=>{"use strict";var qb=uf(),zr=Symbol("max"),Gn=Symbol("length"),di=Symbol("lengthCalculator"),fo=Symbol("allowStale"),Kr=Symbol("maxAge"),Xn=Symbol("dispose"),lf=Symbol("noDisposeOnSet"),nt=Symbol("lruList"),un=Symbol("cache"),df=Symbol("updateAgeOnGet"),mc=()=>1,ff=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let n=this[zr]=e.max||1/0,r=e.length||mc;if(this[di]=typeof r!="function"?mc:r,this[fo]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Kr]=e.maxAge||0,this[Xn]=e.dispose,this[lf]=e.noDisposeOnSet||!1,this[df]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[zr]=e||1/0,ho(this)}get max(){return this[zr]}set allowStale(e){this[fo]=!!e}get allowStale(){return this[fo]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Kr]=e,ho(this)}get maxAge(){return this[Kr]}set lengthCalculator(e){typeof e!="function"&&(e=mc),e!==this[di]&&(this[di]=e,this[Gn]=0,this[nt].forEach(n=>{n.length=this[di](n.value,n.key),this[Gn]+=n.length})),ho(this)}get lengthCalculator(){return this[di]}get length(){return this[Gn]}get itemCount(){return this[nt].length}rforEach(e,n){n=n||this;for(let r=this[nt].tail;r!==null;){let i=r.prev;gf(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[nt].head;r!==null;){let i=r.next;gf(this,e,r,n),r=i}}keys(){return this[nt].toArray().map(e=>e.key)}values(){return this[nt].toArray().map(e=>e.value)}reset(){this[Xn]&&this[nt]&&this[nt].length&&this[nt].forEach(e=>this[Xn](e.key,e.value)),this[un]=new Map,this[nt]=new qb,this[Gn]=0}dump(){return this[nt].map(e=>Ps(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[nt]}set(e,n,r){if(r=r||this[Kr],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,s=this[di](n,e);if(this[un].has(e)){if(s>this[zr])return fi(this,this[un].get(e)),!1;let c=this[un].get(e).value;return this[Xn]&&(this[lf]||this[Xn](e,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Gn]+=s-c.length,c.length=s,this.get(e),ho(this),!0}let o=new hf(e,n,s,i,r);return o.length>this[zr]?(this[Xn]&&this[Xn](e,n),!1):(this[Gn]+=o.length,this[nt].unshift(o),this[un].set(e,this[nt].head),ho(this),!0)}has(e){if(!this[un].has(e))return!1;let n=this[un].get(e).value;return!Ps(this,n)}get(e){return vc(this,e,!0)}peek(e){return vc(this,e,!1)}pop(){let e=this[nt].tail;return e?(fi(this,e),e.value):null}del(e){fi(this,this[un].get(e))}load(e){this.reset();let n=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[un].forEach((e,n)=>vc(this,n,!1))}},vc=(t,e,n)=>{let r=t[un].get(e);if(r){let i=r.value;if(Ps(t,i)){if(fi(t,r),!t[fo])return}else n&&(t[df]&&(r.value.now=Date.now()),t[nt].unshiftNode(r));return i.value}},Ps=(t,e)=>{if(!e||!e.maxAge&&!t[Kr])return!1;let n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[Kr]&&n>t[Kr]},ho=t=>{if(t[Gn]>t[zr])for(let e=t[nt].tail;t[Gn]>t[zr]&&e!==null;){let n=e.prev;fi(t,e),e=n}},fi=(t,e)=>{if(e){let n=e.value;t[Xn]&&t[Xn](n.key,n.value),t[Gn]-=n.length,t[un].delete(n.key),t[nt].removeNode(e)}},hf=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}},gf=(t,e,n,r)=>{let i=n.value;Ps(t,i)&&(fi(t,n),t[fo]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};pf.exports=ff});var Xt=T((lO,wf)=>{var hi=class{constructor(e,n){if(n=Ob(n),e instanceof hi)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new hi(e.raw,n);if(e instanceof yc)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!yf(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Ib(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=vf.get(r);if(i)return i;let s=this.options.loose,o=s?St[pt.HYPHENRANGELOOSE]:St[pt.HYPHENRANGE];e=e.replace(o,Ub(this.options.includePrerelease)),We("hyphen replace",e),e=e.replace(St[pt.COMPARATORTRIM],kb),We("comparator trim",e),e=e.replace(St[pt.TILDETRIM],Mb),e=e.replace(St[pt.CARETTRIM],xb),e=e.split(/\s+/).join(" ");let a=e.split(" ").map(p=>Nb(p,this.options)).join(" ").split(/\s+/).map(p=>Kb(p,this.options));s&&(a=a.filter(p=>(We("loose invalid filter",p,this.options),!!p.match(St[pt.COMPARATORLOOSE])))),We("range list",a);let c=new Map,d=a.map(p=>new yc(p,this.options));for(let p of d){if(yf(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let h=[...c.values()];return vf.set(r,h),h}intersects(e,n){if(!(e instanceof hi))throw new TypeError("a Range is required");return this.set.some(r=>_f(r,n)&&e.set.some(i=>_f(i,n)&&r.every(s=>i.every(o=>s.intersects(o,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Fb(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(Bb(this.set[n],e,this.options))return!0;return!1}};wf.exports=hi;var Eb=mf(),vf=new Eb({max:1e3}),Ob=uo(),yc=go(),We=co(),Fb=ft(),{re:St,t:pt,comparatorTrimReplace:kb,tildeTrimReplace:Mb,caretTrimReplace:xb}=Wr(),yf=t=>t.value==="<0.0.0-0",Ib=t=>t.value==="",_f=(t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(s=>i.intersects(s,e)),i=r.pop();return n},Nb=(t,e)=>(We("comp",t,e),t=jb(t,e),We("caret",t),t=Ab(t,e),We("tildes",t),t=$b(t,e),We("xrange",t),t=zb(t,e),We("stars",t),t),mt=t=>!t||t.toLowerCase()==="x"||t==="*",Ab=(t,e)=>t.trim().split(/\s+/).map(n=>Lb(n,e)).join(" "),Lb=(t,e)=>{let n=e.loose?St[pt.TILDELOOSE]:St[pt.TILDE];return t.replace(n,(r,i,s,o,a)=>{We("tilde",t,r,i,s,o,a);let c;return mt(i)?c="":mt(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:mt(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(We("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,We("tilde return",c),c})},jb=(t,e)=>t.trim().split(/\s+/).map(n=>Wb(n,e)).join(" "),Wb=(t,e)=>{We("caret",t,e);let n=e.loose?St[pt.CARETLOOSE]:St[pt.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,s,o,a,c)=>{We("caret",t,i,s,o,a,c);let d;return mt(s)?d="":mt(o)?d=`>=${s}.0.0${r} <${+s+1}.0.0-0`:mt(a)?s==="0"?d=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:d=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:c?(We("replaceCaret pr",c),s==="0"?o==="0"?d=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:d=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:d=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(We("no pr"),s==="0"?o==="0"?d=`>=${s}.${o}.${a}${r} <${s}.${o}.${+a+1}-0`:d=`>=${s}.${o}.${a}${r} <${s}.${+o+1}.0-0`:d=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),We("caret return",d),d})},$b=(t,e)=>(We("replaceXRanges",t,e),t.split(/\s+/).map(n=>Hb(n,e)).join(" ")),Hb=(t,e)=>{t=t.trim();let n=e.loose?St[pt.XRANGELOOSE]:St[pt.XRANGE];return t.replace(n,(r,i,s,o,a,c)=>{We("xRange",t,r,i,s,o,a,c);let d=mt(s),h=d||mt(o),p=h||mt(a),m=p;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",d?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&m?(h&&(o=0),a=0,i===">"?(i=">=",h?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",h?s=+s+1:o=+o+1),i==="<"&&(c="-0"),r=`${i+s}.${o}.${a}${c}`):h?r=`>=${s}.0.0${c} <${+s+1}.0.0-0`:p&&(r=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),We("xRange return",r),r})},zb=(t,e)=>(We("replaceStars",t,e),t.trim().replace(St[pt.STAR],"")),Kb=(t,e)=>(We("replaceGTE0",t,e),t.trim().replace(St[e.includePrerelease?pt.GTE0PRE:pt.GTE0],"")),Ub=t=>(e,n,r,i,s,o,a,c,d,h,p,m,v)=>(mt(r)?n="":mt(i)?n=`>=${r}.0.0${t?"-0":""}`:mt(s)?n=`>=${r}.${i}.0${t?"-0":""}`:o?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,mt(d)?c="":mt(h)?c=`<${+d+1}.0.0-0`:mt(p)?c=`<${d}.${+h+1}.0-0`:m?c=`<=${d}.${h}.${p}-${m}`:t?c=`<${d}.${h}.${+p+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),Bb=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(We(t[r].semver),t[r].semver!==yc.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var go=T((dO,Pf)=>{var po=Symbol("SemVer ANY"),mo=class{static get ANY(){return po}constructor(e,n){if(n=Gb(n),e instanceof mo){if(e.loose===!!n.loose)return e;e=e.value}wc("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===po?this.value="":this.value=this.operator+this.semver.version,wc("comp",this)}parse(e){let n=this.options.loose?bf[Rf.COMPARATORLOOSE]:bf[Rf.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new Cf(r[2],this.options.loose):this.semver=po}toString(){return this.value}test(e){if(wc("Comparator.test",e,this.options.loose),this.semver===po||e===po)return!0;if(typeof e=="string")try{e=new Cf(e,this.options)}catch{return!1}return _c(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof mo))throw new TypeError("a Comparator is required");if((!n||typeof n!="object")&&(n={loose:!!n,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Sf(e.value,n).test(this.value);if(e.operator==="")return e.value===""?!0:new Sf(this.value,n).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=_c(this.semver,"<",e.semver,n)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=_c(this.semver,">",e.semver,n)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||s&&o||a||c}};Pf.exports=mo;var Gb=uo(),{re:bf,t:Rf}=Wr(),_c=pc(),wc=co(),Cf=ft(),Sf=Xt()});var vo=T((fO,Df)=>{var Xb=Xt(),Vb=(t,e,n)=>{try{e=new Xb(e,n)}catch{return!1}return e.test(t)};Df.exports=Vb});var qf=T((hO,Tf)=>{var Jb=Xt(),Qb=(t,e)=>new Jb(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));Tf.exports=Qb});var Of=T((gO,Ef)=>{var Yb=ft(),Zb=Xt(),eR=(t,e,n)=>{let r=null,i=null,s=null;try{s=new Zb(e,n)}catch{return null}return t.forEach(o=>{s.test(o)&&(!r||i.compare(o)===-1)&&(r=o,i=new Yb(r,n))}),r};Ef.exports=eR});var kf=T((pO,Ff)=>{var tR=ft(),nR=Xt(),rR=(t,e,n)=>{let r=null,i=null,s=null;try{s=new nR(e,n)}catch{return null}return t.forEach(o=>{s.test(o)&&(!r||i.compare(o)===1)&&(r=o,i=new tR(r,n))}),r};Ff.exports=rR});var If=T((mO,xf)=>{var bc=ft(),iR=Xt(),Mf=lo(),oR=(t,e)=>{t=new iR(t,e);let n=new bc("0.0.0");if(t.test(n)||(n=new bc("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],s=null;i.forEach(o=>{let a=new bc(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||Mf(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!n||Mf(n,s))&&(n=s)}return n&&t.test(n)?n:null};xf.exports=oR});var Af=T((vO,Nf)=>{var sR=Xt(),aR=(t,e)=>{try{return new sR(t,e).range||"*"}catch{return null}};Nf.exports=aR});var Ds=T((yO,$f)=>{var cR=ft(),Lf=go(),{ANY:uR}=Lf,lR=Xt(),dR=vo(),jf=lo(),Wf=ws(),fR=Rs(),hR=bs(),gR=(t,e,n,r)=>{t=new cR(t,r),e=new lR(e,r);let i,s,o,a,c;switch(n){case">":i=jf,s=fR,o=Wf,a=">",c=">=";break;case"<":i=Wf,s=hR,o=jf,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(dR(t,e,r))return!1;for(let d=0;d<e.set.length;++d){let h=e.set[d],p=null,m=null;if(h.forEach(v=>{v.semver===uR&&(v=new Lf(">=0.0.0")),p=p||v,m=m||v,i(v.semver,p.semver,r)?p=v:o(v.semver,m.semver,r)&&(m=v)}),p.operator===a||p.operator===c||(!m.operator||m.operator===a)&&s(t,m.semver))return!1;if(m.operator===c&&o(t,m.semver))return!1}return!0};$f.exports=gR});var zf=T((_O,Hf)=>{var pR=Ds(),mR=(t,e,n)=>pR(t,e,">",n);Hf.exports=mR});var Uf=T((wO,Kf)=>{var vR=Ds(),yR=(t,e,n)=>vR(t,e,"<",n);Kf.exports=yR});var Xf=T((bO,Gf)=>{var Bf=Xt(),_R=(t,e,n)=>(t=new Bf(t,n),e=new Bf(e,n),t.intersects(e));Gf.exports=_R});var Jf=T((RO,Vf)=>{var wR=vo(),bR=Gt();Vf.exports=(t,e,n)=>{let r=[],i=null,s=null,o=t.sort((h,p)=>bR(h,p,n));for(let h of o)wR(h,e,n)?(s=h,i||(i=h)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);let a=[];for(let[h,p]of r)h===p?a.push(h):!p&&h===o[0]?a.push("*"):p?h===o[0]?a.push(`<=${p}`):a.push(`${h} - ${p}`):a.push(`>=${h}`);let c=a.join(" || "),d=typeof e.raw=="string"?e.raw:String(e);return c.length<d.length?c:e}});var th=T((CO,eh)=>{var Qf=Xt(),Ts=go(),{ANY:Rc}=Ts,yo=vo(),Cc=Gt(),RR=(t,e,n={})=>{if(t===e)return!0;t=new Qf(t,n),e=new Qf(e,n);let r=!1;e:for(let i of t.set){for(let s of e.set){let o=CR(i,s,n);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},CR=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Rc){if(e.length===1&&e[0].semver===Rc)return!0;n.includePrerelease?t=[new Ts(">=0.0.0-0")]:t=[new Ts(">=0.0.0")]}if(e.length===1&&e[0].semver===Rc){if(n.includePrerelease)return!0;e=[new Ts(">=0.0.0")]}let r=new Set,i,s;for(let v of t)v.operator===">"||v.operator===">="?i=Yf(i,v,n):v.operator==="<"||v.operator==="<="?s=Zf(s,v,n):r.add(v.semver);if(r.size>1)return null;let o;if(i&&s){if(o=Cc(i.semver,s.semver,n),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let v of r){if(i&&!yo(v,String(i),n)||s&&!yo(v,String(s),n))return null;for(let O of e)if(!yo(v,String(O),n))return!1;return!0}let a,c,d,h,p=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,m=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&s.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let v of e){if(h=h||v.operator===">"||v.operator===">=",d=d||v.operator==="<"||v.operator==="<=",i){if(m&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===m.major&&v.semver.minor===m.minor&&v.semver.patch===m.patch&&(m=!1),v.operator===">"||v.operator===">="){if(a=Yf(i,v,n),a===v&&a!==i)return!1}else if(i.operator===">="&&!yo(i.semver,String(v),n))return!1}if(s){if(p&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===p.major&&v.semver.minor===p.minor&&v.semver.patch===p.patch&&(p=!1),v.operator==="<"||v.operator==="<="){if(c=Zf(s,v,n),c===v&&c!==s)return!1}else if(s.operator==="<="&&!yo(s.semver,String(v),n))return!1}if(!v.operator&&(s||i)&&o!==0)return!1}return!(i&&d&&!s&&o!==0||s&&h&&!i&&o!==0||m||p)},Yf=(t,e,n)=>{if(!t)return e;let r=Cc(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},Zf=(t,e,n)=>{if(!t)return e;let r=Cc(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};eh.exports=RR});var Pc=T((SO,nh)=>{var Sc=Wr();nh.exports={re:Sc.re,src:Sc.src,tokens:Sc.t,SEMVER_SPEC_VERSION:ao().SEMVER_SPEC_VERSION,SemVer:ft(),compareIdentifiers:ps().compareIdentifiers,rcompareIdentifiers:ps().rcompareIdentifiers,parse:$r(),valid:bd(),clean:Cd(),inc:Dd(),diff:kd(),major:xd(),minor:Nd(),patch:Ld(),prerelease:Wd(),compare:Gt(),rcompare:Hd(),compareLoose:Kd(),compareBuild:_s(),sort:Xd(),rsort:Jd(),gt:lo(),lt:ws(),eq:ys(),neq:gc(),gte:bs(),lte:Rs(),cmp:pc(),coerce:of(),Comparator:go(),Range:Xt(),satisfies:vo(),toComparators:qf(),maxSatisfying:Of(),minSatisfying:kf(),minVersion:If(),validRange:Af(),outside:Ds(),gtr:zf(),ltr:Uf(),intersects:Xf(),simplifyRange:Jf(),subset:th()}});var pr=T(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.asPromise=ze.thenable=ze.typedArray=ze.stringArray=ze.array=ze.func=ze.error=ze.number=ze.string=ze.boolean=void 0;function SR(t){return t===!0||t===!1}ze.boolean=SR;function rh(t){return typeof t=="string"||t instanceof String}ze.string=rh;function PR(t){return typeof t=="number"||t instanceof Number}ze.number=PR;function DR(t){return t instanceof Error}ze.error=DR;function ih(t){return typeof t=="function"}ze.func=ih;function oh(t){return Array.isArray(t)}ze.array=oh;function TR(t){return oh(t)&&t.every(e=>rh(e))}ze.stringArray=TR;function qR(t,e){return Array.isArray(t)&&t.every(e)}ze.typedArray=qR;function sh(t){return t&&ih(t.then)}ze.thenable=sh;function ER(t){return t instanceof Promise?t:sh(t)?new Promise((e,n)=>{t.then(r=>e(r),r=>n(r))}):Promise.resolve(t)}ze.asPromise=ER});var Vn=T(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});var Dc;function Tc(){if(Dc===void 0)throw new Error("No runtime abstraction layer installed");return Dc}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Dc=n}t.install=e})(Tc||(Tc={}));qc.default=Tc});var Ec=T(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.Disposable=void 0;var OR;(function(t){function e(n){return{dispose:n}}t.create=e})(OR=_o.Disposable||(_o.Disposable={}))});var ch=T(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.AbstractMessageBuffer=void 0;var FR=13,kR=10,MR=`\r
`,ah=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let c=this._chunks[n];r=0;t:for(;r<c.length;){switch(c[r]){case FR:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case kR:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=c.byteLength,n++}if(e!==4)return;let s=this._read(i+r),o=new Map,a=this.toString(s,"ascii").split(MR);if(a.length<2)return o;for(let c=0;c<a.length-2;c++){let d=a[c],h=d.indexOf(":");if(h===-1)throw new Error("Message header must separate key and value using :");let p=d.substr(0,h),m=d.substr(h+1).trim();o.set(p,m)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);n.set(o,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};qs.AbstractMessageBuffer=ah});var hh=T(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});var xR=Vn(),uh=require("util"),Ur=Ec(),IR=ch(),wo=class extends IR.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return wo.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new uh.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};wo.emptyBuffer=Buffer.allocUnsafe(0);var lh=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ur.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ur.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ur.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Ur.Disposable.create(()=>this.stream.off("data",e))}},dh=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ur.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ur.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ur.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let s=o=>{o==null?r():i(o)};typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},fh=Object.freeze({messageBuffer:Object.freeze({create:t=>new wo(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new uh.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new lh(t),asWritableStream:t=>new dh(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){return setTimeout(t,e,...n)},clearTimeout(t){clearTimeout(t)},setImmediate(t,...e){return setImmediate(t,...e)},clearImmediate(t){clearImmediate(t)}})});function Oc(){return fh}(function(t){function e(){xR.default.install(fh)}t.install=e})(Oc||(Oc={}));Fc.default=Oc});var gi=T(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.stringArray=ht.array=ht.func=ht.error=ht.number=ht.string=ht.boolean=void 0;function NR(t){return t===!0||t===!1}ht.boolean=NR;function gh(t){return typeof t=="string"||t instanceof String}ht.string=gh;function AR(t){return typeof t=="number"||t instanceof Number}ht.number=AR;function LR(t){return t instanceof Error}ht.error=LR;function jR(t){return typeof t=="function"}ht.func=jR;function ph(t){return Array.isArray(t)}ht.array=ph;function WR(t){return ph(t)&&t.every(e=>gh(e))}ht.stringArray=WR});var kc=T(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.isResponseMessage=G.isNotificationMessage=G.isRequestMessage=G.NotificationType9=G.NotificationType8=G.NotificationType7=G.NotificationType6=G.NotificationType5=G.NotificationType4=G.NotificationType3=G.NotificationType2=G.NotificationType1=G.NotificationType0=G.NotificationType=G.RequestType9=G.RequestType8=G.RequestType7=G.RequestType6=G.RequestType5=G.RequestType4=G.RequestType3=G.RequestType2=G.RequestType1=G.RequestType=G.RequestType0=G.AbstractMessageSignature=G.ParameterStructures=G.ResponseError=G.ErrorCodes=void 0;var Br=gi(),mh;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=t.jsonrpcReservedErrorRangeStart,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=t.jsonrpcReservedErrorRangeEnd})(mh=G.ErrorCodes||(G.ErrorCodes={}));var Es=class extends Error{constructor(e,n,r){super(n);this.code=Br.number(e)?e:mh.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,Es.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};G.ResponseError=Es;var ct=class{constructor(e){this.kind=e}static is(e){return e===ct.auto||e===ct.byName||e===ct.byPosition}toString(){return this.kind}};G.ParameterStructures=ct;ct.auto=new ct("auto");ct.byPosition=new ct("byPosition");ct.byName=new ct("byName");var Ae=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return ct.auto}};G.AbstractMessageSignature=Ae;var vh=class extends Ae{constructor(e){super(e,0)}};G.RequestType0=vh;var yh=class extends Ae{constructor(e,n=ct.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};G.RequestType=yh;var _h=class extends Ae{constructor(e,n=ct.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};G.RequestType1=_h;var wh=class extends Ae{constructor(e){super(e,2)}};G.RequestType2=wh;var bh=class extends Ae{constructor(e){super(e,3)}};G.RequestType3=bh;var Rh=class extends Ae{constructor(e){super(e,4)}};G.RequestType4=Rh;var Ch=class extends Ae{constructor(e){super(e,5)}};G.RequestType5=Ch;var Sh=class extends Ae{constructor(e){super(e,6)}};G.RequestType6=Sh;var Ph=class extends Ae{constructor(e){super(e,7)}};G.RequestType7=Ph;var Dh=class extends Ae{constructor(e){super(e,8)}};G.RequestType8=Dh;var Th=class extends Ae{constructor(e){super(e,9)}};G.RequestType9=Th;var qh=class extends Ae{constructor(e,n=ct.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};G.NotificationType=qh;var Eh=class extends Ae{constructor(e){super(e,0)}};G.NotificationType0=Eh;var Oh=class extends Ae{constructor(e,n=ct.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};G.NotificationType1=Oh;var Fh=class extends Ae{constructor(e){super(e,2)}};G.NotificationType2=Fh;var kh=class extends Ae{constructor(e){super(e,3)}};G.NotificationType3=kh;var Mh=class extends Ae{constructor(e){super(e,4)}};G.NotificationType4=Mh;var xh=class extends Ae{constructor(e){super(e,5)}};G.NotificationType5=xh;var Ih=class extends Ae{constructor(e){super(e,6)}};G.NotificationType6=Ih;var Nh=class extends Ae{constructor(e){super(e,7)}};G.NotificationType7=Nh;var Ah=class extends Ae{constructor(e){super(e,8)}};G.NotificationType8=Ah;var Lh=class extends Ae{constructor(e){super(e,9)}};G.NotificationType9=Lh;function $R(t){let e=t;return e&&Br.string(e.method)&&(Br.string(e.id)||Br.number(e.id))}G.isRequestMessage=$R;function HR(t){let e=t;return e&&Br.string(e.method)&&t.id===void 0}G.isNotificationMessage=HR;function zR(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(Br.string(e.id)||Br.number(e.id)||e.id===null)}G.isResponseMessage=zR});var pi=T(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.Emitter=Gr.Event=void 0;var KR=Vn(),UR;(function(t){let e={dispose(){}};t.None=function(){return e}})(UR=Gr.Event||(Gr.Event={}));var jh=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=r.length;s<o;s++)try{n.push(r[s].apply(i[s],e))}catch(a){KR.default().console.error(a)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},bo=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new jh),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,n),i.dispose=bo._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Gr.Emitter=bo;bo._noop=function(){}});var Nc=T(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.CancellationTokenSource=Xr.CancellationToken=void 0;var Wh=Vn(),BR=gi(),Mc=pi(),xc;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Mc.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Mc.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||BR.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(xc=Xr.CancellationToken||(Xr.CancellationToken={}));var GR=Object.freeze(function(t,e){let n=Wh.default().timer.setTimeout(t.bind(e),0);return{dispose(){Wh.default().timer.clearTimeout(n)}}}),Ic=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?GR:(this._emitter||(this._emitter=new Mc.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},$h=class{get token(){return this._token||(this._token=new Ic),this._token}cancel(){this._token?this._token.cancel():this._token=xc.Cancelled}dispose(){this._token?this._token instanceof Ic&&this._token.dispose():this._token=xc.None}};Xr.CancellationTokenSource=$h});var zh=T(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.ReadableStreamMessageReader=Jn.AbstractMessageReader=Jn.MessageReader=void 0;var Os=Vn(),mi=gi(),Ac=pi(),XR;(function(t){function e(n){let r=n;return r&&mi.func(r.listen)&&mi.func(r.dispose)&&mi.func(r.onError)&&mi.func(r.onClose)&&mi.func(r.onPartialMessage)}t.is=e})(XR=Jn.MessageReader||(Jn.MessageReader={}));var Lc=class{constructor(){this.errorEmitter=new Ac.Emitter,this.closeEmitter=new Ac.Emitter,this.partialMessageEmitter=new Ac.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${mi.string(e.message)?e.message:"unknown"}`)}};Jn.AbstractMessageReader=Lc;var jc;(function(t){function e(n){var r;let i,s,o,a=new Map,c,d=new Map;if(n===void 0||typeof n=="string")i=n??"utf-8";else{if(i=(r=n.charset)!==null&&r!==void 0?r:"utf-8",n.contentDecoder!==void 0&&(o=n.contentDecoder,a.set(o.name,o)),n.contentDecoders!==void 0)for(let h of n.contentDecoders)a.set(h.name,h);if(n.contentTypeDecoder!==void 0&&(c=n.contentTypeDecoder,d.set(c.name,c)),n.contentTypeDecoders!==void 0)for(let h of n.contentTypeDecoders)d.set(h.name,h)}return c===void 0&&(c=Os.default().applicationJson.decoder,d.set(c.name,c)),{charset:i,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:d}}t.fromOptions=e})(jc||(jc={}));var Hh=class extends Lc{constructor(e,n){super();this.readable=e,this.options=jc.fromOptions(n),this.buffer=Os.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(Os.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=Os.default().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Jn.ReadableStreamMessageReader=Hh});var Uh=T(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.Semaphore=void 0;var VR=Vn(),Kh=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||VR.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};Fs.Semaphore=Kh});var Jh=T(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.WriteableStreamMessageWriter=Qn.AbstractMessageWriter=Qn.MessageWriter=void 0;var Bh=Vn(),Ro=gi(),JR=Uh(),Gh=pi(),QR="Content-Length: ",Xh=`\r
`,YR;(function(t){function e(n){let r=n;return r&&Ro.func(r.dispose)&&Ro.func(r.onClose)&&Ro.func(r.onError)&&Ro.func(r.write)}t.is=e})(YR=Qn.MessageWriter||(Qn.MessageWriter={}));var Wc=class{constructor(){this.errorEmitter=new Gh.Emitter,this.closeEmitter=new Gh.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Ro.string(e.message)?e.message:"unknown"}`)}};Qn.AbstractMessageWriter=Wc;var $c;(function(t){function e(n){var r,i;return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:Bh.default().applicationJson.encoder}:{charset:(r=n.charset)!==null&&r!==void 0?r:"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:(i=n.contentTypeEncoder)!==null&&i!==void 0?i:Bh.default().applicationJson.encoder}}t.fromOptions=e})($c||($c={}));var Vh=class extends Wc{constructor(e,n){super();this.writable=e,this.options=$c.fromOptions(n),this.errorCount=0,this.writeSemaphore=new JR.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(QR,r.byteLength.toString(),Xh),i.push(Xh),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Qn.WriteableStreamMessageWriter=Vh});var Yh=T(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.LRUCache=Yn.LinkedMap=Yn.Touch=void 0;var vt;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(vt=Yn.Touch||(Yn.Touch={}));var Hc=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,n=vt.None){let r=this._map.get(e);if(!!r)return n!==vt.None&&this.touch(r,n),r.value}set(e,n,r=vt.None){let i=this._map.get(e);if(i)i.value=n,r!==vt.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case vt.None:this.addItemLast(i);break;case vt.First:this.addItemFirst(i);break;case vt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==vt.First&&n!==vt.Last)){if(n===vt.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===vt.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Yn.LinkedMap=Hc;var Qh=class extends Hc{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=vt.AsNew){return super.get(e,n)}peek(e){return super.get(e,vt.None)}set(e,n){return super.set(e,n,vt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Yn.LRUCache=Qh});var ig=T(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.createMessageConnection=re.ConnectionOptions=re.CancellationStrategy=re.CancellationSenderStrategy=re.CancellationReceiverStrategy=re.ConnectionStrategy=re.ConnectionError=re.ConnectionErrors=re.LogTraceNotification=re.SetTraceNotification=re.TraceFormat=re.Trace=re.NullLogger=re.ProgressType=void 0;var Zh=Vn(),rt=gi(),te=kc(),eg=Yh(),Co=pi(),zc=Nc(),So;(function(t){t.type=new te.NotificationType("$/cancelRequest")})(So||(So={}));var ks;(function(t){t.type=new te.NotificationType("$/progress")})(ks||(ks={}));var tg=class{constructor(){}};re.ProgressType=tg;var Kc;(function(t){function e(n){return rt.func(n)}t.is=e})(Kc||(Kc={}));re.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Xe;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(Xe=re.Trace||(re.Trace={}));(function(t){function e(r){if(!rt.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(Xe=re.Trace||(re.Trace={}));var ln;(function(t){t.Text="text",t.JSON="json"})(ln=re.TraceFormat||(re.TraceFormat={}));(function(t){function e(n){return n=n.toLowerCase(),n==="json"?t.JSON:t.Text}t.fromString=e})(ln=re.TraceFormat||(re.TraceFormat={}));var ng;(function(t){t.type=new te.NotificationType("$/setTrace")})(ng=re.SetTraceNotification||(re.SetTraceNotification={}));var Uc;(function(t){t.type=new te.NotificationType("$/logTrace")})(Uc=re.LogTraceNotification||(re.LogTraceNotification={}));var Ms;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Ms=re.ConnectionErrors||(re.ConnectionErrors={}));var Vr=class extends Error{constructor(e,n){super(n);this.code=e,Object.setPrototypeOf(this,Vr.prototype)}};re.ConnectionError=Vr;var rg;(function(t){function e(n){let r=n;return r&&rt.func(r.cancelUndispatched)}t.is=e})(rg=re.ConnectionStrategy||(re.ConnectionStrategy={}));var Bc;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new zc.CancellationTokenSource}});function e(n){let r=n;return r&&rt.func(r.createCancellationTokenSource)}t.is=e})(Bc=re.CancellationReceiverStrategy||(re.CancellationReceiverStrategy={}));var Gc;(function(t){t.Message=Object.freeze({sendCancellation(n,r){n.sendNotification(So.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&rt.func(r.sendCancellation)&&rt.func(r.cleanup)}t.is=e})(Gc=re.CancellationSenderStrategy||(re.CancellationSenderStrategy={}));var Xc;(function(t){t.Message=Object.freeze({receiver:Bc.Message,sender:Gc.Message});function e(n){let r=n;return r&&Bc.is(r.receiver)&&Gc.is(r.sender)}t.is=e})(Xc=re.CancellationStrategy||(re.CancellationStrategy={}));var ZR;(function(t){function e(n){let r=n;return r&&(Xc.is(r.cancellationStrategy)||rg.is(r.connectionStrategy))}t.is=e})(ZR=re.ConnectionOptions||(re.ConnectionOptions={}));var dn;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(dn||(dn={}));function eC(t,e,n,r){let i=n!==void 0?n:re.NullLogger,s=0,o=0,a=0,c="2.0",d,h=Object.create(null),p,m=Object.create(null),v=new Map,O,F=new eg.LinkedMap,N=Object.create(null),b=Object.create(null),w=Xe.Off,q=ln.Text,k,W=dn.New,ee=new Co.Emitter,ve=new Co.Emitter,we=new Co.Emitter,ke=new Co.Emitter,j=new Co.Emitter,x=r&&r.cancellationStrategy?r.cancellationStrategy:Xc.Message;function L(P){if(P===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+P.toString()}function z(P){return P===null?"res-unknown-"+(++a).toString():"res-"+P.toString()}function de(){return"not-"+(++o).toString()}function Z(P,_){te.isRequestMessage(_)?P.set(L(_.id),_):te.isResponseMessage(_)?P.set(z(_.id),_):P.set(de(),_)}function le(P){}function ne(){return W===dn.Listening}function Ie(){return W===dn.Closed}function Te(){return W===dn.Disposed}function tt(){(W===dn.New||W===dn.Listening)&&(W=dn.Closed,ve.fire(void 0))}function Ze(P){ee.fire([P,void 0,void 0])}function cn(P){ee.fire(P)}t.onClose(tt),t.onError(Ze),e.onClose(tt),e.onError(cn);function ar(){O||F.size===0||(O=Zh.default().timer.setImmediate(()=>{O=void 0,cr()}))}function cr(){if(F.size===0)return;let P=F.shift();try{te.isRequestMessage(P)?zn(P):te.isNotificationMessage(P)?Dn(P):te.isResponseMessage(P)?Pn(P):Kn(P)}finally{ar()}}let Hn=P=>{try{if(te.isNotificationMessage(P)&&P.method===So.type.method){let _=L(P.params.id),g=F.get(_);if(te.isRequestMessage(g)){let R=r==null?void 0:r.connectionStrategy,D=R&&R.cancelUndispatched?R.cancelUndispatched(g,le):le(g);if(D&&(D.error!==void 0||D.result!==void 0)){F.delete(_),D.id=g.id,$t(D,P.method,Date.now()),e.write(D);return}}}Z(F,P)}finally{ar()}};function zn(P){if(Te())return;function _(E,$,V){let oe={jsonrpc:c,id:P.id};E instanceof te.ResponseError?oe.error=E.toJson():oe.result=E===void 0?null:E,$t(oe,$,V),e.write(oe)}function g(E,$,V){let oe={jsonrpc:c,id:P.id,error:E.toJson()};$t(oe,$,V),e.write(oe)}function R(E,$,V){E===void 0&&(E=null);let oe={jsonrpc:c,id:P.id,result:E};$t(oe,$,V),e.write(oe)}lr(P);let D=h[P.method],u,l;D&&(u=D.type,l=D.handler);let S=Date.now();if(l||d){let E=String(P.id),$=x.receiver.createCancellationTokenSource(E);b[E]=$;try{let V;if(l)if(P.params===void 0){if(u!==void 0&&u.numberOfParams!==0){g(new te.ResponseError(te.ErrorCodes.InvalidParams,`Request ${P.method} defines ${u.numberOfParams} params but recevied none.`),P.method,S);return}V=l($.token)}else if(Array.isArray(P.params)){if(u!==void 0&&u.parameterStructures===te.ParameterStructures.byName){g(new te.ResponseError(te.ErrorCodes.InvalidParams,`Request ${P.method} defines parameters by name but received parameters by position`),P.method,S);return}V=l(...P.params,$.token)}else{if(u!==void 0&&u.parameterStructures===te.ParameterStructures.byPosition){g(new te.ResponseError(te.ErrorCodes.InvalidParams,`Request ${P.method} defines parameters by position but received parameters by name`),P.method,S);return}V=l(P.params,$.token)}else d&&(V=d(P.method,P.params,$.token));let oe=V;V?oe.then?oe.then(qe=>{delete b[E],_(qe,P.method,S)},qe=>{delete b[E],qe instanceof te.ResponseError?g(qe,P.method,S):qe&&rt.string(qe.message)?g(new te.ResponseError(te.ErrorCodes.InternalError,`Request ${P.method} failed with message: ${qe.message}`),P.method,S):g(new te.ResponseError(te.ErrorCodes.InternalError,`Request ${P.method} failed unexpectedly without providing any details.`),P.method,S)}):(delete b[E],_(V,P.method,S)):(delete b[E],R(V,P.method,S))}catch(V){delete b[E],V instanceof te.ResponseError?_(V,P.method,S):V&&rt.string(V.message)?g(new te.ResponseError(te.ErrorCodes.InternalError,`Request ${P.method} failed with message: ${V.message}`),P.method,S):g(new te.ResponseError(te.ErrorCodes.InternalError,`Request ${P.method} failed unexpectedly without providing any details.`),P.method,S)}}else g(new te.ResponseError(te.ErrorCodes.MethodNotFound,`Unhandled method ${P.method}`),P.method,S)}function Pn(P){if(!Te())if(P.id===null)P.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(P.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let _=String(P.id),g=N[_];if(Nr(P,g),g){delete N[_];try{if(P.error){let R=P.error;g.reject(new te.ResponseError(R.code,R.message,R.data))}else if(P.result!==void 0)g.resolve(P.result);else throw new Error("Should never happen.")}catch(R){R.message?i.error(`Response handler '${g.method}' failed with message: ${R.message}`):i.error(`Response handler '${g.method}' failed unexpectedly.`)}}}}function Dn(P){if(Te())return;let _,g;if(P.method===So.type.method)g=R=>{let D=R.id,u=b[String(D)];u&&u.cancel()};else{let R=m[P.method];R&&(g=R.handler,_=R.type)}if(g||p)try{Ht(P),g?P.params===void 0?(_!==void 0&&_.numberOfParams!==0&&_.parameterStructures!==te.ParameterStructures.byName&&i.error(`Notification ${P.method} defines ${_.numberOfParams} params but recevied none.`),g()):Array.isArray(P.params)?(_!==void 0&&(_.parameterStructures===te.ParameterStructures.byName&&i.error(`Notification ${P.method} defines parameters by name but received parameters by position`),_.numberOfParams!==P.params.length&&i.error(`Notification ${P.method} defines ${_.numberOfParams} params but received ${P.params.length} argumennts`)),g(...P.params)):(_!==void 0&&_.parameterStructures===te.ParameterStructures.byPosition&&i.error(`Notification ${P.method} defines parameters by position but received parameters by name`),g(P.params)):p&&p(P.method,P.params)}catch(R){R.message?i.error(`Notification handler '${P.method}' failed with message: ${R.message}`):i.error(`Notification handler '${P.method}' failed unexpectedly.`)}else we.fire(P)}function Kn(P){if(!P){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(P,null,4)}`);let _=P;if(rt.string(_.id)||rt.number(_.id)){let g=String(_.id),R=N[g];R&&R.reject(new Error("The received response has neither a result nor an error property."))}}function ur(P){if(!(w===Xe.Off||!k))if(q===ln.Text){let _;w===Xe.Verbose&&P.params&&(_=`Params: ${JSON.stringify(P.params,null,4)}

`),k.log(`Sending request '${P.method} - (${P.id})'.`,_)}else Ke("send-request",P)}function Ir(P){if(!(w===Xe.Off||!k))if(q===ln.Text){let _;w===Xe.Verbose&&(P.params?_=`Params: ${JSON.stringify(P.params,null,4)}

`:_=`No parameters provided.

`),k.log(`Sending notification '${P.method}'.`,_)}else Ke("send-notification",P)}function $t(P,_,g){if(!(w===Xe.Off||!k))if(q===ln.Text){let R;w===Xe.Verbose&&(P.error&&P.error.data?R=`Error data: ${JSON.stringify(P.error.data,null,4)}

`:P.result?R=`Result: ${JSON.stringify(P.result,null,4)}

`:P.error===void 0&&(R=`No result returned.

`)),k.log(`Sending response '${_} - (${P.id})'. Processing request took ${Date.now()-g}ms`,R)}else Ke("send-response",P)}function lr(P){if(!(w===Xe.Off||!k))if(q===ln.Text){let _;w===Xe.Verbose&&P.params&&(_=`Params: ${JSON.stringify(P.params,null,4)}

`),k.log(`Received request '${P.method} - (${P.id})'.`,_)}else Ke("receive-request",P)}function Ht(P){if(!(w===Xe.Off||!k||P.method===Uc.type.method))if(q===ln.Text){let _;w===Xe.Verbose&&(P.params?_=`Params: ${JSON.stringify(P.params,null,4)}

`:_=`No parameters provided.

`),k.log(`Received notification '${P.method}'.`,_)}else Ke("receive-notification",P)}function Nr(P,_){if(!(w===Xe.Off||!k))if(q===ln.Text){let g;if(w===Xe.Verbose&&(P.error&&P.error.data?g=`Error data: ${JSON.stringify(P.error.data,null,4)}

`:P.result?g=`Result: ${JSON.stringify(P.result,null,4)}

`:P.error===void 0&&(g=`No result returned.

`)),_){let R=P.error?` Request failed: ${P.error.message} (${P.error.code}).`:"";k.log(`Received response '${_.method} - (${P.id})' in ${Date.now()-_.timerStart}ms.${R}`,g)}else k.log(`Received response ${P.id} without active response promise.`,g)}else Ke("receive-response",P)}function Ke(P,_){if(!k||w===Xe.Off)return;let g={isLSPMessage:!0,type:P,message:_,timestamp:Date.now()};k.log(g)}function Ct(){if(Ie())throw new Vr(Ms.Closed,"Connection is closed.");if(Te())throw new Vr(Ms.Disposed,"Connection is disposed.")}function dr(){if(ne())throw new Vr(Ms.AlreadyListening,"Connection is already listening")}function Ar(){if(!ne())throw new Error("Call listen() first.")}function zt(P){return P===void 0?null:P}function fr(P){if(P!==null)return P}function Un(P){return P!=null&&!Array.isArray(P)&&typeof P=="object"}function Kt(P,_){switch(P){case te.ParameterStructures.auto:return Un(_)?fr(_):[zt(_)];case te.ParameterStructures.byName:if(!Un(_))throw new Error("Recevied parameters by name but param is not an object literal.");return fr(_);case te.ParameterStructures.byPosition:return[zt(_)];default:throw new Error(`Unknown parameter structure ${P.toString()}`)}}function Bn(P,_){let g,R=P.numberOfParams;switch(R){case 0:g=void 0;break;case 1:g=Kt(P.parameterStructures,_[0]);break;default:g=[];for(let D=0;D<_.length&&D<R;D++)g.push(zt(_[D]));if(_.length<R)for(let D=_.length;D<R;D++)g.push(null);break}return g}let Ut={sendNotification:(P,..._)=>{Ct();let g,R;if(rt.string(P)){g=P;let u=_[0],l=0,S=te.ParameterStructures.auto;te.ParameterStructures.is(u)&&(l=1,S=u);let E=_.length,$=E-l;switch($){case 0:R=void 0;break;case 1:R=Kt(S,_[l]);break;default:if(S===te.ParameterStructures.byName)throw new Error(`Recevied ${$} parameters for 'by Name' notification parameter structure.`);R=_.slice(l,E).map(V=>zt(V));break}}else{let u=_;g=P.method,R=Bn(P,u)}let D={jsonrpc:c,method:g,params:R};Ir(D),e.write(D)},onNotification:(P,_)=>{Ct();let g;return rt.func(P)?p=P:_&&(rt.string(P)?(g=P,m[P]={type:void 0,handler:_}):(g=P.method,m[P.method]={type:P,handler:_})),{dispose:()=>{g!==void 0?delete m[g]:p=void 0}}},onProgress:(P,_,g)=>{if(v.has(_))throw new Error(`Progress handler for token ${_} already registered`);return v.set(_,g),{dispose:()=>{v.delete(_)}}},sendProgress:(P,_,g)=>{Ut.sendNotification(ks.type,{token:_,value:g})},onUnhandledProgress:ke.event,sendRequest:(P,..._)=>{Ct(),Ar();let g,R,D;if(rt.string(P)){g=P;let E=_[0],$=_[_.length-1],V=0,oe=te.ParameterStructures.auto;te.ParameterStructures.is(E)&&(V=1,oe=E);let qe=_.length;zc.CancellationToken.is($)&&(qe=qe-1,D=$);let Ue=qe-V;switch(Ue){case 0:R=void 0;break;case 1:R=Kt(oe,_[V]);break;default:if(oe===te.ParameterStructures.byName)throw new Error(`Recevied ${Ue} parameters for 'by Name' request parameter structure.`);R=_.slice(V,qe).map(Be=>zt(Be));break}}else{let E=_;g=P.method,R=Bn(P,E);let $=P.numberOfParams;D=zc.CancellationToken.is(E[$])?E[$]:void 0}let u=s++,l;return D&&(l=D.onCancellationRequested(()=>{x.sender.sendCancellation(Ut,u)})),new Promise((E,$)=>{let V={jsonrpc:c,id:u,method:g,params:R},oe=Be=>{E(Be),x.sender.cleanup(u),l==null||l.dispose()},qe=Be=>{$(Be),x.sender.cleanup(u),l==null||l.dispose()},Ue={method:g,timerStart:Date.now(),resolve:oe,reject:qe};ur(V);try{e.write(V)}catch(Be){Ue.reject(new te.ResponseError(te.ErrorCodes.MessageWriteError,Be.message?Be.message:"Unknown reason")),Ue=null}Ue&&(N[String(u)]=Ue)})},onRequest:(P,_)=>{Ct();let g=null;return Kc.is(P)?(g=void 0,d=P):rt.string(P)?(g=null,_!==void 0&&(g=P,h[P]={handler:_,type:void 0})):_!==void 0&&(g=P.method,h[P.method]={type:P,handler:_}),{dispose:()=>{g!==null&&(g!==void 0?delete h[g]:d=void 0)}}},trace:(P,_,g)=>{let R=!1,D=ln.Text;g!==void 0&&(rt.boolean(g)?R=g:(R=g.sendNotification||!1,D=g.traceFormat||ln.Text)),w=P,q=D,w===Xe.Off?k=void 0:k=_,R&&!Ie()&&!Te()&&Ut.sendNotification(ng.type,{value:Xe.toString(P)})},onError:ee.event,onClose:ve.event,onUnhandledNotification:we.event,onDispose:j.event,end:()=>{e.end()},dispose:()=>{if(Te())return;W=dn.Disposed,j.fire(void 0);let P=new Error("Connection got disposed.");Object.keys(N).forEach(_=>{N[_].reject(P)}),N=Object.create(null),b=Object.create(null),F=new eg.LinkedMap,rt.func(e.dispose)&&e.dispose(),rt.func(t.dispose)&&t.dispose()},listen:()=>{Ct(),dr(),W=dn.Listening,t.listen(Hn)},inspect:()=>{Zh.default().console.log("inspect")}};return Ut.onNotification(Uc.type,P=>{w===Xe.Off||!k||k.log(P.message,w===Xe.Verbose?P.verbose:void 0)}),Ut.onNotification(ks.type,P=>{let _=v.get(P.token);_?_(P.value):ke.fire(P)}),Ut}re.createMessageConnection=eC});var Qc=T(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.CancellationSenderStrategy=I.CancellationReceiverStrategy=I.ConnectionError=I.ConnectionErrors=I.LogTraceNotification=I.SetTraceNotification=I.TraceFormat=I.Trace=I.ProgressType=I.createMessageConnection=I.NullLogger=I.ConnectionOptions=I.ConnectionStrategy=I.WriteableStreamMessageWriter=I.AbstractMessageWriter=I.MessageWriter=I.ReadableStreamMessageReader=I.AbstractMessageReader=I.MessageReader=I.CancellationToken=I.CancellationTokenSource=I.Emitter=I.Event=I.Disposable=I.ParameterStructures=I.NotificationType9=I.NotificationType8=I.NotificationType7=I.NotificationType6=I.NotificationType5=I.NotificationType4=I.NotificationType3=I.NotificationType2=I.NotificationType1=I.NotificationType0=I.NotificationType=I.ErrorCodes=I.ResponseError=I.RequestType9=I.RequestType8=I.RequestType7=I.RequestType6=I.RequestType5=I.RequestType4=I.RequestType3=I.RequestType2=I.RequestType1=I.RequestType0=I.RequestType=I.RAL=void 0;I.CancellationStrategy=void 0;var Ne=kc();Object.defineProperty(I,"RequestType",{enumerable:!0,get:function(){return Ne.RequestType}});Object.defineProperty(I,"RequestType0",{enumerable:!0,get:function(){return Ne.RequestType0}});Object.defineProperty(I,"RequestType1",{enumerable:!0,get:function(){return Ne.RequestType1}});Object.defineProperty(I,"RequestType2",{enumerable:!0,get:function(){return Ne.RequestType2}});Object.defineProperty(I,"RequestType3",{enumerable:!0,get:function(){return Ne.RequestType3}});Object.defineProperty(I,"RequestType4",{enumerable:!0,get:function(){return Ne.RequestType4}});Object.defineProperty(I,"RequestType5",{enumerable:!0,get:function(){return Ne.RequestType5}});Object.defineProperty(I,"RequestType6",{enumerable:!0,get:function(){return Ne.RequestType6}});Object.defineProperty(I,"RequestType7",{enumerable:!0,get:function(){return Ne.RequestType7}});Object.defineProperty(I,"RequestType8",{enumerable:!0,get:function(){return Ne.RequestType8}});Object.defineProperty(I,"RequestType9",{enumerable:!0,get:function(){return Ne.RequestType9}});Object.defineProperty(I,"ResponseError",{enumerable:!0,get:function(){return Ne.ResponseError}});Object.defineProperty(I,"ErrorCodes",{enumerable:!0,get:function(){return Ne.ErrorCodes}});Object.defineProperty(I,"NotificationType",{enumerable:!0,get:function(){return Ne.NotificationType}});Object.defineProperty(I,"NotificationType0",{enumerable:!0,get:function(){return Ne.NotificationType0}});Object.defineProperty(I,"NotificationType1",{enumerable:!0,get:function(){return Ne.NotificationType1}});Object.defineProperty(I,"NotificationType2",{enumerable:!0,get:function(){return Ne.NotificationType2}});Object.defineProperty(I,"NotificationType3",{enumerable:!0,get:function(){return Ne.NotificationType3}});Object.defineProperty(I,"NotificationType4",{enumerable:!0,get:function(){return Ne.NotificationType4}});Object.defineProperty(I,"NotificationType5",{enumerable:!0,get:function(){return Ne.NotificationType5}});Object.defineProperty(I,"NotificationType6",{enumerable:!0,get:function(){return Ne.NotificationType6}});Object.defineProperty(I,"NotificationType7",{enumerable:!0,get:function(){return Ne.NotificationType7}});Object.defineProperty(I,"NotificationType8",{enumerable:!0,get:function(){return Ne.NotificationType8}});Object.defineProperty(I,"NotificationType9",{enumerable:!0,get:function(){return Ne.NotificationType9}});Object.defineProperty(I,"ParameterStructures",{enumerable:!0,get:function(){return Ne.ParameterStructures}});var tC=Ec();Object.defineProperty(I,"Disposable",{enumerable:!0,get:function(){return tC.Disposable}});var og=pi();Object.defineProperty(I,"Event",{enumerable:!0,get:function(){return og.Event}});Object.defineProperty(I,"Emitter",{enumerable:!0,get:function(){return og.Emitter}});var sg=Nc();Object.defineProperty(I,"CancellationTokenSource",{enumerable:!0,get:function(){return sg.CancellationTokenSource}});Object.defineProperty(I,"CancellationToken",{enumerable:!0,get:function(){return sg.CancellationToken}});var Vc=zh();Object.defineProperty(I,"MessageReader",{enumerable:!0,get:function(){return Vc.MessageReader}});Object.defineProperty(I,"AbstractMessageReader",{enumerable:!0,get:function(){return Vc.AbstractMessageReader}});Object.defineProperty(I,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Vc.ReadableStreamMessageReader}});var Jc=Jh();Object.defineProperty(I,"MessageWriter",{enumerable:!0,get:function(){return Jc.MessageWriter}});Object.defineProperty(I,"AbstractMessageWriter",{enumerable:!0,get:function(){return Jc.AbstractMessageWriter}});Object.defineProperty(I,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Jc.WriteableStreamMessageWriter}});var Pt=ig();Object.defineProperty(I,"ConnectionStrategy",{enumerable:!0,get:function(){return Pt.ConnectionStrategy}});Object.defineProperty(I,"ConnectionOptions",{enumerable:!0,get:function(){return Pt.ConnectionOptions}});Object.defineProperty(I,"NullLogger",{enumerable:!0,get:function(){return Pt.NullLogger}});Object.defineProperty(I,"createMessageConnection",{enumerable:!0,get:function(){return Pt.createMessageConnection}});Object.defineProperty(I,"ProgressType",{enumerable:!0,get:function(){return Pt.ProgressType}});Object.defineProperty(I,"Trace",{enumerable:!0,get:function(){return Pt.Trace}});Object.defineProperty(I,"TraceFormat",{enumerable:!0,get:function(){return Pt.TraceFormat}});Object.defineProperty(I,"SetTraceNotification",{enumerable:!0,get:function(){return Pt.SetTraceNotification}});Object.defineProperty(I,"LogTraceNotification",{enumerable:!0,get:function(){return Pt.LogTraceNotification}});Object.defineProperty(I,"ConnectionErrors",{enumerable:!0,get:function(){return Pt.ConnectionErrors}});Object.defineProperty(I,"ConnectionError",{enumerable:!0,get:function(){return Pt.ConnectionError}});Object.defineProperty(I,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Pt.CancellationReceiverStrategy}});Object.defineProperty(I,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Pt.CancellationSenderStrategy}});Object.defineProperty(I,"CancellationStrategy",{enumerable:!0,get:function(){return Pt.CancellationStrategy}});var nC=Vn();I.RAL=nC.default});var wi=T(Ce=>{"use strict";var rC=Ce&&Ce.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),iC=Ce&&Ce.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&rC(e,t,n)};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.createMessageConnection=Ce.createServerSocketTransport=Ce.createClientSocketTransport=Ce.createServerPipeTransport=Ce.createClientPipeTransport=Ce.generateRandomPipeName=Ce.StreamMessageWriter=Ce.StreamMessageReader=Ce.SocketMessageWriter=Ce.SocketMessageReader=Ce.IPCMessageWriter=Ce.IPCMessageReader=void 0;var vi=hh();vi.default.install();var Tn=Qc(),ag=require("path"),oC=require("os"),sC=require("crypto"),xs=require("net");iC(Qc(),Ce);var cg=class extends Tn.AbstractMessageReader{constructor(e){super();this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Tn.Disposable.create(()=>this.process.off("message",e))}};Ce.IPCMessageReader=cg;var ug=class extends Tn.AbstractMessageWriter{constructor(e){super();this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Ce.IPCMessageWriter=ug;var yi=class extends Tn.ReadableStreamMessageReader{constructor(e,n="utf-8"){super(vi.default().stream.asReadableStream(e),n)}};Ce.SocketMessageReader=yi;var _i=class extends Tn.WriteableStreamMessageWriter{constructor(e,n){super(vi.default().stream.asWritableStream(e),n);this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Ce.SocketMessageWriter=_i;var Yc=class extends Tn.ReadableStreamMessageReader{constructor(e,n){super(vi.default().stream.asReadableStream(e),n)}};Ce.StreamMessageReader=Yc;var Zc=class extends Tn.WriteableStreamMessageWriter{constructor(e,n){super(vi.default().stream.asWritableStream(e),n)}};Ce.StreamMessageWriter=Zc;var lg=process.env.XDG_RUNTIME_DIR,aC=new Map([["linux",107],["darwin",103]]);function cC(){let t=sC.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;lg?e=ag.join(lg,`vscode-ipc-${t}.sock`):e=ag.join(oC.tmpdir(),`vscode-${t}.sock`);let n=aC.get(process.platform);return n!==void 0&&e.length>=n&&vi.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}Ce.generateRandomPipeName=cC;function uC(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let o=xs.createServer(a=>{o.close(),n([new yi(a,e),new _i(a,e)])});o.on("error",s),o.listen(t,()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}Ce.createClientPipeTransport=uC;function lC(t,e="utf-8"){let n=xs.createConnection(t);return[new yi(n,e),new _i(n,e)]}Ce.createServerPipeTransport=lC;function dC(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let o=xs.createServer(a=>{o.close(),n([new yi(a,e),new _i(a,e)])});o.on("error",s),o.listen(t,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}Ce.createClientSocketTransport=dC;function fC(t,e="utf-8"){let n=xs.createConnection(t,"127.0.0.1");return[new yi(n,e),new _i(n,e)]}Ce.createServerSocketTransport=fC;function hC(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function gC(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function pC(t,e,n,r){n||(n=Tn.NullLogger);let i=hC(t)?new Yc(t):t,s=gC(e)?new Zc(e):e;return Tn.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),Tn.createMessageConnection(i,s,n,r)}Ce.createMessageConnection=pC});var eu=T(($O,dg)=>{"use strict";dg.exports=wi()});var mr=T((fg,Is)=>{(function(t){if(typeof Is=="object"&&typeof Is.exports=="object"){var e=t(require,fg);e!==void 0&&(Is.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var n;(function(g){g.MIN_VALUE=-2147483648,g.MAX_VALUE=2147483647})(n=e.integer||(e.integer={}));var r;(function(g){g.MIN_VALUE=0,g.MAX_VALUE=2147483647})(r=e.uinteger||(e.uinteger={}));var i;(function(g){function R(u,l){return u===Number.MAX_VALUE&&(u=r.MAX_VALUE),l===Number.MAX_VALUE&&(l=r.MAX_VALUE),{line:u,character:l}}g.create=R;function D(u){var l=u;return _.objectLiteral(l)&&_.uinteger(l.line)&&_.uinteger(l.character)}g.is=D})(i=e.Position||(e.Position={}));var s;(function(g){function R(u,l,S,E){if(_.uinteger(u)&&_.uinteger(l)&&_.uinteger(S)&&_.uinteger(E))return{start:i.create(u,l),end:i.create(S,E)};if(i.is(u)&&i.is(l))return{start:u,end:l};throw new Error("Range#create called with invalid arguments["+u+", "+l+", "+S+", "+E+"]")}g.create=R;function D(u){var l=u;return _.objectLiteral(l)&&i.is(l.start)&&i.is(l.end)}g.is=D})(s=e.Range||(e.Range={}));var o;(function(g){function R(u,l){return{uri:u,range:l}}g.create=R;function D(u){var l=u;return _.defined(l)&&s.is(l.range)&&(_.string(l.uri)||_.undefined(l.uri))}g.is=D})(o=e.Location||(e.Location={}));var a;(function(g){function R(u,l,S,E){return{targetUri:u,targetRange:l,targetSelectionRange:S,originSelectionRange:E}}g.create=R;function D(u){var l=u;return _.defined(l)&&s.is(l.targetRange)&&_.string(l.targetUri)&&(s.is(l.targetSelectionRange)||_.undefined(l.targetSelectionRange))&&(s.is(l.originSelectionRange)||_.undefined(l.originSelectionRange))}g.is=D})(a=e.LocationLink||(e.LocationLink={}));var c;(function(g){function R(u,l,S,E){return{red:u,green:l,blue:S,alpha:E}}g.create=R;function D(u){var l=u;return _.numberRange(l.red,0,1)&&_.numberRange(l.green,0,1)&&_.numberRange(l.blue,0,1)&&_.numberRange(l.alpha,0,1)}g.is=D})(c=e.Color||(e.Color={}));var d;(function(g){function R(u,l){return{range:u,color:l}}g.create=R;function D(u){var l=u;return s.is(l.range)&&c.is(l.color)}g.is=D})(d=e.ColorInformation||(e.ColorInformation={}));var h;(function(g){function R(u,l,S){return{label:u,textEdit:l,additionalTextEdits:S}}g.create=R;function D(u){var l=u;return _.string(l.label)&&(_.undefined(l.textEdit)||q.is(l))&&(_.undefined(l.additionalTextEdits)||_.typedArray(l.additionalTextEdits,q.is))}g.is=D})(h=e.ColorPresentation||(e.ColorPresentation={}));var p;(function(g){g.Comment="comment",g.Imports="imports",g.Region="region"})(p=e.FoldingRangeKind||(e.FoldingRangeKind={}));var m;(function(g){function R(u,l,S,E,$){var V={startLine:u,endLine:l};return _.defined(S)&&(V.startCharacter=S),_.defined(E)&&(V.endCharacter=E),_.defined($)&&(V.kind=$),V}g.create=R;function D(u){var l=u;return _.uinteger(l.startLine)&&_.uinteger(l.startLine)&&(_.undefined(l.startCharacter)||_.uinteger(l.startCharacter))&&(_.undefined(l.endCharacter)||_.uinteger(l.endCharacter))&&(_.undefined(l.kind)||_.string(l.kind))}g.is=D})(m=e.FoldingRange||(e.FoldingRange={}));var v;(function(g){function R(u,l){return{location:u,message:l}}g.create=R;function D(u){var l=u;return _.defined(l)&&o.is(l.location)&&_.string(l.message)}g.is=D})(v=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var O;(function(g){g.Error=1,g.Warning=2,g.Information=3,g.Hint=4})(O=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var F;(function(g){g.Unnecessary=1,g.Deprecated=2})(F=e.DiagnosticTag||(e.DiagnosticTag={}));var N;(function(g){function R(D){var u=D;return u!=null&&_.string(u.href)}g.is=R})(N=e.CodeDescription||(e.CodeDescription={}));var b;(function(g){function R(u,l,S,E,$,V){var oe={range:u,message:l};return _.defined(S)&&(oe.severity=S),_.defined(E)&&(oe.code=E),_.defined($)&&(oe.source=$),_.defined(V)&&(oe.relatedInformation=V),oe}g.create=R;function D(u){var l,S=u;return _.defined(S)&&s.is(S.range)&&_.string(S.message)&&(_.number(S.severity)||_.undefined(S.severity))&&(_.integer(S.code)||_.string(S.code)||_.undefined(S.code))&&(_.undefined(S.codeDescription)||_.string((l=S.codeDescription)===null||l===void 0?void 0:l.href))&&(_.string(S.source)||_.undefined(S.source))&&(_.undefined(S.relatedInformation)||_.typedArray(S.relatedInformation,v.is))}g.is=D})(b=e.Diagnostic||(e.Diagnostic={}));var w;(function(g){function R(u,l){for(var S=[],E=2;E<arguments.length;E++)S[E-2]=arguments[E];var $={title:u,command:l};return _.defined(S)&&S.length>0&&($.arguments=S),$}g.create=R;function D(u){var l=u;return _.defined(l)&&_.string(l.title)&&_.string(l.command)}g.is=D})(w=e.Command||(e.Command={}));var q;(function(g){function R(S,E){return{range:S,newText:E}}g.replace=R;function D(S,E){return{range:{start:S,end:S},newText:E}}g.insert=D;function u(S){return{range:S,newText:""}}g.del=u;function l(S){var E=S;return _.objectLiteral(E)&&_.string(E.newText)&&s.is(E.range)}g.is=l})(q=e.TextEdit||(e.TextEdit={}));var k;(function(g){function R(u,l,S){var E={label:u};return l!==void 0&&(E.needsConfirmation=l),S!==void 0&&(E.description=S),E}g.create=R;function D(u){var l=u;return l!==void 0&&_.objectLiteral(l)&&_.string(l.label)&&(_.boolean(l.needsConfirmation)||l.needsConfirmation===void 0)&&(_.string(l.description)||l.description===void 0)}g.is=D})(k=e.ChangeAnnotation||(e.ChangeAnnotation={}));var W;(function(g){function R(D){var u=D;return typeof u=="string"}g.is=R})(W=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var ee;(function(g){function R(S,E,$){return{range:S,newText:E,annotationId:$}}g.replace=R;function D(S,E,$){return{range:{start:S,end:S},newText:E,annotationId:$}}g.insert=D;function u(S,E){return{range:S,newText:"",annotationId:E}}g.del=u;function l(S){var E=S;return q.is(E)&&(k.is(E.annotationId)||W.is(E.annotationId))}g.is=l})(ee=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var ve;(function(g){function R(u,l){return{textDocument:u,edits:l}}g.create=R;function D(u){var l=u;return _.defined(l)&&ne.is(l.textDocument)&&Array.isArray(l.edits)}g.is=D})(ve=e.TextDocumentEdit||(e.TextDocumentEdit={}));var we;(function(g){function R(u,l,S){var E={kind:"create",uri:u};return l!==void 0&&(l.overwrite!==void 0||l.ignoreIfExists!==void 0)&&(E.options=l),S!==void 0&&(E.annotationId=S),E}g.create=R;function D(u){var l=u;return l&&l.kind==="create"&&_.string(l.uri)&&(l.options===void 0||(l.options.overwrite===void 0||_.boolean(l.options.overwrite))&&(l.options.ignoreIfExists===void 0||_.boolean(l.options.ignoreIfExists)))&&(l.annotationId===void 0||W.is(l.annotationId))}g.is=D})(we=e.CreateFile||(e.CreateFile={}));var ke;(function(g){function R(u,l,S,E){var $={kind:"rename",oldUri:u,newUri:l};return S!==void 0&&(S.overwrite!==void 0||S.ignoreIfExists!==void 0)&&($.options=S),E!==void 0&&($.annotationId=E),$}g.create=R;function D(u){var l=u;return l&&l.kind==="rename"&&_.string(l.oldUri)&&_.string(l.newUri)&&(l.options===void 0||(l.options.overwrite===void 0||_.boolean(l.options.overwrite))&&(l.options.ignoreIfExists===void 0||_.boolean(l.options.ignoreIfExists)))&&(l.annotationId===void 0||W.is(l.annotationId))}g.is=D})(ke=e.RenameFile||(e.RenameFile={}));var j;(function(g){function R(u,l,S){var E={kind:"delete",uri:u};return l!==void 0&&(l.recursive!==void 0||l.ignoreIfNotExists!==void 0)&&(E.options=l),S!==void 0&&(E.annotationId=S),E}g.create=R;function D(u){var l=u;return l&&l.kind==="delete"&&_.string(l.uri)&&(l.options===void 0||(l.options.recursive===void 0||_.boolean(l.options.recursive))&&(l.options.ignoreIfNotExists===void 0||_.boolean(l.options.ignoreIfNotExists)))&&(l.annotationId===void 0||W.is(l.annotationId))}g.is=D})(j=e.DeleteFile||(e.DeleteFile={}));var x;(function(g){function R(D){var u=D;return u&&(u.changes!==void 0||u.documentChanges!==void 0)&&(u.documentChanges===void 0||u.documentChanges.every(function(l){return _.string(l.kind)?we.is(l)||ke.is(l)||j.is(l):ve.is(l)}))}g.is=R})(x=e.WorkspaceEdit||(e.WorkspaceEdit={}));var L=function(){function g(R,D){this.edits=R,this.changeAnnotations=D}return g.prototype.insert=function(R,D,u){var l,S;if(u===void 0?l=q.insert(R,D):W.is(u)?(S=u,l=ee.insert(R,D,u)):(this.assertChangeAnnotations(this.changeAnnotations),S=this.changeAnnotations.manage(u),l=ee.insert(R,D,S)),this.edits.push(l),S!==void 0)return S},g.prototype.replace=function(R,D,u){var l,S;if(u===void 0?l=q.replace(R,D):W.is(u)?(S=u,l=ee.replace(R,D,u)):(this.assertChangeAnnotations(this.changeAnnotations),S=this.changeAnnotations.manage(u),l=ee.replace(R,D,S)),this.edits.push(l),S!==void 0)return S},g.prototype.delete=function(R,D){var u,l;if(D===void 0?u=q.del(R):W.is(D)?(l=D,u=ee.del(R,D)):(this.assertChangeAnnotations(this.changeAnnotations),l=this.changeAnnotations.manage(D),u=ee.del(R,l)),this.edits.push(u),l!==void 0)return l},g.prototype.add=function(R){this.edits.push(R)},g.prototype.all=function(){return this.edits},g.prototype.clear=function(){this.edits.splice(0,this.edits.length)},g.prototype.assertChangeAnnotations=function(R){if(R===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},g}(),z=function(){function g(R){this._annotations=R===void 0?Object.create(null):R,this._counter=0,this._size=0}return g.prototype.all=function(){return this._annotations},Object.defineProperty(g.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),g.prototype.manage=function(R,D){var u;if(W.is(R)?u=R:(u=this.nextId(),D=R),this._annotations[u]!==void 0)throw new Error("Id "+u+" is already in use.");if(D===void 0)throw new Error("No annotation provided for id "+u);return this._annotations[u]=D,this._size++,u},g.prototype.nextId=function(){return this._counter++,this._counter.toString()},g}(),de=function(){function g(R){var D=this;this._textEditChanges=Object.create(null),R!==void 0?(this._workspaceEdit=R,R.documentChanges?(this._changeAnnotations=new z(R.changeAnnotations),R.changeAnnotations=this._changeAnnotations.all(),R.documentChanges.forEach(function(u){if(ve.is(u)){var l=new L(u.edits,D._changeAnnotations);D._textEditChanges[u.textDocument.uri]=l}})):R.changes&&Object.keys(R.changes).forEach(function(u){var l=new L(R.changes[u]);D._textEditChanges[u]=l})):this._workspaceEdit={}}return Object.defineProperty(g.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),g.prototype.getTextEditChange=function(R){if(ne.is(R)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D={uri:R.uri,version:R.version},u=this._textEditChanges[D.uri];if(!u){var l=[],S={textDocument:D,edits:l};this._workspaceEdit.documentChanges.push(S),u=new L(l,this._changeAnnotations),this._textEditChanges[D.uri]=u}return u}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var u=this._textEditChanges[R];if(!u){var l=[];this._workspaceEdit.changes[R]=l,u=new L(l),this._textEditChanges[R]=u}return u}},g.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new z,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},g.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},g.prototype.createFile=function(R,D,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var l;k.is(D)||W.is(D)?l=D:u=D;var S,E;if(l===void 0?S=we.create(R,u):(E=W.is(l)?l:this._changeAnnotations.manage(l),S=we.create(R,u,E)),this._workspaceEdit.documentChanges.push(S),E!==void 0)return E},g.prototype.renameFile=function(R,D,u,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var S;k.is(u)||W.is(u)?S=u:l=u;var E,$;if(S===void 0?E=ke.create(R,D,l):($=W.is(S)?S:this._changeAnnotations.manage(S),E=ke.create(R,D,l,$)),this._workspaceEdit.documentChanges.push(E),$!==void 0)return $},g.prototype.deleteFile=function(R,D,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var l;k.is(D)||W.is(D)?l=D:u=D;var S,E;if(l===void 0?S=j.create(R,u):(E=W.is(l)?l:this._changeAnnotations.manage(l),S=j.create(R,u,E)),this._workspaceEdit.documentChanges.push(S),E!==void 0)return E},g}();e.WorkspaceChange=de;var Z;(function(g){function R(u){return{uri:u}}g.create=R;function D(u){var l=u;return _.defined(l)&&_.string(l.uri)}g.is=D})(Z=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var le;(function(g){function R(u,l){return{uri:u,version:l}}g.create=R;function D(u){var l=u;return _.defined(l)&&_.string(l.uri)&&_.integer(l.version)}g.is=D})(le=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var ne;(function(g){function R(u,l){return{uri:u,version:l}}g.create=R;function D(u){var l=u;return _.defined(l)&&_.string(l.uri)&&(l.version===null||_.integer(l.version))}g.is=D})(ne=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Ie;(function(g){function R(u,l,S,E){return{uri:u,languageId:l,version:S,text:E}}g.create=R;function D(u){var l=u;return _.defined(l)&&_.string(l.uri)&&_.string(l.languageId)&&_.integer(l.version)&&_.string(l.text)}g.is=D})(Ie=e.TextDocumentItem||(e.TextDocumentItem={}));var Te;(function(g){g.PlainText="plaintext",g.Markdown="markdown"})(Te=e.MarkupKind||(e.MarkupKind={})),function(g){function R(D){var u=D;return u===g.PlainText||u===g.Markdown}g.is=R}(Te=e.MarkupKind||(e.MarkupKind={}));var tt;(function(g){function R(D){var u=D;return _.objectLiteral(D)&&Te.is(u.kind)&&_.string(u.value)}g.is=R})(tt=e.MarkupContent||(e.MarkupContent={}));var Ze;(function(g){g.Text=1,g.Method=2,g.Function=3,g.Constructor=4,g.Field=5,g.Variable=6,g.Class=7,g.Interface=8,g.Module=9,g.Property=10,g.Unit=11,g.Value=12,g.Enum=13,g.Keyword=14,g.Snippet=15,g.Color=16,g.File=17,g.Reference=18,g.Folder=19,g.EnumMember=20,g.Constant=21,g.Struct=22,g.Event=23,g.Operator=24,g.TypeParameter=25})(Ze=e.CompletionItemKind||(e.CompletionItemKind={}));var cn;(function(g){g.PlainText=1,g.Snippet=2})(cn=e.InsertTextFormat||(e.InsertTextFormat={}));var ar;(function(g){g.Deprecated=1})(ar=e.CompletionItemTag||(e.CompletionItemTag={}));var cr;(function(g){function R(u,l,S){return{newText:u,insert:l,replace:S}}g.create=R;function D(u){var l=u;return l&&_.string(l.newText)&&s.is(l.insert)&&s.is(l.replace)}g.is=D})(cr=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Hn;(function(g){g.asIs=1,g.adjustIndentation=2})(Hn=e.InsertTextMode||(e.InsertTextMode={}));var zn;(function(g){function R(D){return{label:D}}g.create=R})(zn=e.CompletionItem||(e.CompletionItem={}));var Pn;(function(g){function R(D,u){return{items:D||[],isIncomplete:!!u}}g.create=R})(Pn=e.CompletionList||(e.CompletionList={}));var Dn;(function(g){function R(u){return u.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}g.fromPlainText=R;function D(u){var l=u;return _.string(l)||_.objectLiteral(l)&&_.string(l.language)&&_.string(l.value)}g.is=D})(Dn=e.MarkedString||(e.MarkedString={}));var Kn;(function(g){function R(D){var u=D;return!!u&&_.objectLiteral(u)&&(tt.is(u.contents)||Dn.is(u.contents)||_.typedArray(u.contents,Dn.is))&&(D.range===void 0||s.is(D.range))}g.is=R})(Kn=e.Hover||(e.Hover={}));var ur;(function(g){function R(D,u){return u?{label:D,documentation:u}:{label:D}}g.create=R})(ur=e.ParameterInformation||(e.ParameterInformation={}));var Ir;(function(g){function R(D,u){for(var l=[],S=2;S<arguments.length;S++)l[S-2]=arguments[S];var E={label:D};return _.defined(u)&&(E.documentation=u),_.defined(l)?E.parameters=l:E.parameters=[],E}g.create=R})(Ir=e.SignatureInformation||(e.SignatureInformation={}));var $t;(function(g){g.Text=1,g.Read=2,g.Write=3})($t=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var lr;(function(g){function R(D,u){var l={range:D};return _.number(u)&&(l.kind=u),l}g.create=R})(lr=e.DocumentHighlight||(e.DocumentHighlight={}));var Ht;(function(g){g.File=1,g.Module=2,g.Namespace=3,g.Package=4,g.Class=5,g.Method=6,g.Property=7,g.Field=8,g.Constructor=9,g.Enum=10,g.Interface=11,g.Function=12,g.Variable=13,g.Constant=14,g.String=15,g.Number=16,g.Boolean=17,g.Array=18,g.Object=19,g.Key=20,g.Null=21,g.EnumMember=22,g.Struct=23,g.Event=24,g.Operator=25,g.TypeParameter=26})(Ht=e.SymbolKind||(e.SymbolKind={}));var Nr;(function(g){g.Deprecated=1})(Nr=e.SymbolTag||(e.SymbolTag={}));var Ke;(function(g){function R(D,u,l,S,E){var $={name:D,kind:u,location:{uri:S,range:l}};return E&&($.containerName=E),$}g.create=R})(Ke=e.SymbolInformation||(e.SymbolInformation={}));var Ct;(function(g){function R(u,l,S,E,$,V){var oe={name:u,detail:l,kind:S,range:E,selectionRange:$};return V!==void 0&&(oe.children=V),oe}g.create=R;function D(u){var l=u;return l&&_.string(l.name)&&_.number(l.kind)&&s.is(l.range)&&s.is(l.selectionRange)&&(l.detail===void 0||_.string(l.detail))&&(l.deprecated===void 0||_.boolean(l.deprecated))&&(l.children===void 0||Array.isArray(l.children))&&(l.tags===void 0||Array.isArray(l.tags))}g.is=D})(Ct=e.DocumentSymbol||(e.DocumentSymbol={}));var dr;(function(g){g.Empty="",g.QuickFix="quickfix",g.Refactor="refactor",g.RefactorExtract="refactor.extract",g.RefactorInline="refactor.inline",g.RefactorRewrite="refactor.rewrite",g.Source="source",g.SourceOrganizeImports="source.organizeImports",g.SourceFixAll="source.fixAll"})(dr=e.CodeActionKind||(e.CodeActionKind={}));var Ar;(function(g){function R(u,l){var S={diagnostics:u};return l!=null&&(S.only=l),S}g.create=R;function D(u){var l=u;return _.defined(l)&&_.typedArray(l.diagnostics,b.is)&&(l.only===void 0||_.typedArray(l.only,_.string))}g.is=D})(Ar=e.CodeActionContext||(e.CodeActionContext={}));var zt;(function(g){function R(u,l,S){var E={title:u},$=!0;return typeof l=="string"?($=!1,E.kind=l):w.is(l)?E.command=l:E.edit=l,$&&S!==void 0&&(E.kind=S),E}g.create=R;function D(u){var l=u;return l&&_.string(l.title)&&(l.diagnostics===void 0||_.typedArray(l.diagnostics,b.is))&&(l.kind===void 0||_.string(l.kind))&&(l.edit!==void 0||l.command!==void 0)&&(l.command===void 0||w.is(l.command))&&(l.isPreferred===void 0||_.boolean(l.isPreferred))&&(l.edit===void 0||x.is(l.edit))}g.is=D})(zt=e.CodeAction||(e.CodeAction={}));var fr;(function(g){function R(u,l){var S={range:u};return _.defined(l)&&(S.data=l),S}g.create=R;function D(u){var l=u;return _.defined(l)&&s.is(l.range)&&(_.undefined(l.command)||w.is(l.command))}g.is=D})(fr=e.CodeLens||(e.CodeLens={}));var Un;(function(g){function R(u,l){return{tabSize:u,insertSpaces:l}}g.create=R;function D(u){var l=u;return _.defined(l)&&_.uinteger(l.tabSize)&&_.boolean(l.insertSpaces)}g.is=D})(Un=e.FormattingOptions||(e.FormattingOptions={}));var Kt;(function(g){function R(u,l,S){return{range:u,target:l,data:S}}g.create=R;function D(u){var l=u;return _.defined(l)&&s.is(l.range)&&(_.undefined(l.target)||_.string(l.target))}g.is=D})(Kt=e.DocumentLink||(e.DocumentLink={}));var Bn;(function(g){function R(u,l){return{range:u,parent:l}}g.create=R;function D(u){var l=u;return l!==void 0&&s.is(l.range)&&(l.parent===void 0||g.is(l.parent))}g.is=D})(Bn=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var Ut;(function(g){function R(S,E,$,V){return new P(S,E,$,V)}g.create=R;function D(S){var E=S;return!!(_.defined(E)&&_.string(E.uri)&&(_.undefined(E.languageId)||_.string(E.languageId))&&_.uinteger(E.lineCount)&&_.func(E.getText)&&_.func(E.positionAt)&&_.func(E.offsetAt))}g.is=D;function u(S,E){for(var $=S.getText(),V=l(E,function(hr,Lr){var gs=hr.range.start.line-Lr.range.start.line;return gs===0?hr.range.start.character-Lr.range.start.character:gs}),oe=$.length,qe=V.length-1;qe>=0;qe--){var Ue=V[qe],Be=S.offsetAt(Ue.range.start),me=S.offsetAt(Ue.range.end);if(me<=oe)$=$.substring(0,Be)+Ue.newText+$.substring(me,$.length);else throw new Error("Overlapping edit");oe=Be}return $}g.applyEdits=u;function l(S,E){if(S.length<=1)return S;var $=S.length/2|0,V=S.slice(0,$),oe=S.slice($);l(V,E),l(oe,E);for(var qe=0,Ue=0,Be=0;qe<V.length&&Ue<oe.length;){var me=E(V[qe],oe[Ue]);me<=0?S[Be++]=V[qe++]:S[Be++]=oe[Ue++]}for(;qe<V.length;)S[Be++]=V[qe++];for(;Ue<oe.length;)S[Be++]=oe[Ue++];return S}})(Ut=e.TextDocument||(e.TextDocument={}));var P=function(){function g(R,D,u,l){this._uri=R,this._languageId=D,this._version=u,this._content=l,this._lineOffsets=void 0}return Object.defineProperty(g.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),g.prototype.getText=function(R){if(R){var D=this.offsetAt(R.start),u=this.offsetAt(R.end);return this._content.substring(D,u)}return this._content},g.prototype.update=function(R,D){this._content=R.text,this._version=D,this._lineOffsets=void 0},g.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var R=[],D=this._content,u=!0,l=0;l<D.length;l++){u&&(R.push(l),u=!1);var S=D.charAt(l);u=S==="\r"||S===`
`,S==="\r"&&l+1<D.length&&D.charAt(l+1)===`
`&&l++}u&&D.length>0&&R.push(D.length),this._lineOffsets=R}return this._lineOffsets},g.prototype.positionAt=function(R){R=Math.max(Math.min(R,this._content.length),0);var D=this.getLineOffsets(),u=0,l=D.length;if(l===0)return i.create(0,R);for(;u<l;){var S=Math.floor((u+l)/2);D[S]>R?l=S:u=S+1}var E=u-1;return i.create(E,R-D[E])},g.prototype.offsetAt=function(R){var D=this.getLineOffsets();if(R.line>=D.length)return this._content.length;if(R.line<0)return 0;var u=D[R.line],l=R.line+1<D.length?D[R.line+1]:this._content.length;return Math.max(Math.min(u+R.character,l),u)},Object.defineProperty(g.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),g}(),_;(function(g){var R=Object.prototype.toString;function D(me){return typeof me!="undefined"}g.defined=D;function u(me){return typeof me=="undefined"}g.undefined=u;function l(me){return me===!0||me===!1}g.boolean=l;function S(me){return R.call(me)==="[object String]"}g.string=S;function E(me){return R.call(me)==="[object Number]"}g.number=E;function $(me,hr,Lr){return R.call(me)==="[object Number]"&&hr<=me&&me<=Lr}g.numberRange=$;function V(me){return R.call(me)==="[object Number]"&&-2147483648<=me&&me<=2147483647}g.integer=V;function oe(me){return R.call(me)==="[object Number]"&&0<=me&&me<=2147483647}g.uinteger=oe;function qe(me){return R.call(me)==="[object Function]"}g.func=qe;function Ue(me){return me!==null&&typeof me=="object"}g.objectLiteral=Ue;function Be(me,hr){return Array.isArray(me)&&me.every(hr)}g.typedArray=Be})(_||(_={}))})});var it=T(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.ProtocolNotificationType=Vt.ProtocolNotificationType0=Vt.ProtocolRequestType=Vt.ProtocolRequestType0=Vt.RegistrationType=void 0;var bi=wi(),hg=class{constructor(e){this.method=e}};Vt.RegistrationType=hg;var gg=class extends bi.RequestType0{constructor(e){super(e)}};Vt.ProtocolRequestType0=gg;var pg=class extends bi.RequestType{constructor(e){super(e,bi.ParameterStructures.byName)}};Vt.ProtocolRequestType=pg;var mg=class extends bi.NotificationType0{constructor(e){super(e)}};Vt.ProtocolNotificationType0=mg;var vg=class extends bi.NotificationType{constructor(e){super(e,bi.ParameterStructures.byName)}};Vt.ProtocolNotificationType=vg});var wg=T(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.objectLiteral=Ve.typedArray=Ve.stringArray=Ve.array=Ve.func=Ve.error=Ve.number=Ve.string=Ve.boolean=void 0;function mC(t){return t===!0||t===!1}Ve.boolean=mC;function yg(t){return typeof t=="string"||t instanceof String}Ve.string=yg;function vC(t){return typeof t=="number"||t instanceof Number}Ve.number=vC;function yC(t){return t instanceof Error}Ve.error=yC;function _C(t){return typeof t=="function"}Ve.func=_C;function _g(t){return Array.isArray(t)}Ve.array=_g;function wC(t){return _g(t)&&t.every(e=>yg(e))}Ve.stringArray=wC;function bC(t,e){return Array.isArray(t)&&t.every(e)}Ve.typedArray=bC;function RC(t){return t!==null&&typeof t=="object"}Ve.objectLiteral=RC});var bg=T(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.ImplementationRequest=void 0;var CC=it(),SC;(function(t){t.method="textDocument/implementation",t.type=new CC.ProtocolRequestType(t.method)})(SC=Po.ImplementationRequest||(Po.ImplementationRequest={}))});var Rg=T(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.TypeDefinitionRequest=void 0;var PC=it(),DC;(function(t){t.method="textDocument/typeDefinition",t.type=new PC.ProtocolRequestType(t.method)})(DC=Do.TypeDefinitionRequest||(Do.TypeDefinitionRequest={}))});var Sg=T(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.DidChangeWorkspaceFoldersNotification=vr.WorkspaceFoldersRequest=void 0;var Cg=it(),TC;(function(t){t.type=new Cg.ProtocolRequestType0("workspace/workspaceFolders")})(TC=vr.WorkspaceFoldersRequest||(vr.WorkspaceFoldersRequest={}));var qC;(function(t){t.type=new Cg.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(qC=vr.DidChangeWorkspaceFoldersNotification||(vr.DidChangeWorkspaceFoldersNotification={}))});var Pg=T(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.ConfigurationRequest=void 0;var EC=it(),OC;(function(t){t.type=new EC.ProtocolRequestType("workspace/configuration")})(OC=To.ConfigurationRequest||(To.ConfigurationRequest={}))});var Tg=T(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.ColorPresentationRequest=yr.DocumentColorRequest=void 0;var Dg=it(),FC;(function(t){t.method="textDocument/documentColor",t.type=new Dg.ProtocolRequestType(t.method)})(FC=yr.DocumentColorRequest||(yr.DocumentColorRequest={}));var kC;(function(t){t.type=new Dg.ProtocolRequestType("textDocument/colorPresentation")})(kC=yr.ColorPresentationRequest||(yr.ColorPresentationRequest={}))});var qg=T(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.FoldingRangeRequest=_r.FoldingRangeKind=void 0;var MC=it(),xC;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(xC=_r.FoldingRangeKind||(_r.FoldingRangeKind={}));var IC;(function(t){t.method="textDocument/foldingRange",t.type=new MC.ProtocolRequestType(t.method)})(IC=_r.FoldingRangeRequest||(_r.FoldingRangeRequest={}))});var Eg=T(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.DeclarationRequest=void 0;var NC=it(),AC;(function(t){t.method="textDocument/declaration",t.type=new NC.ProtocolRequestType(t.method)})(AC=qo.DeclarationRequest||(qo.DeclarationRequest={}))});var Og=T(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.SelectionRangeRequest=void 0;var LC=it(),jC;(function(t){t.method="textDocument/selectionRange",t.type=new LC.ProtocolRequestType(t.method)})(jC=Eo.SelectionRangeRequest||(Eo.SelectionRangeRequest={}))});var kg=T(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.WorkDoneProgressCancelNotification=fn.WorkDoneProgressCreateRequest=fn.WorkDoneProgress=void 0;var WC=wi(),Fg=it(),$C;(function(t){t.type=new WC.ProgressType;function e(n){return n===t.type}t.is=e})($C=fn.WorkDoneProgress||(fn.WorkDoneProgress={}));var HC;(function(t){t.type=new Fg.ProtocolRequestType("window/workDoneProgress/create")})(HC=fn.WorkDoneProgressCreateRequest||(fn.WorkDoneProgressCreateRequest={}));var zC;(function(t){t.type=new Fg.ProtocolNotificationType("window/workDoneProgress/cancel")})(zC=fn.WorkDoneProgressCancelNotification||(fn.WorkDoneProgressCancelNotification={}))});var Mg=T(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.CallHierarchyOutgoingCallsRequest=hn.CallHierarchyIncomingCallsRequest=hn.CallHierarchyPrepareRequest=void 0;var tu=it(),KC;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new tu.ProtocolRequestType(t.method)})(KC=hn.CallHierarchyPrepareRequest||(hn.CallHierarchyPrepareRequest={}));var UC;(function(t){t.method="callHierarchy/incomingCalls",t.type=new tu.ProtocolRequestType(t.method)})(UC=hn.CallHierarchyIncomingCallsRequest||(hn.CallHierarchyIncomingCallsRequest={}));var BC;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new tu.ProtocolRequestType(t.method)})(BC=hn.CallHierarchyOutgoingCallsRequest||(hn.CallHierarchyOutgoingCallsRequest={}))});var xg=T(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.SemanticTokensRefreshRequest=Ee.SemanticTokensRangeRequest=Ee.SemanticTokensDeltaRequest=Ee.SemanticTokensRequest=Ee.SemanticTokensRegistrationType=Ee.TokenFormat=Ee.SemanticTokens=Ee.SemanticTokenModifiers=Ee.SemanticTokenTypes=void 0;var Oo=it(),GC;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator"})(GC=Ee.SemanticTokenTypes||(Ee.SemanticTokenTypes={}));var XC;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(XC=Ee.SemanticTokenModifiers||(Ee.SemanticTokenModifiers={}));var VC;(function(t){function e(n){let r=n;return r!==void 0&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})(VC=Ee.SemanticTokens||(Ee.SemanticTokens={}));var JC;(function(t){t.Relative="relative"})(JC=Ee.TokenFormat||(Ee.TokenFormat={}));var QC;(function(t){t.method="textDocument/semanticTokens",t.type=new Oo.RegistrationType(t.method)})(QC=Ee.SemanticTokensRegistrationType||(Ee.SemanticTokensRegistrationType={}));var YC;(function(t){t.method="textDocument/semanticTokens/full",t.type=new Oo.ProtocolRequestType(t.method)})(YC=Ee.SemanticTokensRequest||(Ee.SemanticTokensRequest={}));var ZC;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new Oo.ProtocolRequestType(t.method)})(ZC=Ee.SemanticTokensDeltaRequest||(Ee.SemanticTokensDeltaRequest={}));var eS;(function(t){t.method="textDocument/semanticTokens/range",t.type=new Oo.ProtocolRequestType(t.method)})(eS=Ee.SemanticTokensRangeRequest||(Ee.SemanticTokensRangeRequest={}));var tS;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new Oo.ProtocolRequestType0(t.method)})(tS=Ee.SemanticTokensRefreshRequest||(Ee.SemanticTokensRefreshRequest={}))});var Ig=T(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.ShowDocumentRequest=void 0;var nS=it(),rS;(function(t){t.method="window/showDocument",t.type=new nS.ProtocolRequestType(t.method)})(rS=Fo.ShowDocumentRequest||(Fo.ShowDocumentRequest={}))});var Ng=T(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.LinkedEditingRangeRequest=void 0;var iS=it(),oS;(function(t){t.method="textDocument/linkedEditingRange",t.type=new iS.ProtocolRequestType(t.method)})(oS=ko.LinkedEditingRangeRequest||(ko.LinkedEditingRangeRequest={}))});var Ag=T($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.WillDeleteFilesRequest=$e.DidDeleteFilesNotification=$e.DidRenameFilesNotification=$e.WillRenameFilesRequest=$e.DidCreateFilesNotification=$e.WillCreateFilesRequest=$e.FileOperationPatternKind=void 0;var Ri=it(),sS;(function(t){t.file="file",t.folder="folder"})(sS=$e.FileOperationPatternKind||($e.FileOperationPatternKind={}));var aS;(function(t){t.method="workspace/willCreateFiles",t.type=new Ri.ProtocolRequestType(t.method)})(aS=$e.WillCreateFilesRequest||($e.WillCreateFilesRequest={}));var cS;(function(t){t.method="workspace/didCreateFiles",t.type=new Ri.ProtocolNotificationType(t.method)})(cS=$e.DidCreateFilesNotification||($e.DidCreateFilesNotification={}));var uS;(function(t){t.method="workspace/willRenameFiles",t.type=new Ri.ProtocolRequestType(t.method)})(uS=$e.WillRenameFilesRequest||($e.WillRenameFilesRequest={}));var lS;(function(t){t.method="workspace/didRenameFiles",t.type=new Ri.ProtocolNotificationType(t.method)})(lS=$e.DidRenameFilesNotification||($e.DidRenameFilesNotification={}));var dS;(function(t){t.method="workspace/didDeleteFiles",t.type=new Ri.ProtocolNotificationType(t.method)})(dS=$e.DidDeleteFilesNotification||($e.DidDeleteFilesNotification={}));var fS;(function(t){t.method="workspace/willDeleteFiles",t.type=new Ri.ProtocolRequestType(t.method)})(fS=$e.WillDeleteFilesRequest||($e.WillDeleteFilesRequest={}))});var Lg=T(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.MonikerRequest=gn.MonikerKind=gn.UniquenessLevel=void 0;var hS=it(),gS;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(gS=gn.UniquenessLevel||(gn.UniquenessLevel={}));var pS;(function(t){t.import="import",t.export="export",t.local="local"})(pS=gn.MonikerKind||(gn.MonikerKind={}));var mS;(function(t){t.method="textDocument/moniker",t.type=new hS.ProtocolRequestType(t.method)})(mS=gn.MonikerRequest||(gn.MonikerRequest={}))});var zg=T(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.DocumentLinkRequest=y.CodeLensRefreshRequest=y.CodeLensResolveRequest=y.CodeLensRequest=y.WorkspaceSymbolRequest=y.CodeActionResolveRequest=y.CodeActionRequest=y.DocumentSymbolRequest=y.DocumentHighlightRequest=y.ReferencesRequest=y.DefinitionRequest=y.SignatureHelpRequest=y.SignatureHelpTriggerKind=y.HoverRequest=y.CompletionResolveRequest=y.CompletionRequest=y.CompletionTriggerKind=y.PublishDiagnosticsNotification=y.WatchKind=y.FileChangeType=y.DidChangeWatchedFilesNotification=y.WillSaveTextDocumentWaitUntilRequest=y.WillSaveTextDocumentNotification=y.TextDocumentSaveReason=y.DidSaveTextDocumentNotification=y.DidCloseTextDocumentNotification=y.DidChangeTextDocumentNotification=y.TextDocumentContentChangeEvent=y.DidOpenTextDocumentNotification=y.TextDocumentSyncKind=y.TelemetryEventNotification=y.LogMessageNotification=y.ShowMessageRequest=y.ShowMessageNotification=y.MessageType=y.DidChangeConfigurationNotification=y.ExitNotification=y.ShutdownRequest=y.InitializedNotification=y.InitializeError=y.InitializeRequest=y.WorkDoneProgressOptions=y.TextDocumentRegistrationOptions=y.StaticRegistrationOptions=y.FailureHandlingKind=y.ResourceOperationKind=y.UnregistrationRequest=y.RegistrationRequest=y.DocumentSelector=y.DocumentFilter=void 0;y.MonikerRequest=y.MonikerKind=y.UniquenessLevel=y.WillDeleteFilesRequest=y.DidDeleteFilesNotification=y.WillRenameFilesRequest=y.DidRenameFilesNotification=y.WillCreateFilesRequest=y.DidCreateFilesNotification=y.FileOperationPatternKind=y.LinkedEditingRangeRequest=y.ShowDocumentRequest=y.SemanticTokensRegistrationType=y.SemanticTokensRefreshRequest=y.SemanticTokensRangeRequest=y.SemanticTokensDeltaRequest=y.SemanticTokensRequest=y.TokenFormat=y.SemanticTokens=y.SemanticTokenModifiers=y.SemanticTokenTypes=y.CallHierarchyPrepareRequest=y.CallHierarchyOutgoingCallsRequest=y.CallHierarchyIncomingCallsRequest=y.WorkDoneProgressCancelNotification=y.WorkDoneProgressCreateRequest=y.WorkDoneProgress=y.SelectionRangeRequest=y.DeclarationRequest=y.FoldingRangeRequest=y.ColorPresentationRequest=y.DocumentColorRequest=y.ConfigurationRequest=y.DidChangeWorkspaceFoldersNotification=y.WorkspaceFoldersRequest=y.TypeDefinitionRequest=y.ImplementationRequest=y.ApplyWorkspaceEditRequest=y.ExecuteCommandRequest=y.PrepareRenameRequest=y.RenameRequest=y.PrepareSupportDefaultBehavior=y.DocumentOnTypeFormattingRequest=y.DocumentRangeFormattingRequest=y.DocumentFormattingRequest=y.DocumentLinkResolveRequest=void 0;var wr=wg(),se=it(),vS=bg();Object.defineProperty(y,"ImplementationRequest",{enumerable:!0,get:function(){return vS.ImplementationRequest}});var yS=Rg();Object.defineProperty(y,"TypeDefinitionRequest",{enumerable:!0,get:function(){return yS.TypeDefinitionRequest}});var jg=Sg();Object.defineProperty(y,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return jg.WorkspaceFoldersRequest}});Object.defineProperty(y,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return jg.DidChangeWorkspaceFoldersNotification}});var _S=Pg();Object.defineProperty(y,"ConfigurationRequest",{enumerable:!0,get:function(){return _S.ConfigurationRequest}});var Wg=Tg();Object.defineProperty(y,"DocumentColorRequest",{enumerable:!0,get:function(){return Wg.DocumentColorRequest}});Object.defineProperty(y,"ColorPresentationRequest",{enumerable:!0,get:function(){return Wg.ColorPresentationRequest}});var wS=qg();Object.defineProperty(y,"FoldingRangeRequest",{enumerable:!0,get:function(){return wS.FoldingRangeRequest}});var bS=Eg();Object.defineProperty(y,"DeclarationRequest",{enumerable:!0,get:function(){return bS.DeclarationRequest}});var RS=Og();Object.defineProperty(y,"SelectionRangeRequest",{enumerable:!0,get:function(){return RS.SelectionRangeRequest}});var nu=kg();Object.defineProperty(y,"WorkDoneProgress",{enumerable:!0,get:function(){return nu.WorkDoneProgress}});Object.defineProperty(y,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return nu.WorkDoneProgressCreateRequest}});Object.defineProperty(y,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return nu.WorkDoneProgressCancelNotification}});var ru=Mg();Object.defineProperty(y,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return ru.CallHierarchyIncomingCallsRequest}});Object.defineProperty(y,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return ru.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(y,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return ru.CallHierarchyPrepareRequest}});var Zn=xg();Object.defineProperty(y,"SemanticTokenTypes",{enumerable:!0,get:function(){return Zn.SemanticTokenTypes}});Object.defineProperty(y,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Zn.SemanticTokenModifiers}});Object.defineProperty(y,"SemanticTokens",{enumerable:!0,get:function(){return Zn.SemanticTokens}});Object.defineProperty(y,"TokenFormat",{enumerable:!0,get:function(){return Zn.TokenFormat}});Object.defineProperty(y,"SemanticTokensRequest",{enumerable:!0,get:function(){return Zn.SemanticTokensRequest}});Object.defineProperty(y,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Zn.SemanticTokensDeltaRequest}});Object.defineProperty(y,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Zn.SemanticTokensRangeRequest}});Object.defineProperty(y,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Zn.SemanticTokensRefreshRequest}});Object.defineProperty(y,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Zn.SemanticTokensRegistrationType}});var CS=Ig();Object.defineProperty(y,"ShowDocumentRequest",{enumerable:!0,get:function(){return CS.ShowDocumentRequest}});var SS=Ng();Object.defineProperty(y,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return SS.LinkedEditingRangeRequest}});var Jr=Ag();Object.defineProperty(y,"FileOperationPatternKind",{enumerable:!0,get:function(){return Jr.FileOperationPatternKind}});Object.defineProperty(y,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Jr.DidCreateFilesNotification}});Object.defineProperty(y,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Jr.WillCreateFilesRequest}});Object.defineProperty(y,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Jr.DidRenameFilesNotification}});Object.defineProperty(y,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Jr.WillRenameFilesRequest}});Object.defineProperty(y,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Jr.DidDeleteFilesNotification}});Object.defineProperty(y,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Jr.WillDeleteFilesRequest}});var iu=Lg();Object.defineProperty(y,"UniquenessLevel",{enumerable:!0,get:function(){return iu.UniquenessLevel}});Object.defineProperty(y,"MonikerKind",{enumerable:!0,get:function(){return iu.MonikerKind}});Object.defineProperty(y,"MonikerRequest",{enumerable:!0,get:function(){return iu.MonikerRequest}});var $g;(function(t){function e(n){let r=n;return wr.string(r.language)||wr.string(r.scheme)||wr.string(r.pattern)}t.is=e})($g=y.DocumentFilter||(y.DocumentFilter={}));var Hg;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!wr.string(r)&&!$g.is(r))return!1;return!0}t.is=e})(Hg=y.DocumentSelector||(y.DocumentSelector={}));var PS;(function(t){t.type=new se.ProtocolRequestType("client/registerCapability")})(PS=y.RegistrationRequest||(y.RegistrationRequest={}));var DS;(function(t){t.type=new se.ProtocolRequestType("client/unregisterCapability")})(DS=y.UnregistrationRequest||(y.UnregistrationRequest={}));var TS;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(TS=y.ResourceOperationKind||(y.ResourceOperationKind={}));var qS;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(qS=y.FailureHandlingKind||(y.FailureHandlingKind={}));var ES;(function(t){function e(n){let r=n;return r&&wr.string(r.id)&&r.id.length>0}t.hasId=e})(ES=y.StaticRegistrationOptions||(y.StaticRegistrationOptions={}));var OS;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Hg.is(r.documentSelector))}t.is=e})(OS=y.TextDocumentRegistrationOptions||(y.TextDocumentRegistrationOptions={}));var FS;(function(t){function e(r){let i=r;return wr.objectLiteral(i)&&(i.workDoneProgress===void 0||wr.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&wr.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(FS=y.WorkDoneProgressOptions||(y.WorkDoneProgressOptions={}));var kS;(function(t){t.type=new se.ProtocolRequestType("initialize")})(kS=y.InitializeRequest||(y.InitializeRequest={}));var MS;(function(t){t.unknownProtocolVersion=1})(MS=y.InitializeError||(y.InitializeError={}));var xS;(function(t){t.type=new se.ProtocolNotificationType("initialized")})(xS=y.InitializedNotification||(y.InitializedNotification={}));var IS;(function(t){t.type=new se.ProtocolRequestType0("shutdown")})(IS=y.ShutdownRequest||(y.ShutdownRequest={}));var NS;(function(t){t.type=new se.ProtocolNotificationType0("exit")})(NS=y.ExitNotification||(y.ExitNotification={}));var AS;(function(t){t.type=new se.ProtocolNotificationType("workspace/didChangeConfiguration")})(AS=y.DidChangeConfigurationNotification||(y.DidChangeConfigurationNotification={}));var LS;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(LS=y.MessageType||(y.MessageType={}));var jS;(function(t){t.type=new se.ProtocolNotificationType("window/showMessage")})(jS=y.ShowMessageNotification||(y.ShowMessageNotification={}));var WS;(function(t){t.type=new se.ProtocolRequestType("window/showMessageRequest")})(WS=y.ShowMessageRequest||(y.ShowMessageRequest={}));var $S;(function(t){t.type=new se.ProtocolNotificationType("window/logMessage")})($S=y.LogMessageNotification||(y.LogMessageNotification={}));var HS;(function(t){t.type=new se.ProtocolNotificationType("telemetry/event")})(HS=y.TelemetryEventNotification||(y.TelemetryEventNotification={}));var zS;(function(t){t.None=0,t.Full=1,t.Incremental=2})(zS=y.TextDocumentSyncKind||(y.TextDocumentSyncKind={}));var KS;(function(t){t.method="textDocument/didOpen",t.type=new se.ProtocolNotificationType(t.method)})(KS=y.DidOpenTextDocumentNotification||(y.DidOpenTextDocumentNotification={}));var US;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(US=y.TextDocumentContentChangeEvent||(y.TextDocumentContentChangeEvent={}));var BS;(function(t){t.method="textDocument/didChange",t.type=new se.ProtocolNotificationType(t.method)})(BS=y.DidChangeTextDocumentNotification||(y.DidChangeTextDocumentNotification={}));var GS;(function(t){t.method="textDocument/didClose",t.type=new se.ProtocolNotificationType(t.method)})(GS=y.DidCloseTextDocumentNotification||(y.DidCloseTextDocumentNotification={}));var XS;(function(t){t.method="textDocument/didSave",t.type=new se.ProtocolNotificationType(t.method)})(XS=y.DidSaveTextDocumentNotification||(y.DidSaveTextDocumentNotification={}));var VS;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(VS=y.TextDocumentSaveReason||(y.TextDocumentSaveReason={}));var JS;(function(t){t.method="textDocument/willSave",t.type=new se.ProtocolNotificationType(t.method)})(JS=y.WillSaveTextDocumentNotification||(y.WillSaveTextDocumentNotification={}));var QS;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new se.ProtocolRequestType(t.method)})(QS=y.WillSaveTextDocumentWaitUntilRequest||(y.WillSaveTextDocumentWaitUntilRequest={}));var YS;(function(t){t.type=new se.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(YS=y.DidChangeWatchedFilesNotification||(y.DidChangeWatchedFilesNotification={}));var ZS;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(ZS=y.FileChangeType||(y.FileChangeType={}));var eP;(function(t){t.Create=1,t.Change=2,t.Delete=4})(eP=y.WatchKind||(y.WatchKind={}));var tP;(function(t){t.type=new se.ProtocolNotificationType("textDocument/publishDiagnostics")})(tP=y.PublishDiagnosticsNotification||(y.PublishDiagnosticsNotification={}));var nP;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(nP=y.CompletionTriggerKind||(y.CompletionTriggerKind={}));var rP;(function(t){t.method="textDocument/completion",t.type=new se.ProtocolRequestType(t.method)})(rP=y.CompletionRequest||(y.CompletionRequest={}));var iP;(function(t){t.method="completionItem/resolve",t.type=new se.ProtocolRequestType(t.method)})(iP=y.CompletionResolveRequest||(y.CompletionResolveRequest={}));var oP;(function(t){t.method="textDocument/hover",t.type=new se.ProtocolRequestType(t.method)})(oP=y.HoverRequest||(y.HoverRequest={}));var sP;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(sP=y.SignatureHelpTriggerKind||(y.SignatureHelpTriggerKind={}));var aP;(function(t){t.method="textDocument/signatureHelp",t.type=new se.ProtocolRequestType(t.method)})(aP=y.SignatureHelpRequest||(y.SignatureHelpRequest={}));var cP;(function(t){t.method="textDocument/definition",t.type=new se.ProtocolRequestType(t.method)})(cP=y.DefinitionRequest||(y.DefinitionRequest={}));var uP;(function(t){t.method="textDocument/references",t.type=new se.ProtocolRequestType(t.method)})(uP=y.ReferencesRequest||(y.ReferencesRequest={}));var lP;(function(t){t.method="textDocument/documentHighlight",t.type=new se.ProtocolRequestType(t.method)})(lP=y.DocumentHighlightRequest||(y.DocumentHighlightRequest={}));var dP;(function(t){t.method="textDocument/documentSymbol",t.type=new se.ProtocolRequestType(t.method)})(dP=y.DocumentSymbolRequest||(y.DocumentSymbolRequest={}));var fP;(function(t){t.method="textDocument/codeAction",t.type=new se.ProtocolRequestType(t.method)})(fP=y.CodeActionRequest||(y.CodeActionRequest={}));var hP;(function(t){t.method="codeAction/resolve",t.type=new se.ProtocolRequestType(t.method)})(hP=y.CodeActionResolveRequest||(y.CodeActionResolveRequest={}));var gP;(function(t){t.method="workspace/symbol",t.type=new se.ProtocolRequestType(t.method)})(gP=y.WorkspaceSymbolRequest||(y.WorkspaceSymbolRequest={}));var pP;(function(t){t.method="textDocument/codeLens",t.type=new se.ProtocolRequestType(t.method)})(pP=y.CodeLensRequest||(y.CodeLensRequest={}));var mP;(function(t){t.method="codeLens/resolve",t.type=new se.ProtocolRequestType(t.method)})(mP=y.CodeLensResolveRequest||(y.CodeLensResolveRequest={}));var vP;(function(t){t.method="workspace/codeLens/refresh",t.type=new se.ProtocolRequestType0(t.method)})(vP=y.CodeLensRefreshRequest||(y.CodeLensRefreshRequest={}));var yP;(function(t){t.method="textDocument/documentLink",t.type=new se.ProtocolRequestType(t.method)})(yP=y.DocumentLinkRequest||(y.DocumentLinkRequest={}));var _P;(function(t){t.method="documentLink/resolve",t.type=new se.ProtocolRequestType(t.method)})(_P=y.DocumentLinkResolveRequest||(y.DocumentLinkResolveRequest={}));var wP;(function(t){t.method="textDocument/formatting",t.type=new se.ProtocolRequestType(t.method)})(wP=y.DocumentFormattingRequest||(y.DocumentFormattingRequest={}));var bP;(function(t){t.method="textDocument/rangeFormatting",t.type=new se.ProtocolRequestType(t.method)})(bP=y.DocumentRangeFormattingRequest||(y.DocumentRangeFormattingRequest={}));var RP;(function(t){t.method="textDocument/onTypeFormatting",t.type=new se.ProtocolRequestType(t.method)})(RP=y.DocumentOnTypeFormattingRequest||(y.DocumentOnTypeFormattingRequest={}));var CP;(function(t){t.Identifier=1})(CP=y.PrepareSupportDefaultBehavior||(y.PrepareSupportDefaultBehavior={}));var SP;(function(t){t.method="textDocument/rename",t.type=new se.ProtocolRequestType(t.method)})(SP=y.RenameRequest||(y.RenameRequest={}));var PP;(function(t){t.method="textDocument/prepareRename",t.type=new se.ProtocolRequestType(t.method)})(PP=y.PrepareRenameRequest||(y.PrepareRenameRequest={}));var DP;(function(t){t.type=new se.ProtocolRequestType("workspace/executeCommand")})(DP=y.ExecuteCommandRequest||(y.ExecuteCommandRequest={}));var TP;(function(t){t.type=new se.ProtocolRequestType("workspace/applyEdit")})(TP=y.ApplyWorkspaceEditRequest||(y.ApplyWorkspaceEditRequest={}))});var Ug=T(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.createProtocolConnection=void 0;var Kg=wi();function qP(t,e,n,r){return Kg.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),Kg.createMessageConnection(t,e,n,r)}Ns.createProtocolConnection=qP});var Bg=T(yt=>{"use strict";var EP=yt&&yt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),As=yt&&yt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&EP(e,t,n)};Object.defineProperty(yt,"__esModule",{value:!0});yt.LSPErrorCodes=yt.createProtocolConnection=void 0;As(wi(),yt);As(mr(),yt);As(it(),yt);As(zg(),yt);var OP=Ug();Object.defineProperty(yt,"createProtocolConnection",{enumerable:!0,get:function(){return OP.createProtocolConnection}});var FP;(function(t){t.lspReservedErrorRangeStart=-32899,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(FP=yt.LSPErrorCodes||(yt.LSPErrorCodes={}))});var ie=T(qn=>{"use strict";var kP=qn&&qn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Gg=qn&&qn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&kP(e,t,n)};Object.defineProperty(qn,"__esModule",{value:!0});qn.createProtocolConnection=void 0;var MP=eu();Gg(eu(),qn);Gg(Bg(),qn);function xP(t,e,n,r){return MP.createMessageConnection(t,e,n,r)}qn.createProtocolConnection=xP});var su=T(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.toJSONObject=Si.ConfigurationFeature=void 0;var ou=require("vscode"),IP=ie(),Xg=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(IP.ConfigurationRequest.type,(n,r)=>{let i=o=>{let a=[];for(let c of o.items){let d=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(d,c.section!==null?c.section:void 0))}return a},s=e.clientOptions.middleware.workspace;return s&&s.configuration?s.configuration(n,r,i):i(n,r)})}getConfiguration(e,n){let r=null;if(n){let i=n.lastIndexOf(".");if(i===-1)r=Ci(ou.workspace.getConfiguration(void 0,e).get(n));else{let s=ou.workspace.getConfiguration(n.substr(0,i),e);s&&(r=Ci(s.get(n.substr(i+1))))}}else{let i=ou.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=Ci(i.get(s)))}return r===void 0&&(r=null),r}dispose(){}};Si.ConfigurationFeature=Xg;function Ci(t){if(t){if(Array.isArray(t))return t.map(Ci);if(typeof t=="object"){let e=Object.create(null);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Ci(t[n]));return e}}return t}Si.toJSONObject=Ci});var cu=T(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});var NP=require("vscode"),Vg=class extends NP.CompletionItem{constructor(e){super(e)}};au.default=Vg});var lu=T(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});var AP=require("vscode"),Jg=class extends AP.CodeLens{constructor(e){super(e)}};uu.default=Jg});var fu=T(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});var LP=require("vscode"),Qg=class extends LP.DocumentLink{constructor(e,n){super(e,n)}};du.default=Qg});var gu=T(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});var jP=require("vscode"),Yg=class extends jP.CodeAction{constructor(e,n){super(e);this.data=n}};hu.default=Yg});var mu=T(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.ProtocolDiagnostic=Qr.DiagnosticCode=void 0;var WP=require("vscode"),pu=pr(),$P;(function(t){function e(n){let r=n;return r!=null&&(pu.number(r.value)||pu.string(r.value))&&pu.string(r.target)}t.is=e})($P=Qr.DiagnosticCode||(Qr.DiagnosticCode={}));var Zg=class extends WP.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}};Qr.ProtocolDiagnostic=Zg});var yu=T(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});var HP=require("vscode"),ep=class extends HP.CallHierarchyItem{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,o);a!==void 0&&(this.data=a)}};vu.default=ep});var np=T(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.createConverter=void 0;var ot=require("vscode"),Se=ie(),Mo=pr(),zP=cu(),KP=lu(),UP=fu(),BP=gu(),tp=mu(),GP=yu(),XP=ie(),_u;(function(t){function e(n){let r=n;return r&&!!r.inserting&&!!r.replacing}t.is=e})(_u||(_u={}));function VP(t){let n=t||(u=>u.toString());function r(u){return n(u)}function i(u){return{uri:n(u.uri)}}function s(u){return{uri:n(u.uri),version:u.version}}function o(u){return{textDocument:{uri:n(u.uri),languageId:u.languageId,version:u.version,text:u.getText()}}}function a(u){let l=u;return!!l.document&&!!l.contentChanges}function c(u){let l=u;return!!l.uri&&!!l.version}function d(u){if(c(u))return{textDocument:{uri:n(u.uri),version:u.version},contentChanges:[{text:u.getText()}]};if(a(u)){let l=u.document;return{textDocument:{uri:n(l.uri),version:l.version},contentChanges:u.contentChanges.map(E=>{let $=E.range;return{range:{start:{line:$.start.line,character:$.start.character},end:{line:$.end.line,character:$.end.character}},rangeLength:E.rangeLength,text:E.text}})}}else throw Error("Unsupported text document change parameter")}function h(u){return{textDocument:i(u)}}function p(u,l=!1){let S={textDocument:i(u)};return l&&(S.text=u.getText()),S}function m(u){switch(u){case ot.TextDocumentSaveReason.Manual:return Se.TextDocumentSaveReason.Manual;case ot.TextDocumentSaveReason.AfterDelay:return Se.TextDocumentSaveReason.AfterDelay;case ot.TextDocumentSaveReason.FocusOut:return Se.TextDocumentSaveReason.FocusOut}return Se.TextDocumentSaveReason.Manual}function v(u){return{textDocument:i(u.document),reason:m(u.reason)}}function O(u){return{files:u.files.map(l=>({uri:n(l)}))}}function F(u){return{files:u.files.map(l=>({oldUri:n(l.oldUri),newUri:n(l.newUri)}))}}function N(u){return{files:u.files.map(l=>({uri:n(l)}))}}function b(u){return{files:u.files.map(l=>({uri:n(l)}))}}function w(u){return{files:u.files.map(l=>({oldUri:n(l.oldUri),newUri:n(l.newUri)}))}}function q(u){return{files:u.files.map(l=>({uri:n(l)}))}}function k(u,l){return{textDocument:i(u),position:de(l)}}function W(u){switch(u){case ot.CompletionTriggerKind.TriggerCharacter:return Se.CompletionTriggerKind.TriggerCharacter;case ot.CompletionTriggerKind.TriggerForIncompleteCompletions:return Se.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return Se.CompletionTriggerKind.Invoked}}function ee(u,l,S){return{textDocument:i(u),position:de(l),context:{triggerKind:W(S.triggerKind),triggerCharacter:S.triggerCharacter}}}function ve(u){switch(u){case ot.SignatureHelpTriggerKind.Invoke:return Se.SignatureHelpTriggerKind.Invoked;case ot.SignatureHelpTriggerKind.TriggerCharacter:return Se.SignatureHelpTriggerKind.TriggerCharacter;case ot.SignatureHelpTriggerKind.ContentChange:return Se.SignatureHelpTriggerKind.ContentChange}}function we(u){return{label:u.label}}function ke(u){return u.map(we)}function j(u){return{label:u.label,parameters:ke(u.parameters)}}function x(u){return u.map(j)}function L(u){return u===void 0?u:{signatures:x(u.signatures),activeSignature:u.activeSignature,activeParameter:u.activeParameter}}function z(u,l,S){return{textDocument:i(u),position:de(l),context:{isRetrigger:S.isRetrigger,triggerCharacter:S.triggerCharacter,triggerKind:ve(S.triggerKind),activeSignatureHelp:L(S.activeSignatureHelp)}}}function de(u){return{line:u.line,character:u.character}}function Z(u){return u==null?u:{line:u.line,character:u.character}}function le(u){let l=[];for(let S of u)l.push(Z(S));return l}function ne(u){return u==null?u:{start:Z(u.start),end:Z(u.end)}}function Ie(u){return u==null?u:Se.Location.create(r(u.uri),ne(u.range))}function Te(u){switch(u){case ot.DiagnosticSeverity.Error:return Se.DiagnosticSeverity.Error;case ot.DiagnosticSeverity.Warning:return Se.DiagnosticSeverity.Warning;case ot.DiagnosticSeverity.Information:return Se.DiagnosticSeverity.Information;case ot.DiagnosticSeverity.Hint:return Se.DiagnosticSeverity.Hint}}function tt(u){if(!u)return;let l=[];for(let S of u){let E=Ze(S);E!==void 0&&l.push(E)}return l.length>0?l:void 0}function Ze(u){switch(u){case ot.DiagnosticTag.Unnecessary:return Se.DiagnosticTag.Unnecessary;case ot.DiagnosticTag.Deprecated:return Se.DiagnosticTag.Deprecated;default:return}}function cn(u){return{message:u.message,location:Ie(u.location)}}function ar(u){return u.map(cn)}function cr(u){if(u!=null)return Mo.number(u)||Mo.string(u)?u:{value:u.value,target:r(u.target)}}function Hn(u){let l=Se.Diagnostic.create(ne(u.range),u.message),S=u instanceof tp.ProtocolDiagnostic?u:void 0;S!==void 0&&S.data!==void 0&&(l.data=S.data);let E=cr(u.code);return tp.DiagnosticCode.is(E)?S!==void 0&&S.hasDiagnosticCode?l.code=E:(l.code=E.value,l.codeDescription={href:E.target}):l.code=E,Mo.number(u.severity)&&(l.severity=Te(u.severity)),Array.isArray(u.tags)&&(l.tags=tt(u.tags)),u.relatedInformation&&(l.relatedInformation=ar(u.relatedInformation)),u.source&&(l.source=u.source),l}function zn(u){return u==null?u:u.map(Hn)}function Pn(u,l){switch(u){case"$string":return l;case Se.MarkupKind.PlainText:return{kind:u,value:l};case Se.MarkupKind.Markdown:return{kind:u,value:l.value};default:return`Unsupported Markup content received. Kind is: ${u}`}}function Dn(u){switch(u){case ot.CompletionItemTag.Deprecated:return Se.CompletionItemTag.Deprecated}}function Kn(u){if(u===void 0)return u;let l=[];for(let S of u){let E=Dn(S);E!==void 0&&l.push(E)}return l}function ur(u,l){return l!==void 0?l:u+1}function Ir(u){let l={label:u.label},S=u instanceof zP.default?u:void 0;u.detail&&(l.detail=u.detail),u.documentation&&(!S||S.documentationFormat==="$string"?l.documentation=u.documentation:l.documentation=Pn(S.documentationFormat,u.documentation)),u.filterText&&(l.filterText=u.filterText),$t(l,u),Mo.number(u.kind)&&(l.kind=ur(u.kind,S&&S.originalItemKind)),u.sortText&&(l.sortText=u.sortText),u.additionalTextEdits&&(l.additionalTextEdits=Nr(u.additionalTextEdits)),u.commitCharacters&&(l.commitCharacters=u.commitCharacters.slice()),u.command&&(l.command=Kt(u.command)),(u.preselect===!0||u.preselect===!1)&&(l.preselect=u.preselect);let E=Kn(u.tags);if(S){if(S.data!==void 0&&(l.data=S.data),S.deprecated===!0||S.deprecated===!1){if(S.deprecated===!0&&E!==void 0&&E.length>0){let $=E.indexOf(ot.CompletionItemTag.Deprecated);$!==-1&&E.splice($,1)}l.deprecated=S.deprecated}S.insertTextMode!==void 0&&(l.insertTextMode=S.insertTextMode)}return E!==void 0&&E.length>0&&(l.tags=E),l.insertTextMode===void 0&&u.keepWhitespace===!0&&(l.insertTextMode=XP.InsertTextMode.adjustIndentation),l}function $t(u,l){let S=Se.InsertTextFormat.PlainText,E,$;l.textEdit?(E=l.textEdit.newText,$=l.textEdit.range):l.insertText instanceof ot.SnippetString?(S=Se.InsertTextFormat.Snippet,E=l.insertText.value):E=l.insertText,l.range&&($=l.range),u.insertTextFormat=S,l.fromEdit&&E!==void 0&&$!==void 0?u.textEdit=lr(E,$):u.insertText=E}function lr(u,l){return _u.is(l)?Se.InsertReplaceEdit.create(u,ne(l.inserting),ne(l.replacing)):{newText:u,range:ne(l)}}function Ht(u){return{range:ne(u.range),newText:u.newText}}function Nr(u){return u==null?u:u.map(Ht)}function Ke(u){return u<=ot.SymbolKind.TypeParameter?u+1:Se.SymbolKind.Property}function Ct(u){return u}function dr(u){return u.map(Ct)}function Ar(u,l,S){return{textDocument:i(u),position:de(l),context:{includeDeclaration:S.includeDeclaration}}}function zt(u){let l=Se.CodeAction.create(u.title);if(u instanceof BP.default&&u.data!==void 0&&(l.data=u.data),u.kind!==void 0&&(l.kind=Un(u.kind)),u.diagnostics!==void 0&&(l.diagnostics=zn(u.diagnostics)),u.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return u.command!==void 0&&(l.command=Kt(u.command)),u.isPreferred!==void 0&&(l.isPreferred=u.isPreferred),u.disabled!==void 0&&(l.disabled={reason:u.disabled.reason}),l}function fr(u){if(u==null)return u;let l;return u.only&&Mo.string(u.only.value)&&(l=[u.only.value]),Se.CodeActionContext.create(zn(u.diagnostics),l)}function Un(u){if(u!=null)return u.value}function Kt(u){let l=Se.Command.create(u.title,u.command);return u.arguments&&(l.arguments=u.arguments),l}function Bn(u){let l=Se.CodeLens.create(ne(u.range));return u.command&&(l.command=Kt(u.command)),u instanceof KP.default&&u.data&&(l.data=u.data),l}function Ut(u,l){let S={tabSize:u.tabSize,insertSpaces:u.insertSpaces};return l.trimTrailingWhitespace&&(S.trimTrailingWhitespace=!0),l.trimFinalNewlines&&(S.trimFinalNewlines=!0),l.insertFinalNewline&&(S.insertFinalNewline=!0),S}function P(u){return{textDocument:i(u)}}function _(u){return{textDocument:i(u)}}function g(u){let l=Se.DocumentLink.create(ne(u.range));u.target&&(l.target=r(u.target)),u.tooltip!==void 0&&(l.tooltip=u.tooltip);let S=u instanceof UP.default?u:void 0;return S&&S.data&&(l.data=S.data),l}function R(u){return{textDocument:i(u)}}function D(u){let l={name:u.name,kind:Ke(u.kind),uri:r(u.uri),range:ne(u.range),selectionRange:ne(u.selectionRange)};return u.detail!==void 0&&u.detail.length>0&&(l.detail=u.detail),u.tags!==void 0&&(l.tags=dr(u.tags)),u instanceof GP.default&&u.data!==void 0&&(l.data=u.data),l}return{asUri:r,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:o,asChangeTextDocumentParams:d,asCloseTextDocumentParams:h,asSaveTextDocumentParams:p,asWillSaveTextDocumentParams:v,asDidCreateFilesParams:O,asDidRenameFilesParams:F,asDidDeleteFilesParams:N,asWillCreateFilesParams:b,asWillRenameFilesParams:w,asWillDeleteFilesParams:q,asTextDocumentPositionParams:k,asCompletionParams:ee,asSignatureHelpParams:z,asWorkerPosition:de,asRange:ne,asPosition:Z,asPositions:le,asLocation:Ie,asDiagnosticSeverity:Te,asDiagnosticTag:Ze,asDiagnostic:Hn,asDiagnostics:zn,asCompletionItem:Ir,asTextEdit:Ht,asSymbolKind:Ke,asSymbolTag:Ct,asSymbolTags:dr,asReferenceParams:Ar,asCodeAction:zt,asCodeActionContext:fr,asCommand:Kt,asCodeLens:Bn,asFormattingOptions:Ut,asDocumentSymbolParams:P,asCodeLensParams:_,asDocumentLink:g,asDocumentLinkParams:R,asCallHierarchyItem:D}}Ls.createConverter=VP});var op=T(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.createConverter=void 0;var X=require("vscode"),he=ie(),pn=pr(),JP=cu(),QP=lu(),YP=fu(),ZP=gu(),rp=mu(),eD=yu(),ip=ie(),js;(function(t){function e(n){let r=n;return r&&pn.string(r.language)&&pn.string(r.value)}t.is=e})(js||(js={}));function tD(t,e){let r=t||(f=>X.Uri.parse(f));function i(f){return r(f)}function s(f){return f.map(o)}function o(f){let M=new rp.ProtocolDiagnostic(m(f.range),f.message,O(f.severity),f.data);return f.code!==void 0&&(he.CodeDescription.is(f.codeDescription)?M.code={value:f.code,target:i(f.codeDescription.href)}:rp.DiagnosticCode.is(f.code)?(M.hasDiagnosticCode=!0,M.code={value:f.code.value,target:i(f.code.target)}):M.code=f.code),f.source&&(M.source=f.source),f.relatedInformation&&(M.relatedInformation=a(f.relatedInformation)),Array.isArray(f.tags)&&(M.tags=d(f.tags)),M}function a(f){return f.map(c)}function c(f){return new X.DiagnosticRelatedInformation(ne(f.location),f.message)}function d(f){if(!f)return;let M=[];for(let Q of f){let _e=h(Q);_e!==void 0&&M.push(_e)}return M.length>0?M:void 0}function h(f){switch(f){case he.DiagnosticTag.Unnecessary:return X.DiagnosticTag.Unnecessary;case he.DiagnosticTag.Deprecated:return X.DiagnosticTag.Deprecated;default:return}}function p(f){if(!!f)return new X.Position(f.line,f.character)}function m(f){if(!!f)return new X.Range(p(f.start),p(f.end))}function v(f){return f.map(M=>m(M))}function O(f){if(f==null)return X.DiagnosticSeverity.Error;switch(f){case he.DiagnosticSeverity.Error:return X.DiagnosticSeverity.Error;case he.DiagnosticSeverity.Warning:return X.DiagnosticSeverity.Warning;case he.DiagnosticSeverity.Information:return X.DiagnosticSeverity.Information;case he.DiagnosticSeverity.Hint:return X.DiagnosticSeverity.Hint}return X.DiagnosticSeverity.Error}function F(f){if(pn.string(f))return b(f);if(js.is(f))return b().appendCodeblock(f.value,f.language);if(Array.isArray(f)){let M=[];for(let Q of f){let _e=b();js.is(Q)?_e.appendCodeblock(Q.value,Q.language):_e.appendMarkdown(Q),M.push(_e)}return M}else{let M;switch(f.kind){case he.MarkupKind.Markdown:return b(f.value);case he.MarkupKind.PlainText:return M=b(),M.appendText(f.value),M;default:return M=b(),M.appendText(`Unsupported Markup content received. Kind is: ${f.kind}`),M}}}function N(f){if(pn.string(f))return f;switch(f.kind){case he.MarkupKind.Markdown:return b(f.value);case he.MarkupKind.PlainText:return f.value;default:return`Unsupported Markup content received. Kind is: ${f.kind}`}}function b(f){let M=new X.MarkdownString(f);return e===!0&&(M.isTrusted=e),M}function w(f){if(!!f)return new X.Hover(F(f.contents),m(f.range))}function q(f){if(!f)return;if(Array.isArray(f))return f.map(ve);let M=f;return new X.CompletionList(M.items.map(ve),M.isIncomplete)}function k(f){return he.CompletionItemKind.Text<=f&&f<=he.CompletionItemKind.TypeParameter?[f-1,void 0]:[X.CompletionItemKind.Text,f]}function W(f){switch(f){case he.CompletionItemTag.Deprecated:return X.CompletionItemTag.Deprecated}}function ee(f){if(f==null)return[];let M=[];for(let Q of f){let _e=W(Q);_e!==void 0&&M.push(_e)}return M}function ve(f){let M=ee(f.tags),Q=new JP.default(f.label);f.detail&&(Q.detail=f.detail),f.documentation&&(Q.documentation=N(f.documentation),Q.documentationFormat=pn.string(f.documentation)?"$string":f.documentation.kind),f.filterText&&(Q.filterText=f.filterText);let _e=we(f);if(_e&&(Q.insertText=_e.text,Q.range=_e.range,Q.fromEdit=_e.fromEdit),pn.number(f.kind)){let[Fe,jr]=k(f.kind);Q.kind=Fe,jr&&(Q.originalItemKind=jr)}return f.sortText&&(Q.sortText=f.sortText),f.additionalTextEdits&&(Q.additionalTextEdits=x(f.additionalTextEdits)),pn.stringArray(f.commitCharacters)&&(Q.commitCharacters=f.commitCharacters.slice()),f.command&&(Q.command=Ht(f.command)),(f.deprecated===!0||f.deprecated===!1)&&(Q.deprecated=f.deprecated,f.deprecated===!0&&M.push(X.CompletionItemTag.Deprecated)),(f.preselect===!0||f.preselect===!1)&&(Q.preselect=f.preselect),f.data!==void 0&&(Q.data=f.data),M.length>0&&(Q.tags=M),f.insertTextMode!==void 0&&(Q.insertTextMode=f.insertTextMode,f.insertTextMode===ip.InsertTextMode.asIs&&(Q.keepWhitespace=!0)),Q}function we(f){return f.textEdit?f.insertTextFormat===he.InsertTextFormat.Snippet?{text:new X.SnippetString(f.textEdit.newText),range:ke(f.textEdit),fromEdit:!0}:{text:f.textEdit.newText,range:ke(f.textEdit),fromEdit:!0}:f.insertText?f.insertTextFormat===he.InsertTextFormat.Snippet?{text:new X.SnippetString(f.insertText),fromEdit:!1}:{text:f.insertText,fromEdit:!1}:void 0}function ke(f){return he.InsertReplaceEdit.is(f)?{inserting:m(f.insert),replacing:m(f.replace)}:m(f.range)}function j(f){if(!!f)return new X.TextEdit(m(f.range),f.newText)}function x(f){if(!!f)return f.map(j)}function L(f){if(!f)return;let M=new X.SignatureHelp;return pn.number(f.activeSignature)?M.activeSignature=f.activeSignature:M.activeSignature=0,pn.number(f.activeParameter)?M.activeParameter=f.activeParameter:M.activeParameter=0,f.signatures&&(M.signatures=z(f.signatures)),M}function z(f){return f.map(de)}function de(f){let M=new X.SignatureInformation(f.label);return f.documentation!==void 0&&(M.documentation=N(f.documentation)),f.parameters!==void 0&&(M.parameters=Z(f.parameters)),f.activeParameter!==void 0&&(M.activeParameter=f.activeParameter),M}function Z(f){return f.map(le)}function le(f){let M=new X.ParameterInformation(f.label);return f.documentation&&(M.documentation=N(f.documentation)),M}function ne(f){if(!!f)return new X.Location(r(f.uri),m(f.range))}function Ie(f){if(!!f)return Ze(f)}function Te(f){if(!!f)return Ze(f)}function tt(f){if(!f)return;let M={targetUri:r(f.targetUri),targetRange:m(f.targetRange),originSelectionRange:m(f.originSelectionRange),targetSelectionRange:m(f.targetSelectionRange)};if(!M.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return M}function Ze(f){if(!!f)return pn.array(f)?f.length===0?[]:he.LocationLink.is(f[0])?f.map(Q=>tt(Q)):f.map(Q=>ne(Q)):he.LocationLink.is(f)?[tt(f)]:ne(f)}function cn(f){if(!!f)return f.map(M=>ne(M))}function ar(f){if(!!f)return f.map(cr)}function cr(f){let M=new X.DocumentHighlight(m(f.range));return pn.number(f.kind)&&(M.kind=Hn(f.kind)),M}function Hn(f){switch(f){case he.DocumentHighlightKind.Text:return X.DocumentHighlightKind.Text;case he.DocumentHighlightKind.Read:return X.DocumentHighlightKind.Read;case he.DocumentHighlightKind.Write:return X.DocumentHighlightKind.Write}return X.DocumentHighlightKind.Text}function zn(f,M){if(!!f)return f.map(Q=>ur(Q,M))}function Pn(f){return f<=he.SymbolKind.TypeParameter?f-1:X.SymbolKind.Property}function Dn(f){switch(f){case he.SymbolTag.Deprecated:return X.SymbolTag.Deprecated;default:return}}function Kn(f){if(f==null)return;let M=[];for(let Q of f){let _e=Dn(Q);_e!==void 0&&M.push(_e)}return M.length===0?void 0:M}function ur(f,M){let Q=new X.SymbolInformation(f.name,Pn(f.kind),m(f.location.range),f.location.uri?r(f.location.uri):M);return lr(Q,f),f.containerName&&(Q.containerName=f.containerName),Q}function Ir(f){if(f!=null)return f.map($t)}function $t(f){let M=new X.DocumentSymbol(f.name,f.detail||"",Pn(f.kind),m(f.range),m(f.selectionRange));if(lr(M,f),f.children!==void 0&&f.children.length>0){let Q=[];for(let _e of f.children)Q.push($t(_e));M.children=Q}return M}function lr(f,M){f.tags=Kn(M.tags),M.deprecated&&(f.tags?f.tags.includes(X.SymbolTag.Deprecated)||(f.tags=f.tags.concat(X.SymbolTag.Deprecated)):f.tags=[X.SymbolTag.Deprecated])}function Ht(f){let M={title:f.title,command:f.command};return f.arguments&&(M.arguments=f.arguments),M}function Nr(f){if(!!f)return f.map(Ht)}let Ke=new Map;Ke.set(he.CodeActionKind.Empty,X.CodeActionKind.Empty),Ke.set(he.CodeActionKind.QuickFix,X.CodeActionKind.QuickFix),Ke.set(he.CodeActionKind.Refactor,X.CodeActionKind.Refactor),Ke.set(he.CodeActionKind.RefactorExtract,X.CodeActionKind.RefactorExtract),Ke.set(he.CodeActionKind.RefactorInline,X.CodeActionKind.RefactorInline),Ke.set(he.CodeActionKind.RefactorRewrite,X.CodeActionKind.RefactorRewrite),Ke.set(he.CodeActionKind.Source,X.CodeActionKind.Source),Ke.set(he.CodeActionKind.SourceOrganizeImports,X.CodeActionKind.SourceOrganizeImports);function Ct(f){if(f==null)return;let M=Ke.get(f);if(M)return M;let Q=f.split(".");M=X.CodeActionKind.Empty;for(let _e of Q)M=M.append(_e);return M}function dr(f){if(f!=null)return f.map(M=>Ct(M))}function Ar(f){if(f==null)return;let M=new ZP.default(f.title,f.data);return f.kind!==void 0&&(M.kind=Ct(f.kind)),f.diagnostics!==void 0&&(M.diagnostics=s(f.diagnostics)),f.edit!==void 0&&(M.edit=Un(f.edit)),f.command!==void 0&&(M.command=Ht(f.command)),f.isPreferred!==void 0&&(M.isPreferred=f.isPreferred),f.disabled!==void 0&&(M.disabled={reason:f.disabled.reason}),M}function zt(f){if(!f)return;let M=new QP.default(m(f.range));return f.command&&(M.command=Ht(f.command)),f.data!==void 0&&f.data!==null&&(M.data=f.data),M}function fr(f){if(!!f)return f.map(M=>zt(M))}function Un(f){if(!f)return;let M=new Map;if(f.changeAnnotations!==void 0)for(let Fe of Object.keys(f.changeAnnotations)){let jr=Kt(f.changeAnnotations[Fe]);M.set(Fe,jr)}let Q=Fe=>{if(Fe!==void 0)return M.get(Fe)},_e=new X.WorkspaceEdit;if(f.documentChanges)for(let Fe of f.documentChanges)if(he.CreateFile.is(Fe))_e.createFile(r(Fe.uri),Fe.options,Q(Fe.annotationId));else if(he.RenameFile.is(Fe))_e.renameFile(r(Fe.oldUri),r(Fe.newUri),Fe.options,Q(Fe.annotationId));else if(he.DeleteFile.is(Fe))_e.deleteFile(r(Fe.uri),Fe.options,Q(Fe.annotationId));else if(he.TextDocumentEdit.is(Fe)){let jr=r(Fe.textDocument.uri);for(let ui of Fe.edits)ip.AnnotatedTextEdit.is(ui)?_e.replace(jr,m(ui.range),ui.newText,Q(ui.annotationId)):_e.replace(jr,m(ui.range),ui.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Fe,void 0,4)}`);else f.changes&&Object.keys(f.changes).forEach(Fe=>{_e.set(r(Fe),x(f.changes[Fe]))});return _e}function Kt(f){if(f!==void 0)return{label:f.label,needsConfirmation:!!f.needsConfirmation,description:f.description}}function Bn(f){let M=m(f.range),Q=f.target?i(f.target):void 0,_e=new YP.default(M,Q);return f.tooltip!==void 0&&(_e.tooltip=f.tooltip),f.data!==void 0&&f.data!==null&&(_e.data=f.data),_e}function Ut(f){if(!!f)return f.map(Bn)}function P(f){return new X.Color(f.red,f.green,f.blue,f.alpha)}function _(f){return new X.ColorInformation(m(f.range),P(f.color))}function g(f){if(Array.isArray(f))return f.map(_)}function R(f){let M=new X.ColorPresentation(f.label);return M.additionalTextEdits=x(f.additionalTextEdits),f.textEdit&&(M.textEdit=j(f.textEdit)),M}function D(f){if(Array.isArray(f))return f.map(R)}function u(f){if(f)switch(f){case he.FoldingRangeKind.Comment:return X.FoldingRangeKind.Comment;case he.FoldingRangeKind.Imports:return X.FoldingRangeKind.Imports;case he.FoldingRangeKind.Region:return X.FoldingRangeKind.Region}}function l(f){return new X.FoldingRange(f.startLine,f.endLine,u(f.kind))}function S(f){if(Array.isArray(f))return f.map(l)}function E(f){return new X.SelectionRange(m(f.range),f.parent?E(f.parent):void 0)}function $(f){if(!Array.isArray(f))return[];let M=[];for(let Q of f)M.push(E(Q));return M}function V(f){if(f===null)return;let M=new eD.default(Pn(f.kind),f.name,f.detail||"",i(f.uri),m(f.range),m(f.selectionRange),f.data);return f.tags!==void 0&&(M.tags=Kn(f.tags)),M}function oe(f){if(f!==null)return f.map(M=>V(M))}function qe(f){return new X.CallHierarchyIncomingCall(V(f.from),v(f.fromRanges))}function Ue(f){if(f!==null)return f.map(M=>qe(M))}function Be(f){return new X.CallHierarchyOutgoingCall(V(f.to),v(f.fromRanges))}function me(f){if(f!==null)return f.map(M=>Be(M))}function hr(f){if(f!=null)return new X.SemanticTokens(new Uint32Array(f.data),f.resultId)}function Lr(f){return new X.SemanticTokensEdit(f.start,f.deleteCount,f.data!==void 0?new Uint32Array(f.data):void 0)}function gs(f){if(f!=null)return new X.SemanticTokensEdits(f.edits.map(Lr),f.resultId)}function sw(f){return f}function aw(f){if(f!=null)return new X.LinkedEditingRanges(v(f.ranges),cw(f.wordPattern))}function cw(f){if(f!=null)return new RegExp(f)}return{asUri:i,asDiagnostics:s,asDiagnostic:o,asRange:m,asRanges:v,asPosition:p,asDiagnosticSeverity:O,asDiagnosticTag:h,asHover:w,asCompletionResult:q,asCompletionItem:ve,asTextEdit:j,asTextEdits:x,asSignatureHelp:L,asSignatureInformations:z,asSignatureInformation:de,asParameterInformations:Z,asParameterInformation:le,asDeclarationResult:Ie,asDefinitionResult:Te,asLocation:ne,asReferences:cn,asDocumentHighlights:ar,asDocumentHighlight:cr,asDocumentHighlightKind:Hn,asSymbolKind:Pn,asSymbolTag:Dn,asSymbolTags:Kn,asSymbolInformations:zn,asSymbolInformation:ur,asDocumentSymbols:Ir,asDocumentSymbol:$t,asCommand:Ht,asCommands:Nr,asCodeAction:Ar,asCodeActionKind:Ct,asCodeActionKinds:dr,asCodeLens:zt,asCodeLenses:fr,asWorkspaceEdit:Un,asDocumentLink:Bn,asDocumentLinks:Ut,asFoldingRangeKind:u,asFoldingRange:l,asFoldingRanges:S,asColor:P,asColorInformation:_,asColorInformations:g,asColorPresentation:R,asColorPresentations:D,asSelectionRange:E,asSelectionRanges:$,asSemanticTokensLegend:sw,asSemanticTokens:hr,asSemanticTokensEdit:Lr,asSemanticTokensEdits:gs,asCallHierarchyItem:V,asCallHierarchyItems:oe,asCallHierarchyIncomingCall:qe,asCallHierarchyIncomingCalls:Ue,asCallHierarchyOutgoingCall:Be,asCallHierarchyOutgoingCalls:me,asLinkedEditingRanges:aw}}Ws.createConverter=tD});var cp=T($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.Delayer=void 0;var sp=ie(),ap=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,n=this.defaultDelay){return this.task=e,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(n>=0||this.timeout===void 0)&&(this.timeout=sp.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(sp.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};$s.Delayer=ap});var zs=T(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.generateUuid=Jt.parse=Jt.isUUID=Jt.v4=Jt.empty=void 0;var Hs=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},ge=class extends Hs{constructor(){super([ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),"-",ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),"-","4",ge._randomHex(),ge._randomHex(),ge._randomHex(),"-",ge._oneOf(ge._timeHighBits),ge._randomHex(),ge._randomHex(),ge._randomHex(),"-",ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex(),ge._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return ge._oneOf(ge._chars)}};ge._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];ge._timeHighBits=["8","9","a","b"];Jt.empty=new Hs("00000000-0000-0000-0000-000000000000");function up(){return new ge}Jt.v4=up;var nD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function lp(t){return nD.test(t)}Jt.isUUID=lp;function rD(t){if(!lp(t))throw new Error("invalid uuid");return new Hs(t)}Jt.parse=rD;function iD(){return up().asHex()}Jt.generateUuid=iD});var wu=T(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.ProgressPart=void 0;var dp=require("vscode"),fp=ie(),hp=pr(),gp=class{constructor(e,n,r){this._client=e,this._token=n,this._reported=0,this._disposable=this._client.onProgress(fp.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){dp.window.withProgress({location:dp.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(n,r)=>(this._progress=n,this._infinite=e.percentage===void 0,this._cancellationToken=r,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(fp.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})))}report(e){if(this._infinite&&hp.string(e.message))this._progress.report({message:e.message});else if(hp.number(e.percentage)){let n=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,n-this._reported);this._progress.report({message:e.message,increment:r}),this._reported+=r}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};Ks.ProgressPart=gp});var At=T(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.BaseLanguageClient=Ge.MessageTransports=Ge.TextDocumentFeature=Ge.State=Ge.RevealOutputChannelOn=Ge.CloseAction=Ge.ErrorAction=void 0;var K=require("vscode"),C=ie(),oD=su(),sD=np(),aD=op(),Me=pr(),pp=cp(),xe=zs(),cD=wu(),mp=class{error(e){C.RAL().console.error(e)}warn(e){C.RAL().console.warn(e)}info(e){C.RAL().console.info(e)}log(e){C.RAL().console.log(e)}};function uD(t,e,n,r,i){let s=new mp,o=C.createProtocolConnection(t,e,s,i);return o.onError(c=>{n(c[0],c[1],c[2])}),o.onClose(r),{listen:()=>o.listen(),sendRequest:(c,...d)=>o.sendRequest(Me.string(c)?c:c.method,...d),onRequest:(c,d)=>o.onRequest(Me.string(c)?c:c.method,d),sendNotification:(c,d)=>o.sendNotification(Me.string(c)?c:c.method,d),onNotification:(c,d)=>o.onNotification(Me.string(c)?c:c.method,d),onProgress:o.onProgress,sendProgress:o.sendProgress,trace:(c,d,h)=>{let p={sendNotification:!1,traceFormat:C.TraceFormat.Text};h===void 0?o.trace(c,d,p):(Me.boolean(h),o.trace(c,d,h))},initialize:c=>o.sendRequest(C.InitializeRequest.type,c),shutdown:()=>o.sendRequest(C.ShutdownRequest.type,void 0),exit:()=>o.sendNotification(C.ExitNotification.type),onLogMessage:c=>o.onNotification(C.LogMessageNotification.type,c),onShowMessage:c=>o.onNotification(C.ShowMessageNotification.type,c),onTelemetry:c=>o.onNotification(C.TelemetryEventNotification.type,c),didChangeConfiguration:c=>o.sendNotification(C.DidChangeConfigurationNotification.type,c),didChangeWatchedFiles:c=>o.sendNotification(C.DidChangeWatchedFilesNotification.type,c),didOpenTextDocument:c=>o.sendNotification(C.DidOpenTextDocumentNotification.type,c),didChangeTextDocument:c=>o.sendNotification(C.DidChangeTextDocumentNotification.type,c),didCloseTextDocument:c=>o.sendNotification(C.DidCloseTextDocumentNotification.type,c),didSaveTextDocument:c=>o.sendNotification(C.DidSaveTextDocumentNotification.type,c),onDiagnostics:c=>o.onNotification(C.PublishDiagnosticsNotification.type,c),end:()=>o.end(),dispose:()=>o.dispose()}}var Us;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(Us=Ge.ErrorAction||(Ge.ErrorAction={}));var Yr;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(Yr=Ge.CloseAction||(Ge.CloseAction={}));var vp=class{constructor(e,n){this.name=e,this.maxRestartCount=n,this.restarts=[]}error(e,n,r){return r&&r<=3?Us.Continue:Us.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?Yr.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(K.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),Yr.DoNotRestart):(this.restarts.shift(),Yr.Restart)}},xo;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(xo=Ge.RevealOutputChannelOn||(Ge.RevealOutputChannelOn={}));var Bs;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Bs=Ge.State||(Ge.State={}));var Le;(function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.StartFailed=2]="StartFailed",t[t.Running=3]="Running",t[t.Stopping=4]="Stopping",t[t.Stopped=5]="Stopped"})(Le||(Le={}));var yp=[C.SymbolKind.File,C.SymbolKind.Module,C.SymbolKind.Namespace,C.SymbolKind.Package,C.SymbolKind.Class,C.SymbolKind.Method,C.SymbolKind.Property,C.SymbolKind.Field,C.SymbolKind.Constructor,C.SymbolKind.Enum,C.SymbolKind.Interface,C.SymbolKind.Function,C.SymbolKind.Variable,C.SymbolKind.Constant,C.SymbolKind.String,C.SymbolKind.Number,C.SymbolKind.Boolean,C.SymbolKind.Array,C.SymbolKind.Object,C.SymbolKind.Key,C.SymbolKind.Null,C.SymbolKind.EnumMember,C.SymbolKind.Struct,C.SymbolKind.Event,C.SymbolKind.Operator,C.SymbolKind.TypeParameter],lD=[C.CompletionItemKind.Text,C.CompletionItemKind.Method,C.CompletionItemKind.Function,C.CompletionItemKind.Constructor,C.CompletionItemKind.Field,C.CompletionItemKind.Variable,C.CompletionItemKind.Class,C.CompletionItemKind.Interface,C.CompletionItemKind.Module,C.CompletionItemKind.Property,C.CompletionItemKind.Unit,C.CompletionItemKind.Value,C.CompletionItemKind.Enum,C.CompletionItemKind.Keyword,C.CompletionItemKind.Snippet,C.CompletionItemKind.Color,C.CompletionItemKind.File,C.CompletionItemKind.Reference,C.CompletionItemKind.Folder,C.CompletionItemKind.EnumMember,C.CompletionItemKind.Constant,C.CompletionItemKind.Struct,C.CompletionItemKind.Event,C.CompletionItemKind.Operator,C.CompletionItemKind.TypeParameter],_p=[C.SymbolTag.Deprecated];function J(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Io;(function(t){function e(n){let r=K.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}t.fromConfiguration=e})(Io||(Io={}));var bu;(function(t){function e(n){let r=n;return r&&Me.func(r.register)&&Me.func(r.unregister)&&Me.func(r.dispose)&&r.registrationType!==void 0}t.is=e})(bu||(bu={}));var En=class{constructor(e,n,r,i,s,o){this._client=e,this._event=n,this._type=r,this._middleware=i,this._createParams=s,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,n){for(let r of e)if(K.languages.match(r,n))return!0;return!1}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,n=>this._client.sendNotification(this._type,this._createParams(n))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let n of this._selectors.values())if(K.languages.match(n,e))return{send:r=>{this.callback(r)}}}},wp=class extends En{constructor(e,n){super(e,K.workspace.onDidOpenTextDocument,C.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),En.textDocumentFilter);this._syncedDocuments=n}fillClientCapabilities(e){J(J(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:xe.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return C.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=e.registerOptions.documentSelector;K.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&K.languages.match(n,r)){let s=this._client.clientOptions.middleware,o=a=>{this._client.sendNotification(this._type,this._createParams(a))};s.didOpen?s.didOpen(r,o):o(r),this._syncedDocuments.set(i,r)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},bp=class extends En{constructor(e,n){super(e,K.workspace.onDidCloseTextDocument,C.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,r=>e.code2ProtocolConverter.asCloseTextDocumentParams(r),En.textDocumentFilter);this._syncedDocuments=n}get registrationType(){return C.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){J(J(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:xe.generateUuid(),registerOptions:{documentSelector:n}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let n=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(K.languages.match(n,i)&&!this._selectorFilter(r,i)){let s=this._client.clientOptions.middleware,o=a=>{this._client.sendNotification(this._type,this._createParams(a))};this._syncedDocuments.delete(i.uri.toString()),s.didClose?s.didClose(i,o):o(i)}})}},Rp=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return C.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){J(J(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.change!==void 0&&r.change!==C.TextDocumentSyncKind.None&&this.register({id:xe.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=K.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let n of this._changeData.values())if(K.languages.match(n.documentSelector,e.document)){let r=this._client.clientOptions.middleware;if(n.syncKind===C.TextDocumentSyncKind.Incremental){let i=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);r.didChange?r.didChange(e,()=>this._client.sendNotification(C.DidChangeTextDocumentNotification.type,i)):this._client.sendNotification(C.DidChangeTextDocumentNotification.type,i)}else if(n.syncKind===C.TextDocumentSyncKind.Full){let i=s=>{this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(C.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))})):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new pp.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(C.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))},-1))};r.didChange?r.didChange(e,i):i(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let n of this._changeData.values())if(K.languages.match(n.documentSelector,e))return{send:r=>{this.callback(r)}}}},Cp=class extends En{constructor(e){super(e,K.workspace.onWillSaveTextDocument,C.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,n=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(n),(n,r)=>En.textDocumentFilter(n,r.document))}get registrationType(){return C.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let n=J(J(e,"textDocument"),"synchronization");n.willSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSave&&this.register({id:xe.generateUuid(),registerOptions:{documentSelector:n}})}},Sp=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return C.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let n=J(J(e,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSaveWaitUntil&&this.register({id:xe.generateUuid(),registerOptions:{documentSelector:n}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=K.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(En.textDocumentFilter(this._selectors.values(),e.document)){let n=this._client.clientOptions.middleware,r=i=>this._client.sendRequest(C.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(s=>{let o=this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},Pp=class extends En{constructor(e){super(e,K.workspace.onDidSaveTextDocument,C.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,n=>e.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),En.textDocumentFilter);this._includeText=!1}get registrationType(){return C.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){J(J(e,"textDocument"),"synchronization").didSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;if(n&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:xe.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},Dp=class{constructor(e,n){this._client=e,this._notifyFileEvent=n,this._watchers=new Map}get registrationType(){return C.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){J(J(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,n){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let n=[];for(let r of e.registerOptions.watchers){if(!Me.string(r.globPattern))continue;let i=!0,s=!0,o=!0;r.kind!==void 0&&r.kind!==null&&(i=(r.kind&C.WatchKind.Create)!=0,s=(r.kind&C.WatchKind.Change)!=0,o=(r.kind&C.WatchKind.Delete)!=0);let a=K.workspace.createFileSystemWatcher(r.globPattern,!i,!s,!o);this.hookListeners(a,i,s,o),n.push(a)}this._watchers.set(e.id,n)}registerRaw(e,n){let r=[];for(let i of n)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,n,r,i,s){n&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:C.FileChangeType.Created}),null,s),r&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:C.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:C.FileChangeType.Deleted}),null,s)}unregister(e){let n=this._watchers.get(e);if(n)for(let r of n)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let n of e)n.dispose()}),this._watchers.clear()}},gt=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],data:e,provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,n){if(n){if(C.TextDocumentRegistrationOptions.is(n)){let r=C.StaticRegistrationOptions.hasId(n)?n.id:xe.generateUuid(),i=n.documentSelector||e;if(i)return[r,Object.assign({},n,{documentSelector:i})]}else if(Me.boolean(n)&&n===!0||C.WorkDoneProgressOptions.is(n)){if(!e)return[void 0,void 0];let r=Me.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e});return[xe.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,n){if(!(!e||!n))return Me.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e})}getProvider(e){for(let n of this._registrations.values()){let r=n.data.registerOptions.documentSelector;if(r!==null&&K.languages.match(r,e))return n.provider}}getAllProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};Ge.TextDocumentFeature=gt;var Tp=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}},qp=class extends gt{constructor(e){super(e,C.CompletionRequest.type)}fillClientCapabilities(e){let n=J(J(e,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[C.MarkupKind.Markdown,C.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[C.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[C.InsertTextMode.asIs,C.InsertTextMode.adjustIndentation]}},n.completionItemKind={valueSet:lD}}initialize(e,n){let r=this.getRegistrationOptions(n,e.completionProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.triggerCharacters||[],r={provideCompletionItems:(i,s,o,a)=>{let c=this._client,d=this._client.clientOptions.middleware,h=(p,m,v,O)=>c.sendRequest(C.CompletionRequest.type,c.code2ProtocolConverter.asCompletionParams(p,m,v),O).then(c.protocol2CodeConverter.asCompletionResult,F=>c.handleFailedRequest(C.CompletionRequest.type,F,null));return d.provideCompletionItem?d.provideCompletionItem(i,s,a,o,h):h(i,s,a,o)},resolveCompletionItem:e.resolveProvider?(i,s)=>{let o=this._client,a=this._client.clientOptions.middleware,c=(d,h)=>o.sendRequest(C.CompletionResolveRequest.type,o.code2ProtocolConverter.asCompletionItem(d),h).then(o.protocol2CodeConverter.asCompletionItem,p=>o.handleFailedRequest(C.CompletionResolveRequest.type,p,d));return a.resolveCompletionItem?a.resolveCompletionItem(i,s,c):c(i,s)}:void 0};return[K.languages.registerCompletionItemProvider(e.documentSelector,r,...n),r]}},Ep=class extends gt{constructor(e){super(e,C.HoverRequest.type)}fillClientCapabilities(e){let n=J(J(e,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[C.MarkupKind.Markdown,C.MarkupKind.PlainText]}initialize(e,n){let r=this.getRegistrationOptions(n,e.hoverProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideHover:(r,i,s)=>{let o=this._client,a=(d,h,p)=>o.sendRequest(C.HoverRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(o.protocol2CodeConverter.asHover,m=>o.handleFailedRequest(C.HoverRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideHover?c.provideHover(r,i,s,a):a(r,i,s)}};return[K.languages.registerHoverProvider(e.documentSelector,n),n]}},Op=class extends gt{constructor(e){super(e,C.SignatureHelpRequest.type)}fillClientCapabilities(e){let n=J(J(e,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[C.MarkupKind.Markdown,C.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.signatureHelpProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideSignatureHelp:(i,s,o,a)=>{let c=this._client,d=(p,m,v,O)=>c.sendRequest(C.SignatureHelpRequest.type,c.code2ProtocolConverter.asSignatureHelpParams(p,m,v),O).then(c.protocol2CodeConverter.asSignatureHelp,F=>c.handleFailedRequest(C.SignatureHelpRequest.type,F,null)),h=c.clientOptions.middleware;return h.provideSignatureHelp?h.provideSignatureHelp(i,s,a,o,d):d(i,s,a,o)}},r;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];r=K.languages.registerSignatureHelpProvider(e.documentSelector,n,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};r=K.languages.registerSignatureHelpProvider(e.documentSelector,n,i)}return[r,n]}},Fp=class extends gt{constructor(e){super(e,C.DefinitionRequest.type)}fillClientCapabilities(e){let n=J(J(e,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.definitionProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDefinition:(r,i,s)=>{let o=this._client,a=(d,h,p)=>o.sendRequest(C.DefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(o.protocol2CodeConverter.asDefinitionResult,m=>o.handleFailedRequest(C.DefinitionRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideDefinition?c.provideDefinition(r,i,s,a):a(r,i,s)}};return[K.languages.registerDefinitionProvider(e.documentSelector,n),n]}},kp=class extends gt{constructor(e){super(e,C.ReferencesRequest.type)}fillClientCapabilities(e){J(J(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.referencesProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideReferences:(r,i,s,o)=>{let a=this._client,c=(h,p,m,v)=>a.sendRequest(C.ReferencesRequest.type,a.code2ProtocolConverter.asReferenceParams(h,p,m),v).then(a.protocol2CodeConverter.asReferences,O=>a.handleFailedRequest(C.ReferencesRequest.type,O,null)),d=a.clientOptions.middleware;return d.provideReferences?d.provideReferences(r,i,s,o,c):c(r,i,s,o)}};return[K.languages.registerReferenceProvider(e.documentSelector,n),n]}},Mp=class extends gt{constructor(e){super(e,C.DocumentHighlightRequest.type)}fillClientCapabilities(e){J(J(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentHighlightProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentHighlights:(r,i,s)=>{let o=this._client,a=(d,h,p)=>o.sendRequest(C.DocumentHighlightRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(o.protocol2CodeConverter.asDocumentHighlights,m=>o.handleFailedRequest(C.DocumentHighlightRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideDocumentHighlights?c.provideDocumentHighlights(r,i,s,a):a(r,i,s)}};return[K.languages.registerDocumentHighlightProvider(e.documentSelector,n),n]}},xp=class extends gt{constructor(e){super(e,C.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=J(J(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:yp},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:_p},n.labelSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentSymbolProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentSymbols:(i,s)=>{let o=this._client,a=(d,h)=>o.sendRequest(C.DocumentSymbolRequest.type,o.code2ProtocolConverter.asDocumentSymbolParams(d),h).then(p=>{if(p!==null){if(p.length===0)return[];{let m=p[0];return C.DocumentSymbol.is(m)?o.protocol2CodeConverter.asDocumentSymbols(p):o.protocol2CodeConverter.asSymbolInformations(p)}}},p=>o.handleFailedRequest(C.DocumentSymbolRequest.type,p,null)),c=o.clientOptions.middleware;return c.provideDocumentSymbols?c.provideDocumentSymbols(i,s,a):a(i,s)}},r=e.label!==void 0?{label:e.label}:void 0;return[K.languages.registerDocumentSymbolProvider(e.documentSelector,n,r),n]}},Ip=class extends Tp{constructor(e){super(e,C.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let n=J(J(e,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:yp},n.tagSupport={valueSet:_p}}initialize(e){!e.workspaceSymbolProvider||this.register({id:xe.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let n={provideWorkspaceSymbols:(r,i)=>{let s=this._client,o=(c,d)=>s.sendRequest(C.WorkspaceSymbolRequest.type,{query:c},d).then(s.protocol2CodeConverter.asSymbolInformations,h=>s.handleFailedRequest(C.WorkspaceSymbolRequest.type,h,null)),a=s.clientOptions.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,o):o(r,i)}};return[K.languages.registerWorkspaceSymbolProvider(n),n]}},Np=class extends gt{constructor(e){super(e,C.CodeActionRequest.type)}fillClientCapabilities(e){let n=J(J(e,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[C.CodeActionKind.Empty,C.CodeActionKind.QuickFix,C.CodeActionKind.Refactor,C.CodeActionKind.RefactorExtract,C.CodeActionKind.RefactorInline,C.CodeActionKind.RefactorRewrite,C.CodeActionKind.Source,C.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(e,n){let r=this.getRegistrationOptions(n,e.codeActionProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideCodeActions:(r,i,s,o)=>{let a=this._client,c=(h,p,m,v)=>{let O={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h),range:a.code2ProtocolConverter.asRange(p),context:a.code2ProtocolConverter.asCodeActionContext(m)};return a.sendRequest(C.CodeActionRequest.type,O,v).then(F=>{if(F===null)return;let N=[];for(let b of F)C.Command.is(b)?N.push(a.protocol2CodeConverter.asCommand(b)):N.push(a.protocol2CodeConverter.asCodeAction(b));return N},F=>a.handleFailedRequest(C.CodeActionRequest.type,F,null))},d=a.clientOptions.middleware;return d.provideCodeActions?d.provideCodeActions(r,i,s,o,c):c(r,i,s,o)},resolveCodeAction:e.resolveProvider?(r,i)=>{let s=this._client,o=this._client.clientOptions.middleware,a=(c,d)=>s.sendRequest(C.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeAction(c),d).then(s.protocol2CodeConverter.asCodeAction,h=>s.handleFailedRequest(C.CodeActionResolveRequest.type,h,c));return o.resolveCodeAction?o.resolveCodeAction(r,i,a):a(r,i)}:void 0};return[K.languages.registerCodeActionsProvider(e.documentSelector,n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}},Ap=class extends gt{constructor(e){super(e,C.CodeLensRequest.type)}fillClientCapabilities(e){J(J(e,"textDocument"),"codeLens").dynamicRegistration=!0,J(J(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,n){this._client.onRequest(C.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(n,e.codeLensProvider);!i||this.register({id:xe.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=new K.EventEmitter,r={onDidChangeCodeLenses:n.event,provideCodeLenses:(i,s)=>{let o=this._client,a=(d,h)=>o.sendRequest(C.CodeLensRequest.type,o.code2ProtocolConverter.asCodeLensParams(d),h).then(o.protocol2CodeConverter.asCodeLenses,p=>o.handleFailedRequest(C.CodeLensRequest.type,p,null)),c=o.clientOptions.middleware;return c.provideCodeLenses?c.provideCodeLenses(i,s,a):a(i,s)},resolveCodeLens:e.resolveProvider?(i,s)=>{let o=this._client,a=(d,h)=>o.sendRequest(C.CodeLensResolveRequest.type,o.code2ProtocolConverter.asCodeLens(d),h).then(o.protocol2CodeConverter.asCodeLens,p=>o.handleFailedRequest(C.CodeLensResolveRequest.type,p,d)),c=o.clientOptions.middleware;return c.resolveCodeLens?c.resolveCodeLens(i,s,a):a(i,s)}:void 0};return[K.languages.registerCodeLensProvider(e.documentSelector,r),{provider:r,onDidChangeCodeLensEmitter:n}]}},Lp=class extends gt{constructor(e){super(e,C.DocumentFormattingRequest.type)}fillClientCapabilities(e){J(J(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentFormattingProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentFormattingEdits:(r,i,s)=>{let o=this._client,a=(d,h,p)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(d),options:o.code2ProtocolConverter.asFormattingOptions(h,Io.fromConfiguration(d))};return o.sendRequest(C.DocumentFormattingRequest.type,m,p).then(o.protocol2CodeConverter.asTextEdits,v=>o.handleFailedRequest(C.DocumentFormattingRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideDocumentFormattingEdits?c.provideDocumentFormattingEdits(r,i,s,a):a(r,i,s)}};return[K.languages.registerDocumentFormattingEditProvider(e.documentSelector,n),n]}},jp=class extends gt{constructor(e){super(e,C.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){J(J(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentRangeFormattingProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentRangeFormattingEdits:(r,i,s,o)=>{let a=this._client,c=(h,p,m,v)=>{let O={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h),range:a.code2ProtocolConverter.asRange(p),options:a.code2ProtocolConverter.asFormattingOptions(m,Io.fromConfiguration(h))};return a.sendRequest(C.DocumentRangeFormattingRequest.type,O,v).then(a.protocol2CodeConverter.asTextEdits,F=>a.handleFailedRequest(C.DocumentRangeFormattingRequest.type,F,null))},d=a.clientOptions.middleware;return d.provideDocumentRangeFormattingEdits?d.provideDocumentRangeFormattingEdits(r,i,s,o,c):c(r,i,s,o)}};return[K.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,n),n]}},Wp=class extends gt{constructor(e){super(e,C.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){J(J(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentOnTypeFormattingProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideOnTypeFormattingEdits:(i,s,o,a,c)=>{let d=this._client,h=(m,v,O,F,N)=>{let b={textDocument:d.code2ProtocolConverter.asTextDocumentIdentifier(m),position:d.code2ProtocolConverter.asPosition(v),ch:O,options:d.code2ProtocolConverter.asFormattingOptions(F,Io.fromConfiguration(m))};return d.sendRequest(C.DocumentOnTypeFormattingRequest.type,b,N).then(d.protocol2CodeConverter.asTextEdits,w=>d.handleFailedRequest(C.DocumentOnTypeFormattingRequest.type,w,null))},p=d.clientOptions.middleware;return p.provideOnTypeFormattingEdits?p.provideOnTypeFormattingEdits(i,s,o,a,c,h):h(i,s,o,a,c)}},r=e.moreTriggerCharacter||[];return[K.languages.registerOnTypeFormattingEditProvider(e.documentSelector,n,e.firstTriggerCharacter,...r),n]}},$p=class extends gt{constructor(e){super(e,C.RenameRequest.type)}fillClientCapabilities(e){let n=J(J(e,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=C.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.renameProvider);!r||(Me.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:xe.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let n={provideRenameEdits:(r,i,s,o)=>{let a=this._client,c=(h,p,m,v)=>{let O={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h),position:a.code2ProtocolConverter.asPosition(p),newName:m};return a.sendRequest(C.RenameRequest.type,O,v).then(a.protocol2CodeConverter.asWorkspaceEdit,F=>a.handleFailedRequest(C.RenameRequest.type,F,null))},d=a.clientOptions.middleware;return d.provideRenameEdits?d.provideRenameEdits(r,i,s,o,c):c(r,i,s,o)},prepareRename:e.prepareProvider?(r,i,s)=>{let o=this._client,a=(d,h,p)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(d),position:o.code2ProtocolConverter.asPosition(h)};return o.sendRequest(C.PrepareRenameRequest.type,m,p).then(v=>C.Range.is(v)?o.protocol2CodeConverter.asRange(v):this.isDefaultBehavior(v)?v.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):v&&C.Range.is(v.range)?{range:o.protocol2CodeConverter.asRange(v.range),placeholder:v.placeholder}:Promise.reject(new Error("The element can't be renamed.")),v=>o.handleFailedRequest(C.PrepareRenameRequest.type,v,void 0))},c=o.clientOptions.middleware;return c.prepareRename?c.prepareRename(r,i,s,a):a(r,i,s)}:void 0};return[K.languages.registerRenameProvider(e.documentSelector,n),n]}isDefaultBehavior(e){let n=e;return n&&Me.boolean(n.defaultBehavior)}},Hp=class extends gt{constructor(e){super(e,C.DocumentLinkRequest.type)}fillClientCapabilities(e){let n=J(J(e,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentLinkProvider);!r||this.register({id:xe.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentLinks:(r,i)=>{let s=this._client,o=(c,d)=>s.sendRequest(C.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(c),d).then(s.protocol2CodeConverter.asDocumentLinks,h=>s.handleFailedRequest(C.DocumentLinkRequest.type,h,null)),a=s.clientOptions.middleware;return a.provideDocumentLinks?a.provideDocumentLinks(r,i,o):o(r,i)},resolveDocumentLink:e.resolveProvider?(r,i)=>{let s=this._client,o=(c,d)=>s.sendRequest(C.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(c),d).then(s.protocol2CodeConverter.asDocumentLink,h=>s.handleFailedRequest(C.DocumentLinkResolveRequest.type,h,c)),a=s.clientOptions.middleware;return a.resolveDocumentLink?a.resolveDocumentLink(r,i,o):o(r,i)}:void 0};return[K.languages.registerDocumentLinkProvider(e.documentSelector,n),n]}},zp=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return C.DidChangeConfigurationNotification.type}fillClientCapabilities(e){J(J(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register({id:xe.generateUuid(),registerOptions:{section:e}})}register(e){let n=K.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,n),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let n=this._listeners.get(e);n&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,n){let r;if(Me.string(e)?r=[e]:r=e,r!==void 0&&n!==void 0&&!r.some(a=>n.affectsConfiguration(a)))return;let i=o=>{if(o===void 0){this._client.sendNotification(C.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(C.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)})},s=this.getMiddleware();s?s(r,i):i(r)}extractSettingsInformation(e){function n(s,o){let a=s;for(let c=0;c<o.length-1;c++){let d=a[o[c]];d||(d=Object.create(null),a[o[c]]=d),a=d}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),c=null;if(a>=0?c=K.workspace.getConfiguration(o.substr(0,a),r).get(o.substr(a+1)):c=K.workspace.getConfiguration(void 0,r).get(o),c){let d=e[s].split(".");n(i,d)[d[d.length-1]]=oD.toJSONObject(c)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},Kp=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return C.ExecuteCommandRequest.type}fillClientCapabilities(e){J(J(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:xe.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let n=this._client,r=n.clientOptions.middleware,i=(s,o)=>{let a={command:s,arguments:o};return n.sendRequest(C.ExecuteCommandRequest.type,a).then(void 0,c=>n.handleFailedRequest(C.ExecuteCommandRequest.type,c,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(K.commands.registerCommand(o,(...a)=>r.executeCommand?r.executeCommand(o,a,i):i(o,a)));this._commands.set(e.id,s)}}unregister(e){let n=this._commands.get(e);n&&n.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(n=>n.dispose())}),this._commands.clear()}},dD;(function(t){function e(n){return n&&C.MessageReader.is(n.reader)&&C.MessageWriter.is(n.writer)}t.is=e})(dD=Ge.MessageTransports||(Ge.MessageTransports={}));var Ru=class{constructor(e,n){this._resolve=e,this._reject=n,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Pi=class{constructor(e,n,r){var i;this._traceFormat=C.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=n,r=r||{};let s={isTrusted:!1};r.markdown!==void 0&&r.markdown.isTrusted===!0&&(s.isTrusted=!0),this._clientOptions={documentSelector:r.documentSelector||[],synchronize:r.synchronize||{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName||this._name,revealOutputChannelOn:r.revealOutputChannelOn||xo.Error,stdioEncoding:r.stdioEncoding||"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler||this.createDefaultErrorHandler((i=r.connectionOptions)===null||i===void 0?void 0:i.maxRestartCount),middleware:r.middleware||{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:s},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Le.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new pp.Delayer(250),this._onReady=new Promise((o,a)=>{this._onReadyCallbacks=new Ru(o,a)}),this._onStop=void 0,this._telemetryEmitter=new C.Emitter,this._stateChangeEmitter=new C.Emitter,this._trace=C.Trace.Off,this._tracer={log:(o,a)=>{Me.string(o)?this.logTrace(o,a):this.logObjectTrace(o)}},this._c2p=sD.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=aD.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let n=this.getPublicState();this._state=e;let r=this.getPublicState();r!==n&&this._stateChangeEmitter.fire({oldState:n,newState:r})}getPublicState(){return this.state===Le.Running?Bs.Running:this.state===Le.Starting?Bs.Starting:Bs.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...n)}catch(r){throw this.error(`Sending request ${Me.string(e)?e:e.method} failed.`,r),r}}onRequest(e,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(e,n)}catch(r){throw this.error(`Registering request handler ${Me.string(e)?e:e.method} failed.`,r),r}}sendNotification(e,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,n)}catch(r){throw this.error(`Sending notification ${Me.string(e)?e:e.method} failed.`,r),r}}onNotification(e,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(e,n)}catch(r){throw this.error(`Registering notification handler ${Me.string(e)?e:e.method} failed.`,r),r}}onProgress(e,n,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(C.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,n,s=>{i(n,s,()=>r(s))})}return this._resolvedConnection.onProgress(e,n,r)}catch(i){throw this.error(`Registering progress handler for token ${n} failed.`,i),i}}sendProgress(e,n,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,n,r)}catch(i){throw this.error(`Sending progress for token ${n} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=K.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new vp(this._name,e??4)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(n=>{n.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof C.ResponseError){let n=e;return`  Message: ${n.message}
  Code: ${n.code} ${n.data?`
`+n.data.toString():""}`}return e instanceof Error?Me.string(e.stack)?e.stack:e.message:Me.string(e)?e:e.toString()}info(e,n,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=xo.Info&&this.showNotificationMessage()}warn(e,n,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=xo.Warn&&this.showNotificationMessage()}error(e,n,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=xo.Error&&this.showNotificationMessage()}showNotificationMessage(){K.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,n){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.traceOutputChannel.appendLine(this.data2String(n))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===Le.Initial||this.state===Le.Stopping||this.state===Le.Stopped}needsStop(){return this.state===Le.Starting||this.state===Le.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===Le.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,n)=>{this._onReadyCallbacks=new Ru(e,n)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?K.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):K.languages.createDiagnosticCollection()),this.state=Le.Starting,this.resolveConnection().then(e=>(e.onLogMessage(n=>{switch(n.type){case C.MessageType.Error:this.error(n.message,void 0,!1);break;case C.MessageType.Warning:this.warn(n.message,void 0,!1);break;case C.MessageType.Info:this.info(n.message,void 0,!1);break;default:this.outputChannel.appendLine(n.message)}}),e.onShowMessage(n=>{switch(n.type){case C.MessageType.Error:K.window.showErrorMessage(n.message);break;case C.MessageType.Warning:K.window.showWarningMessage(n.message);break;case C.MessageType.Info:K.window.showInformationMessage(n.message);break;default:K.window.showInformationMessage(n.message)}}),e.onRequest(C.ShowMessageRequest.type,n=>{let r;switch(n.type){case C.MessageType.Error:r=K.window.showErrorMessage;break;case C.MessageType.Warning:r=K.window.showWarningMessage;break;case C.MessageType.Info:r=K.window.showInformationMessage;break;default:r=K.window.showInformationMessage}let i=n.actions||[];return r(n.message,...i)}),e.onTelemetry(n=>{this._telemetryEmitter.fire(n)}),e.onRequest(C.ShowDocumentRequest.type,async n=>{var r;let i=async o=>{let a=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await K.env.openExternal(a)};{let c={};return o.selection!==void 0&&(c.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?c.preserveFocus=!0:o.takeFocus===!0&&(c.preserveFocus=!1),await K.window.showTextDocument(a,c),{success:!0}}}catch{return{success:!0}}},s=(r=this._clientOptions.middleware.window)===null||r===void 0?void 0:r.showDocument;return s!==void 0?s(n,i):i(n)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=Le.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),K.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new K.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let n=this._clientOptions.initializationOptions,r=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:K.env.appName,version:K.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(K.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Me.func(n)?n():n,trace:C.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let s=xe.generateUuid(),o=new cD.ProgressPart(e,s);return i.workDoneToken=s,this.doInitialize(e,i).then(a=>(o.done(),a),a=>{throw o.cancel(),a})}else return this.doInitialize(e,i)}doInitialize(e,n){return e.initialize(n).then(r=>{this._resolvedConnection=e,this._initializeResult=r,this.state=Le.Running;let i;return Me.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===C.TextDocumentSyncKind.None?i={openClose:!1,change:C.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(s=>this.handleDiagnostics(s)),e.onRequest(C.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(C.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(C.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s)),e.sendNotification(C.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r}).then(void 0,r=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof C.ResponseError&&r.data&&r.data.retry?K.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&&r.message&&K.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=K.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===Le.Stopping&&this._onStop?this._onStop:(this.state=Le.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.end(),e.dispose(),this.state=Le.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=Le.Stopped,Promise.resolve())}cleanUp(e=!0,n=!0){this._listeners&&(this._listeners.forEach(r=>r.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(r=>r.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let r of this._features.values())r.dispose();e&&this.cleanUpChannel(),n&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var n;let r=this;function i(o){r._fileEvents.push(o),r._fileEventDelayer.trigger(()=>{r.onReady().then(()=>{r.resolveConnection().then(a=>{r.isConnectionActive()&&(r.forceDocumentSync(),a.didChangeWatchedFiles({changes:r._fileEvents})),r._fileEvents=[]})},a=>{r.error("Notify file events failed.",a)})})}let s=(n=this.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;(s==null?void 0:s.didChangeWatchedFile)?s.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(C.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let n=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(n,r,(s,o)=>this.setDiagnostics(s,o)):this.setDiagnostics(n,r)}setDiagnostics(e,n){!this._diagnostics||this._diagnostics.set(e,n)}createConnection(){let e=(r,i,s)=>{this.handleConnectionError(r,i,s)},n=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(r=>uD(r.reader,r.writer,e,n,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===Le.Stopping||this.state===Le.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=Yr.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===Yr.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===Le.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=Le.StartFailed):this.state=Le.Stopped,this.cleanUp(!1,!0)):e===Yr.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=Le.Initial,this.start())}handleConnectionError(e,n,r){this._clientOptions.errorHandler.error(e,n,r)===Us.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){K.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,n=!1){let r=K.workspace.getConfiguration(this._id),i=C.Trace.Off,s=C.TraceFormat.Text;if(r){let o=r.get("trace.server","off");typeof o=="string"?i=C.Trace.fromString(o):(i=C.Trace.fromString(r.get("trace.server.verbosity","off")),s=C.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:n,traceFormat:this._traceFormat})}hookFileEvents(e){let n=this._clientOptions.synchronize.fileEvents;if(!n)return;let r;Me.array(n)?r=n:r=[n],!!r&&this._dynamicFeatures.get(C.DidChangeWatchedFilesNotification.type.method).registerRaw(xe.generateUuid(),r)}registerFeatures(e){for(let n of e)this.registerFeature(n)}registerFeature(e){if(this._features.push(e),bu.is(e)){let n=e.registrationType;this._dynamicFeatures.set(n.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new zp(this)),this.registerFeature(new wp(this,this._syncedDocuments)),this.registerFeature(new Rp(this)),this.registerFeature(new Cp(this)),this.registerFeature(new Sp(this)),this.registerFeature(new Pp(this)),this.registerFeature(new bp(this,this._syncedDocuments)),this.registerFeature(new Dp(this,e=>this.notifyFileEvent(e))),this.registerFeature(new qp(this)),this.registerFeature(new Ep(this)),this.registerFeature(new Op(this)),this.registerFeature(new Fp(this)),this.registerFeature(new kp(this)),this.registerFeature(new Mp(this)),this.registerFeature(new xp(this)),this.registerFeature(new Ip(this)),this.registerFeature(new Np(this)),this.registerFeature(new Ap(this)),this.registerFeature(new Lp(this)),this.registerFeature(new jp(this)),this.registerFeature(new Wp(this)),this.registerFeature(new $p(this)),this.registerFeature(new Hp(this)),this.registerFeature(new Kp(this))}fillInitializeParams(e){for(let n of this._features)Me.func(n.fillInitializeParams)&&n.fillInitializeParams(e)}computeClientCapabilities(){let e={};J(e,"workspace").applyEdit=!0;let n=J(J(e,"workspace"),"workspaceEdit");n.documentChanges=!0,n.resourceOperations=[C.ResourceOperationKind.Create,C.ResourceOperationKind.Rename,C.ResourceOperationKind.Delete],n.failureHandling=C.FailureHandlingKind.TextOnlyTransactional,n.normalizesLineEndings=!0,n.changeAnnotationSupport={groupsOnLabel:!0};let r=J(J(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[C.DiagnosticTag.Unnecessary,C.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=J(e,"window"),s=J(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=J(i,"showDocument");o.support=!0;let a=J(e,"general");a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"};for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let n=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,n)}handleRegistrationRequest(e){return new Promise((n,r)=>{for(let i of e.registrations){let s=this._dynamicFeatures.get(i.method);if(s===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let o=i.registerOptions||{};o.documentSelector=o.documentSelector||this._clientOptions.documentSelector;let a={id:i.id,registerOptions:o};try{s.register(a)}catch(c){r(c);return}}n()})}handleUnregistrationRequest(e){return new Promise((n,r)=>{for(let i of e.unregisterations){let s=this._dynamicFeatures.get(i.method);if(!s){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}s.unregister(i.id)}n()})}handleApplyWorkspaceEdit(e){let n=e.edit,r=new Map;K.workspace.textDocuments.forEach(s=>r.set(s.uri.toString(),s));let i=!1;if(n.documentChanges){for(let s of n.documentChanges)if(C.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let o=r.get(s.textDocument.uri);if(o&&o.version!==s.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):Me.asPromise(K.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(s=>({applied:s})))}handleFailedRequest(e,n,r){if(n instanceof C.ResponseError){if(n.code===C.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(n.code===C.LSPErrorCodes.ContentModified)return r}throw this.error(`Request ${e.method} failed.`,n),n}makeCancelError(){let e=new Error(Pi.Canceled);return e.name=Pi.Canceled,e}};Ge.BaseLanguageClient=Pi;Pi.Canceled="Canceled"});var Gp=T(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.ColorProviderFeature=void 0;var Gs=require("vscode"),No=ie(),fD=At();function Up(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Bp=class extends fD.TextDocumentFeature{constructor(e){super(e,No.DocumentColorRequest.type)}fillClientCapabilities(e){Up(Up(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideColorPresentations:(r,i,s)=>{let o=this._client,a=(d,h,p)=>{let m={color:d,textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(h.document),range:o.code2ProtocolConverter.asRange(h.range)};return o.sendRequest(No.ColorPresentationRequest.type,m,p).then(this.asColorPresentations.bind(this),v=>o.handleFailedRequest(No.ColorPresentationRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideColorPresentations?c.provideColorPresentations(r,i,s,a):a(r,i,s)},provideDocumentColors:(r,i)=>{let s=this._client,o=(c,d)=>{let h={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(c)};return s.sendRequest(No.DocumentColorRequest.type,h,d).then(this.asColorInformations.bind(this),p=>s.handleFailedRequest(No.ColorPresentationRequest.type,p,null))},a=s.clientOptions.middleware;return a.provideDocumentColors?a.provideDocumentColors(r,i,o):o(r,i)}};return[Gs.languages.registerColorProvider(e.documentSelector,n),n]}asColor(e){return new Gs.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(n=>new Gs.ColorInformation(this._client.protocol2CodeConverter.asRange(n.range),this.asColor(n.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(n=>{let r=new Gs.ColorPresentation(n.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(n.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(n.textEdit),r}):[]}};Xs.ColorProviderFeature=Bp});var Jp=T(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.ImplementationFeature=void 0;var hD=require("vscode"),Cu=ie(),gD=At();function Xp(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Vp=class extends gD.TextDocumentFeature{constructor(e){super(e,Cu.ImplementationRequest.type)}fillClientCapabilities(e){let n=Xp(Xp(e,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideImplementation:(r,i,s)=>{let o=this._client,a=(d,h,p)=>o.sendRequest(Cu.ImplementationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(o.protocol2CodeConverter.asDefinitionResult,m=>o.handleFailedRequest(Cu.ImplementationRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideImplementation?c.provideImplementation(r,i,s,a):a(r,i,s)}};return[hD.languages.registerImplementationProvider(e.documentSelector,n),n]}};Vs.ImplementationFeature=Vp});var Yp=T(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.TypeDefinitionFeature=void 0;var pD=require("vscode"),Su=ie(),mD=At();function Js(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Qp=class extends mD.TextDocumentFeature{constructor(e){super(e,Su.TypeDefinitionRequest.type)}fillClientCapabilities(e){Js(Js(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=Js(Js(e,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideTypeDefinition:(r,i,s)=>{let o=this._client,a=(d,h,p)=>o.sendRequest(Su.TypeDefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(o.protocol2CodeConverter.asDefinitionResult,m=>o.handleFailedRequest(Su.TypeDefinitionRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideTypeDefinition?c.provideTypeDefinition(r,i,s,a):a(r,i,s)}};return[pD.languages.registerTypeDefinitionProvider(e.documentSelector,n),n]}};Qs.TypeDefinitionFeature=Qp});var em=T(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.WorkspaceFoldersFeature=Di.arrayDiff=void 0;var vD=zs(),Ys=require("vscode"),Pu=ie();function Du(t,e){if(t!==void 0)return t[e]}function Tu(t,e){return t.filter(n=>e.indexOf(n)<0)}Di.arrayDiff=Tu;var Zp=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return Pu.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let n=Ys.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?e.workspaceFolders=null:e.workspaceFolders=n.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let n=this._client;n.onRequest(Pu.WorkspaceFoldersRequest.type,s=>{let o=()=>{let c=Ys.workspace.workspaceFolders;return c===void 0?null:c.map(h=>this.asProtocol(h))},a=n.clientOptions.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let r=Du(Du(Du(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=vD.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let n=Tu(this._initialFolders,e),r=Tu(e,this._initialFolders);(r.length>0||n.length>0)&&this.doSendEvent(r,n)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,n){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:n.map(i=>this.asProtocol(i))}};this._client.sendNotification(Pu.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let n=e.id,r=this._client,i=Ys.workspace.onDidChangeWorkspaceFolders(s=>{let o=c=>{this.doSendEvent(c.added,c.removed)},a=r.clientOptions.middleware.workspace;a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)});this._listeners.set(n,i),this.sendInitialEvent(Ys.workspace.workspaceFolders)}unregister(e){let n=this._listeners.get(e);n!==void 0&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Di.WorkspaceFoldersFeature=Zp});var nm=T(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.FoldingRangeFeature=void 0;var Ao=require("vscode"),Ti=ie(),yD=At();function tm(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Lo=class extends yD.TextDocumentFeature{constructor(e){super(e,Ti.FoldingRangeRequest.type)}fillClientCapabilities(e){let n=tm(tm(e,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideFoldingRanges:(r,i,s)=>{let o=this._client,a=(d,h,p)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(d)};return o.sendRequest(Ti.FoldingRangeRequest.type,m,p).then(Lo.asFoldingRanges,v=>o.handleFailedRequest(Ti.FoldingRangeRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideFoldingRanges?c.provideFoldingRanges(r,i,s,a):a(r,i,s)}};return[Ao.languages.registerFoldingRangeProvider(e.documentSelector,n),n]}static asFoldingRangeKind(e){if(e)switch(e){case Ti.FoldingRangeKind.Comment:return Ao.FoldingRangeKind.Comment;case Ti.FoldingRangeKind.Imports:return Ao.FoldingRangeKind.Imports;case Ti.FoldingRangeKind.Region:return Ao.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(n=>new Ao.FoldingRange(n.startLine,n.endLine,Lo.asFoldingRangeKind(n.kind))):[]}};Zs.FoldingRangeFeature=Lo});var om=T(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.DeclarationFeature=void 0;var _D=require("vscode"),qu=ie(),wD=At();function rm(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var im=class extends wD.TextDocumentFeature{constructor(e){super(e,qu.DeclarationRequest.type)}fillClientCapabilities(e){let n=rm(rm(e,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideDeclaration:(r,i,s)=>{let o=this._client,a=(d,h,p)=>o.sendRequest(qu.DeclarationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(o.protocol2CodeConverter.asDeclarationResult,m=>o.handleFailedRequest(qu.DeclarationRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideDeclaration?c.provideDeclaration(r,i,s,a):a(r,i,s)}};return[_D.languages.registerDeclarationProvider(e.documentSelector,n),n]}};ea.DeclarationFeature=im});var cm=T(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.SelectionRangeFeature=void 0;var bD=require("vscode"),Eu=ie(),RD=At();function sm(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var am=class extends RD.TextDocumentFeature{constructor(e){super(e,Eu.SelectionRangeRequest.type)}fillClientCapabilities(e){let n=sm(sm(e,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideSelectionRanges:(r,i,s)=>{let o=this._client,a=(d,h,p)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(d),positions:o.code2ProtocolConverter.asPositions(h)};return o.sendRequest(Eu.SelectionRangeRequest.type,m,p).then(v=>o.protocol2CodeConverter.asSelectionRanges(v),v=>o.handleFailedRequest(Eu.SelectionRangeRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideSelectionRanges?c.provideSelectionRanges(r,i,s,a):a(r,i,s)}};return[bD.languages.registerSelectionRangeProvider(e.documentSelector,n),n]}};ta.SelectionRangeFeature=am});var lm=T(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.ProgressFeature=void 0;var CD=ie(),SD=wu();function PD(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var um=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){PD(e,"window").workDoneProgress=!0}initialize(){let e=this._client,n=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new SD.ProgressPart(this._client,i.token,n))};e.onRequest(CD.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};na.ProgressFeature=um});var gm=T(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.CallHierarchyFeature=void 0;var DD=require("vscode"),Zr=ie(),TD=At();function dm(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var fm=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,n,r){let i=this.client,s=this.middleware,o=(a,c,d)=>{let h=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(Zr.CallHierarchyPrepareRequest.type,h,d).then(p=>i.protocol2CodeConverter.asCallHierarchyItems(p),p=>i.handleFailedRequest(Zr.CallHierarchyPrepareRequest.type,p,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,n,r,o):o(e,n,r)}provideCallHierarchyIncomingCalls(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(Zr.CallHierarchyIncomingCallsRequest.type,c,a).then(d=>r.protocol2CodeConverter.asCallHierarchyIncomingCalls(d),d=>r.handleFailedRequest(Zr.CallHierarchyIncomingCallsRequest.type,d,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,n,s):s(e,n)}provideCallHierarchyOutgoingCalls(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(Zr.CallHierarchyOutgoingCallsRequest.type,c,a).then(d=>r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(d),d=>r.handleFailedRequest(Zr.CallHierarchyOutgoingCallsRequest.type,d,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,n,s):s(e,n)}},hm=class extends TD.TextDocumentFeature{constructor(e){super(e,Zr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=dm(dm(e,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new fm(n);return[DD.languages.registerCallHierarchyProvider(e.documentSelector,r),r]}};ra.CallHierarchyFeature=hm});var mm=T(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.SemanticTokensFeature=void 0;var ia=require("vscode"),qD=At(),ae=ie(),ED=pr();function oa(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var pm=class extends qD.TextDocumentFeature{constructor(e){super(e,ae.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let n=oa(oa(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[ae.SemanticTokenTypes.namespace,ae.SemanticTokenTypes.type,ae.SemanticTokenTypes.class,ae.SemanticTokenTypes.enum,ae.SemanticTokenTypes.interface,ae.SemanticTokenTypes.struct,ae.SemanticTokenTypes.typeParameter,ae.SemanticTokenTypes.parameter,ae.SemanticTokenTypes.variable,ae.SemanticTokenTypes.property,ae.SemanticTokenTypes.enumMember,ae.SemanticTokenTypes.event,ae.SemanticTokenTypes.function,ae.SemanticTokenTypes.method,ae.SemanticTokenTypes.macro,ae.SemanticTokenTypes.keyword,ae.SemanticTokenTypes.modifier,ae.SemanticTokenTypes.comment,ae.SemanticTokenTypes.string,ae.SemanticTokenTypes.number,ae.SemanticTokenTypes.regexp,ae.SemanticTokenTypes.operator],n.tokenModifiers=[ae.SemanticTokenModifiers.declaration,ae.SemanticTokenModifiers.definition,ae.SemanticTokenModifiers.readonly,ae.SemanticTokenModifiers.static,ae.SemanticTokenModifiers.deprecated,ae.SemanticTokenModifiers.abstract,ae.SemanticTokenModifiers.async,ae.SemanticTokenModifiers.modification,ae.SemanticTokenModifiers.documentation,ae.SemanticTokenModifiers.defaultLibrary],n.formats=[ae.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,oa(oa(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,n){this._client.onRequest(ae.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(n,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=ED.boolean(e.full)?e.full:e.full!==void 0,r=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,i=new ia.EventEmitter,s=n?{onDidChangeSemanticTokens:i.event,provideDocumentSemanticTokens:(p,m)=>{let v=this._client,O=v.clientOptions.middleware,F=(N,b)=>{let w={textDocument:v.code2ProtocolConverter.asTextDocumentIdentifier(N)};return v.sendRequest(ae.SemanticTokensRequest.type,w,b).then(q=>v.protocol2CodeConverter.asSemanticTokens(q),q=>v.handleFailedRequest(ae.SemanticTokensRequest.type,q,null))};return O.provideDocumentSemanticTokens?O.provideDocumentSemanticTokens(p,m,F):F(p,m)},provideDocumentSemanticTokensEdits:r?(p,m,v)=>{let O=this._client,F=O.clientOptions.middleware,N=(b,w,q)=>{let k={textDocument:O.code2ProtocolConverter.asTextDocumentIdentifier(b),previousResultId:w};return O.sendRequest(ae.SemanticTokensDeltaRequest.type,k,q).then(W=>ae.SemanticTokens.is(W)?O.protocol2CodeConverter.asSemanticTokens(W):O.protocol2CodeConverter.asSemanticTokensEdits(W),W=>O.handleFailedRequest(ae.SemanticTokensDeltaRequest.type,W,null))};return F.provideDocumentSemanticTokensEdits?F.provideDocumentSemanticTokensEdits(p,m,v,N):N(p,m,v)}:void 0}:void 0,a=e.range===!0?{provideDocumentRangeSemanticTokens:(p,m,v)=>{let O=this._client,F=O.clientOptions.middleware,N=(b,w,q)=>{let k={textDocument:O.code2ProtocolConverter.asTextDocumentIdentifier(b),range:O.code2ProtocolConverter.asRange(w)};return O.sendRequest(ae.SemanticTokensRangeRequest.type,k,q).then(W=>O.protocol2CodeConverter.asSemanticTokens(W),W=>O.handleFailedRequest(ae.SemanticTokensRangeRequest.type,W,null))};return F.provideDocumentRangeSemanticTokens?F.provideDocumentRangeSemanticTokens(p,m,v,N):N(p,m,v)}}:void 0,c=[],h=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return s!==void 0&&c.push(ia.languages.registerDocumentSemanticTokensProvider(e.documentSelector,s,h)),a!==void 0&&c.push(ia.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,a,h)),[new ia.Disposable(()=>c.forEach(p=>p.dispose())),{range:a,full:s,onDidChangeSemanticTokensEmitter:i}]}};sa.SemanticTokensFeature=pm});var ym=T((kF,vm)=>{vm.exports=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);OD(i)?n.push.apply(n,i):n.push(i)}return n};var OD=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var Cm=T((MF,Rm)=>{"use strict";Rm.exports=_m;function _m(t,e,n){t instanceof RegExp&&(t=wm(t,n)),e instanceof RegExp&&(e=wm(e,n));var r=bm(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function wm(t,e){var n=e.match(t);return n?n[0]:null}_m.range=bm;function bm(t,e,n){var r,i,s,o,a,c=n.indexOf(t),d=n.indexOf(e,c+1),h=c;if(c>=0&&d>0){if(t===e)return[c,d];for(r=[],s=n.length;h>=0&&!a;)h==c?(r.push(h),c=n.indexOf(t,h+1)):r.length==1?a=[r.pop(),d]:(i=r.pop(),i<s&&(s=i,o=d),d=n.indexOf(e,h+1)),h=c<d&&c>=0?c:d;r.length&&(a=[s,o])}return a}});var Fm=T((xF,Om)=>{var FD=ym(),Sm=Cm();Om.exports=xD;var Pm="\0SLASH"+Math.random()+"\0",Dm="\0OPEN"+Math.random()+"\0",Ou="\0CLOSE"+Math.random()+"\0",Tm="\0COMMA"+Math.random()+"\0",qm="\0PERIOD"+Math.random()+"\0";function Fu(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function kD(t){return t.split("\\\\").join(Pm).split("\\{").join(Dm).split("\\}").join(Ou).split("\\,").join(Tm).split("\\.").join(qm)}function MD(t){return t.split(Pm).join("\\").split(Dm).join("{").split(Ou).join("}").split(Tm).join(",").split(qm).join(".")}function Em(t){if(!t)return[""];var e=[],n=Sm("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=Em(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function xD(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),qi(kD(t),!0).map(MD)):[]}function ID(t){return"{"+t+"}"}function ND(t){return/^-?0\d/.test(t)}function AD(t,e){return t<=e}function LD(t,e){return t>=e}function qi(t,e){var n=[],r=Sm("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),o=i||s,a=r.body.indexOf(",")>=0;if(!o&&!a)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+Ou+r.post,qi(t)):[t];var c;if(o)c=r.body.split(/\.\./);else if(c=Em(r.body),c.length===1&&(c=qi(c[0],!1).map(ID),c.length===1)){var h=r.post.length?qi(r.post,!1):[""];return h.map(function(x){return r.pre+c[0]+x})}var d=r.pre,h=r.post.length?qi(r.post,!1):[""],p;if(o){var m=Fu(c[0]),v=Fu(c[1]),O=Math.max(c[0].length,c[1].length),F=c.length==3?Math.abs(Fu(c[2])):1,N=AD,b=v<m;b&&(F*=-1,N=LD);var w=c.some(ND);p=[];for(var q=m;N(q,v);q+=F){var k;if(s)k=String.fromCharCode(q),k==="\\"&&(k="");else if(k=String(q),w){var W=O-k.length;if(W>0){var ee=new Array(W+1).join("0");q<0?k="-"+ee+k.slice(1):k=ee+k}}p.push(k)}}else p=FD(c,function(j){return qi(j,!1)});for(var ve=0;ve<p.length;ve++)for(var we=0;we<h.length;we++){var ke=d+p[ve]+h[we];(!e||o||ke)&&n.push(ke)}return n}});var Lm=T((IF,Am)=>{Am.exports=Qt;Qt.Minimatch=st;var jo={sep:"/"};try{jo=require("path")}catch{}var ku=Qt.GLOBSTAR=st.GLOBSTAR={},jD=Fm(),km={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Mu="[^/]",xu=Mu+"*?",WD="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",$D="(?:(?!(?:\\/|^)\\.).)*?",Mm=HD("().*{}+?[]^$\\!");function HD(t){return t.split("").reduce(function(e,n){return e[n]=!0,e},{})}var xm=/\/+/;Qt.filter=zD;function zD(t,e){return e=e||{},function(n,r,i){return Qt(n,t,e)}}function Im(t,e){t=t||{},e=e||{};var n={};return Object.keys(e).forEach(function(r){n[r]=e[r]}),Object.keys(t).forEach(function(r){n[r]=t[r]}),n}Qt.defaults=function(t){if(!t||!Object.keys(t).length)return Qt;var e=Qt,n=function(i,s,o){return e.minimatch(i,s,Im(t,o))};return n.Minimatch=function(i,s){return new e.Minimatch(i,Im(t,s))},n};st.defaults=function(t){return!t||!Object.keys(t).length?st:Qt.defaults(t).Minimatch};function Qt(t,e,n){if(typeof e!="string")throw new TypeError("glob pattern string required");return n||(n={}),!n.nocomment&&e.charAt(0)==="#"?!1:e.trim()===""?t==="":new st(e,n).match(t)}function st(t,e){if(!(this instanceof st))return new st(t,e);if(typeof t!="string")throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),jo.sep!=="/"&&(t=t.split(jo.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}st.prototype.debug=function(){};st.prototype.make=KD;function KD(){if(!this._made){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(xm)}),this.debug(this.pattern,n),n=n.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}}st.prototype.parseNegate=UD;function UD(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}Qt.braceExpand=function(t,e){return Nm(t,e)};st.prototype.braceExpand=Nm;function Nm(t,e){if(e||(this instanceof st?e=this.options:e={}),t=typeof t=="undefined"?this.pattern:t,typeof t=="undefined")throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:jD(t)}st.prototype.parse=BD;var aa={};function BD(t,e){if(t.length>1024*64)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&t==="**")return ku;if(t==="")return"";var r="",i=!!n.nocase,s=!1,o=[],a=[],c,d=!1,h=-1,p=-1,m=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=this;function O(){if(c){switch(c){case"*":r+=xu,i=!0;break;case"?":r+=Mu,i=!0;break;default:r+="\\"+c;break}v.debug("clearStateChar %j %j",c,r),c=!1}}for(var F=0,N=t.length,b;F<N&&(b=t.charAt(F));F++){if(this.debug("%s	%s %s %j",t,F,r,b),s&&Mm[b]){r+="\\"+b,s=!1;continue}switch(b){case"/":return!1;case"\\":O(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,F,r,b),d){this.debug("  in class"),b==="!"&&F===p+1&&(b="^"),r+=b;continue}v.debug("call clearStateChar %j",c),O(),c=b,n.noext&&O();continue;case"(":if(d){r+="(";continue}if(!c){r+="\\(";continue}o.push({type:c,start:F-1,reStart:r.length,open:km[c].open,close:km[c].close}),r+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,r),c=!1;continue;case")":if(d||!o.length){r+="\\)";continue}O(),i=!0;var w=o.pop();r+=w.close,w.type==="!"&&a.push(w),w.reEnd=r.length;continue;case"|":if(d||!o.length||s){r+="\\|",s=!1;continue}O(),r+="|";continue;case"[":if(O(),d){r+="\\"+b;continue}d=!0,p=F,h=r.length,r+=b;continue;case"]":if(F===p+1||!d){r+="\\"+b,s=!1;continue}if(d){var q=t.substring(p+1,F);try{RegExp("["+q+"]")}catch{var k=this.parse(q,aa);r=r.substr(0,h)+"\\["+k[0]+"\\]",i=i||k[1],d=!1;continue}}i=!0,d=!1,r+=b;continue;default:O(),s?s=!1:Mm[b]&&!(b==="^"&&d)&&(r+="\\"),r+=b}}for(d&&(q=t.substr(p+1),k=this.parse(q,aa),r=r.substr(0,h)+"\\["+k[0],i=i||k[1]),w=o.pop();w;w=o.pop()){var W=r.slice(w.reStart+w.open.length);this.debug("setting tail",r,w),W=W.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(tt,Ze,cn){return cn||(cn="\\"),Ze+Ze+cn+"|"}),this.debug(`tail=%j
   %s`,W,W,w,r);var ee=w.type==="*"?xu:w.type==="?"?Mu:"\\"+w.type;i=!0,r=r.slice(0,w.reStart)+ee+"\\("+W}O(),s&&(r+="\\\\");var ve=!1;switch(r.charAt(0)){case".":case"[":case"(":ve=!0}for(var we=a.length-1;we>-1;we--){var ke=a[we],j=r.slice(0,ke.reStart),x=r.slice(ke.reStart,ke.reEnd-8),L=r.slice(ke.reEnd-8,ke.reEnd),z=r.slice(ke.reEnd);L+=z;var de=j.split("(").length-1,Z=z;for(F=0;F<de;F++)Z=Z.replace(/\)[+*?]?/,"");z=Z;var le="";z===""&&e!==aa&&(le="$");var ne=j+x+z+le+L;r=ne}if(r!==""&&i&&(r="(?=.)"+r),ve&&(r=m+r),e===aa)return[r,i];if(!i)return VD(t);var Ie=n.nocase?"i":"";try{var Te=new RegExp("^"+r+"$",Ie)}catch{return new RegExp("$.")}return Te._glob=t,Te._src=r,Te}Qt.makeRe=function(t,e){return new st(t,e||{}).makeRe()};st.prototype.makeRe=GD;function GD(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?xu:e.dot?WD:$D,r=e.nocase?"i":"",i=t.map(function(s){return s.map(function(o){return o===ku?n:typeof o=="string"?JD(o):o._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}Qt.match=function(t,e,n){n=n||{};var r=new st(e,n);return t=t.filter(function(i){return r.match(i)}),r.options.nonull&&!t.length&&t.push(e),t};st.prototype.match=XD;function XD(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;var n=this.options;jo.sep!=="/"&&(t=t.split(jo.sep).join("/")),t=t.split(xm),this.debug(this.pattern,"split",t);var r=this.set;this.debug(this.pattern,"set",r);var i,s;for(s=t.length-1;s>=0&&(i=t[s],!i);s--);for(s=0;s<r.length;s++){var o=r[s],a=t;n.matchBase&&o.length===1&&(a=[i]);var c=this.matchOne(a,o,e);if(c)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}st.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,o=t.length,a=e.length;i<o&&s<a;i++,s++){this.debug("matchOne loop");var c=e[s],d=t[i];if(this.debug(e,c,d),c===!1)return!1;if(c===ku){this.debug("GLOBSTAR",[e,c,d]);var h=i,p=s+1;if(p===a){for(this.debug("** at the end");i<o;i++)if(t[i]==="."||t[i]===".."||!r.dot&&t[i].charAt(0)===".")return!1;return!0}for(;h<o;){var m=t[h];if(this.debug(`
globstar while`,t,h,e,p,m),this.matchOne(t.slice(h),e.slice(p),n))return this.debug("globstar found match!",h,o,m),!0;if(m==="."||m===".."||!r.dot&&m.charAt(0)==="."){this.debug("dot detected!",t,h,e,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,h,e,p),h===o))}var v;if(typeof c=="string"?(r.nocase?v=d.toLowerCase()===c.toLowerCase():v=d===c,this.debug("string match",c,d,v)):(v=d.match(c),this.debug("pattern match",c,d,v)),!v)return!1}if(i===o&&s===a)return!0;if(i===o)return n;if(s===a){var O=i===o-1&&t[i]==="";return O}throw new Error("wtf?")};function VD(t){return t.replace(/\\(.)/g,"$1")}function JD(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Gm=T(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.WillDeleteFilesFeature=Dt.WillRenameFilesFeature=Dt.WillCreateFilesFeature=Dt.DidDeleteFilesFeature=Dt.DidRenameFilesFeature=Dt.DidCreateFilesFeature=void 0;var On=require("vscode"),QD=Lm(),er=ie(),YD=zs();function jm(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function ZD(t,e){return t[e]}function Wm(t,e,n){t[e]=n}var ei=class{constructor(e,n,r,i,s){this._filters=new Map,this._client=e,this._event=n,this._registrationType=r,this._clientCapability=i,this._serverCapability=s}get registrationType(){return this._registrationType}fillClientCapabilities(e){let n=jm(jm(e,"workspace"),"fileOperations");Wm(n,"dynamicRegistration",!0),Wm(n,this._clientCapability,!0)}initialize(e){var n;let r=(n=e.workspace)===null||n===void 0?void 0:n.fileOperations,i=r!==void 0?ZD(r,this._serverCapability):void 0;if((i==null?void 0:i.filters)!==void 0)try{this.register({id:YD.generateUuid(),registerOptions:{filters:i.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let n=e.registerOptions.filters.map(r=>{let i=new QD.Minimatch(r.pattern.glob,ei.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,n)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(e,n){let r=await Promise.all(e.files.map(async s=>{let o=n(s),a=o.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let d of c)if(!(d.scheme!==void 0&&d.scheme!==o.scheme)){if(d.matcher.match(a)){if(d.kind===void 0)return!0;let h=await ei.getFileType(o);if(h===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(h===On.FileType.File&&d.kind===er.FileOperationPatternKind.file||h===On.FileType.Directory&&d.kind===er.FileOperationPatternKind.folder)return!0}else if(d.kind===er.FileOperationPatternKind.folder&&await ei.getFileType(o)===On.FileType.Directory&&d.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((s,o)=>r[o]);return Object.assign(Object.assign({},e),{files:i})}static async getFileType(e){try{return(await On.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},ca=class extends ei{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s);this._notificationType=r,this._accessUri=o,this._createParams=a}async send(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=async i=>{this._client.sendNotification(this._notificationType,this._createParams(i))};this.doSend(n,r)}}},$m=class extends ca{constructor(e){super(e,On.workspace.onDidCreateFiles,er.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didCreateFiles)?i.didCreateFiles(e,n):n(e)}};Dt.DidCreateFilesFeature=$m;var Hm=class extends ca{constructor(e){super(e,On.workspace.onDidRenameFiles,er.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didRenameFiles)?i.didRenameFiles(e,n):n(e)}};Dt.DidRenameFilesFeature=Hm;var zm=class extends ca{constructor(e){super(e,On.workspace.onDidDeleteFiles,er.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,e.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didDeleteFiles)?i.didDeleteFiles(e,n):n(e)}};Dt.DidDeleteFilesFeature=zm;var ua=class extends ei{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s);this._requestType=r,this._accessUri=o,this._createParams=a}async send(e){let n=this.waitUntil(e);e.waitUntil(n)}async waitUntil(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,r)}else return}},Km=class extends ua{constructor(e){super(e,On.workspace.onWillCreateFiles,er.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willCreateFiles)?i.willCreateFiles(e,n):n(e)}};Dt.WillCreateFilesFeature=Km;var Um=class extends ua{constructor(e){super(e,On.workspace.onWillRenameFiles,er.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willRenameFiles)?i.willRenameFiles(e,n):n(e)}};Dt.WillRenameFilesFeature=Um;var Bm=class extends ua{constructor(e){super(e,On.workspace.onWillDeleteFiles,er.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willDeleteFiles)?i.willDeleteFiles(e,n):n(e)}};Dt.WillDeleteFilesFeature=Bm});var Jm=T(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.LinkedEditingFeature=void 0;var eT=require("vscode"),Iu=ie(),tT=At();function Xm(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Vm=class extends tT.TextDocumentFeature{constructor(e){super(e,Iu.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let n=Xm(Xm(e,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideLinkedEditingRanges:(r,i,s)=>{let o=this._client,a=(d,h,p)=>o.sendRequest(Iu.LinkedEditingRangeRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(o.protocol2CodeConverter.asLinkedEditingRanges,m=>o.handleFailedRequest(Iu.LinkedEditingRangeRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideLinkedEditingRange?c.provideLinkedEditingRange(r,i,s,a):a(r,i,s)}};return[eT.languages.registerLinkedEditingRangeProvider(e.documentSelector,n),n]}};la.LinkedEditingFeature=Vm});var Nu=T(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.ProposedFeatures=ti.CommonLanguageClient=void 0;var nT=At(),rT=Gp(),iT=su(),oT=Jp(),sT=Yp(),aT=em(),cT=nm(),uT=om(),lT=cm(),dT=lm(),fT=gm(),hT=mm(),Ei=Gm(),gT=Jm(),Qm=class extends nT.BaseLanguageClient{constructor(e,n,r){super(e,n,r)}registerProposedFeatures(){this.registerFeatures(Ym.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new iT.ConfigurationFeature(this)),this.registerFeature(new sT.TypeDefinitionFeature(this)),this.registerFeature(new oT.ImplementationFeature(this)),this.registerFeature(new rT.ColorProviderFeature(this)),this.registerFeature(new aT.WorkspaceFoldersFeature(this)),this.registerFeature(new cT.FoldingRangeFeature(this)),this.registerFeature(new uT.DeclarationFeature(this)),this.registerFeature(new lT.SelectionRangeFeature(this)),this.registerFeature(new dT.ProgressFeature(this)),this.registerFeature(new fT.CallHierarchyFeature(this)),this.registerFeature(new hT.SemanticTokensFeature(this)),this.registerFeature(new gT.LinkedEditingFeature(this)),this.registerFeature(new Ei.DidCreateFilesFeature(this)),this.registerFeature(new Ei.DidRenameFilesFeature(this)),this.registerFeature(new Ei.DidDeleteFilesFeature(this)),this.registerFeature(new Ei.WillCreateFilesFeature(this)),this.registerFeature(new Ei.WillRenameFilesFeature(this)),this.registerFeature(new Ei.WillDeleteFilesFeature(this))}};ti.CommonLanguageClient=Qm;var Ym;(function(t){function e(n){return[]}t.createAll=e})(Ym=ti.ProposedFeatures||(ti.ProposedFeatures={}))});var ev=T(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.terminate=void 0;var Zm=require("child_process"),pT=require("path"),mT=process.platform==="win32",vT=process.platform==="darwin",yT=process.platform==="linux";function _T(t,e){if(mT)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),Zm.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(yT||vT)try{var n=pT.join(__dirname,"terminateProcess.sh"),r=Zm.spawnSync(n,[t.pid.toString()]);return!r.error}catch{return!1}else return t.kill("SIGKILL"),!0}da.terminate=_T});var Wo=T((WF,tv)=>{"use strict";tv.exports=ie()});var nv=T(tr=>{"use strict";var wT=tr&&tr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Au=tr&&tr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&wT(e,t,n)};Object.defineProperty(tr,"__esModule",{value:!0});Au(ie(),tr);Au(At(),tr);Au(Nu(),tr)});var cv=T(_t=>{"use strict";var bT=_t&&_t.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),rv=_t&&_t.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&bT(e,t,n)};Object.defineProperty(_t,"__esModule",{value:!0});_t.SettingMonitor=_t.LanguageClient=_t.TransportKind=void 0;var ni=require("child_process"),Lu=require("fs"),ju=require("path"),iv=Pc(),br=require("vscode"),Je=pr(),RT=Nu(),CT=At(),ST=ev(),Qe=Wo();rv(Wo(),_t);rv(nv(),_t);var ov="^1.52.0",Wu;(function(t){function e(n){return Je.string(n.command)}t.is=e})(Wu||(Wu={}));var ut;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(ut=_t.TransportKind||(_t.TransportKind={}));var Oi;(function(t){function e(n){let r=n;return r&&r.kind===ut.socket&&Je.number(r.port)}t.isSocket=e})(Oi||(Oi={}));var $u;(function(t){function e(n){return Je.string(n.module)}t.is=e})($u||($u={}));var Hu;(function(t){function e(n){let r=n;return r&&r.writer!==void 0&&r.reader!==void 0}t.is=e})(Hu||(Hu={}));var zu;(function(t){function e(n){let r=n;return r&&r.process!==void 0&&typeof r.detached=="boolean"}t.is=e})(zu||(zu={}));var sv=class extends RT.CommonLanguageClient{constructor(e,n,r,i,s){let o,a,c,d,h;Je.string(n)?(o=e,a=n,c=r,d=i,h=!!s):(o=e.toLowerCase(),a=e,c=n,d=r,h=i),h===void 0&&(h=!1);super(o,a,d);this._serverOptions=c,this._forceDebug=h;try{this.checkVersion()}catch(p){throw Je.string(p.message)&&this.outputChannel.appendLine(p.message),p}}checkVersion(){let e=iv.parse(br.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${br.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!iv.satisfies(e,ov))throw new Error(`The language client requires VS Code version ${ov} but received version ${br.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),ST.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function n(h,p){if(!h&&!p)return;let m=Object.create(null);return Object.keys(process.env).forEach(v=>m[v]=process.env[v]),p&&(m.ELECTRON_RUN_AS_NODE="1",m.ELECTRON_NO_ASAR="1"),h&&Object.keys(h).forEach(v=>m[v]=h[v]),m}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let h=process.execArgv;return h?h.some(p=>r.some(m=>p.startsWith(m))||i.some(m=>p===m)):!1}function o(h){if(h.stdin===null||h.stdout===null||h.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Je.func(a))return a().then(h=>{if(CT.MessageTransports.is(h))return this._isDetached=!!h.detached,h;if(Hu.is(h))return this._isDetached=!!h.detached,{reader:new Qe.StreamMessageReader(h.reader),writer:new Qe.StreamMessageWriter(h.writer)};{let p;return zu.is(h)?(p=h.process,this._isDetached=h.detached):(p=h,this._isDetached=!1),p.stderr.on("data",m=>this.outputChannel.append(Je.string(m)?m:m.toString(e))),{reader:new Qe.StreamMessageReader(p.stdout),writer:new Qe.StreamMessageWriter(p.stdin)}}});let c,d=a;return d.run||d.debug?this._forceDebug||s()?c=d.debug:c=d.run:c=a,this._getServerWorkingDir(c.options).then(h=>{if($u.is(c)&&c.module){let p=c,m=p.transport||ut.stdio;if(p.runtime){let v=[],O=p.options||Object.create(null);O.execArgv&&O.execArgv.forEach(w=>v.push(w)),v.push(p.module),p.args&&p.args.forEach(w=>v.push(w));let F=Object.create(null);F.cwd=h,F.env=n(O.env,!1);let N=this._getRuntimePath(p.runtime,h),b;if(m===ut.ipc?(F.stdio=[null,null,null,"ipc"],v.push("--node-ipc")):m===ut.stdio?v.push("--stdio"):m===ut.pipe?(b=Qe.generateRandomPipeName(),v.push(`--pipe=${b}`)):Oi.isSocket(m)&&v.push(`--socket=${m.port}`),v.push(`--clientProcessId=${process.pid.toString()}`),m===ut.ipc||m===ut.stdio){let w=ni.spawn(N,v,F);return!w||!w.pid?Promise.reject(`Launching server using runtime ${N} failed.`):(this._serverProcess=w,w.stderr.on("data",q=>this.outputChannel.append(Je.string(q)?q:q.toString(e))),m===ut.ipc?(w.stdout.on("data",q=>this.outputChannel.append(Je.string(q)?q:q.toString(e))),Promise.resolve({reader:new Qe.IPCMessageReader(w),writer:new Qe.IPCMessageWriter(w)})):Promise.resolve({reader:new Qe.StreamMessageReader(w.stdout),writer:new Qe.StreamMessageWriter(w.stdin)}))}else{if(m===ut.pipe)return Qe.createClientPipeTransport(b).then(w=>{let q=ni.spawn(N,v,F);return!q||!q.pid?Promise.reject(`Launching server using runtime ${N} failed.`):(this._serverProcess=q,q.stderr.on("data",k=>this.outputChannel.append(Je.string(k)?k:k.toString(e))),q.stdout.on("data",k=>this.outputChannel.append(Je.string(k)?k:k.toString(e))),w.onConnected().then(k=>({reader:k[0],writer:k[1]})))});if(Oi.isSocket(m))return Qe.createClientSocketTransport(m.port).then(w=>{let q=ni.spawn(N,v,F);return!q||!q.pid?Promise.reject(`Launching server using runtime ${N} failed.`):(this._serverProcess=q,q.stderr.on("data",k=>this.outputChannel.append(Je.string(k)?k:k.toString(e))),q.stdout.on("data",k=>this.outputChannel.append(Je.string(k)?k:k.toString(e))),w.onConnected().then(k=>({reader:k[0],writer:k[1]})))})}}else{let v;return new Promise((O,F)=>{let N=p.args&&p.args.slice()||[];m===ut.ipc?N.push("--node-ipc"):m===ut.stdio?N.push("--stdio"):m===ut.pipe?(v=Qe.generateRandomPipeName(),N.push(`--pipe=${v}`)):Oi.isSocket(m)&&N.push(`--socket=${m.port}`),N.push(`--clientProcessId=${process.pid.toString()}`);let b=p.options||Object.create(null);if(b.env=n(b.env,!0),b.execArgv=b.execArgv||[],b.cwd=h,b.silent=!0,m===ut.ipc||m===ut.stdio){let w=ni.fork(p.module,N||[],b);o(w),this._serverProcess=w,w.stderr.on("data",q=>this.outputChannel.append(Je.string(q)?q:q.toString(e))),m===ut.ipc?(w.stdout.on("data",q=>this.outputChannel.append(Je.string(q)?q:q.toString(e))),O({reader:new Qe.IPCMessageReader(this._serverProcess),writer:new Qe.IPCMessageWriter(this._serverProcess)})):O({reader:new Qe.StreamMessageReader(w.stdout),writer:new Qe.StreamMessageWriter(w.stdin)})}else m===ut.pipe?Qe.createClientPipeTransport(v).then(w=>{let q=ni.fork(p.module,N||[],b);o(q),this._serverProcess=q,q.stderr.on("data",k=>this.outputChannel.append(Je.string(k)?k:k.toString(e))),q.stdout.on("data",k=>this.outputChannel.append(Je.string(k)?k:k.toString(e))),w.onConnected().then(k=>{O({reader:k[0],writer:k[1]})})}):Oi.isSocket(m)&&Qe.createClientSocketTransport(m.port).then(w=>{let q=ni.fork(p.module,N||[],b);o(q),this._serverProcess=q,q.stderr.on("data",k=>this.outputChannel.append(Je.string(k)?k:k.toString(e))),q.stdout.on("data",k=>this.outputChannel.append(Je.string(k)?k:k.toString(e))),w.onConnected().then(k=>{O({reader:k[0],writer:k[1]})})})})}}else if(Wu.is(c)&&c.command){let p=c,m=p.args||[],v=Object.assign({},p.options);v.cwd=v.cwd||h;let O=ni.spawn(p.command,m,v);return!O||!O.pid?Promise.reject(`Launching server using command ${p.command} failed.`):(O.stderr.on("data",F=>this.outputChannel.append(Je.string(F)?F:F.toString(e))),this._serverProcess=O,this._isDetached=!!v.detached,Promise.resolve({reader:new Qe.StreamMessageReader(O.stdout),writer:new Qe.StreamMessageWriter(O.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,n){if(ju.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=ju.join(r,e);if(Lu.existsSync(i))return i}if(n!==void 0){let i=ju.join(n,e);if(Lu.existsSync(i))return i}return e}_mainGetRootPath(){let e=br.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}_getServerWorkingDir(e){let n=e&&e.cwd;return n||(n=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),n?new Promise(r=>{Lu.lstat(n,(i,s)=>{r(!i&&s.isDirectory()?n:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let n;try{n=JSON.parse(e)}catch{}return n===void 0||typeof n.locale!="string"?"en":n.locale}};_t.LanguageClient=sv;var av=class{constructor(e,n){this._client=e,this._setting=n,this._listeners=[]}start(){return br.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new br.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),n=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?br.workspace.getConfiguration(n).get(r,!1):br.workspace.getConfiguration(n);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};_t.SettingMonitor=av});var lv=T((zF,uv)=>{"use strict";uv.exports=cv()});var Ku=T($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.ApiEvent=void 0;var PT;(function(t){t.DidRegisterDocumentFormattingEditProvider="DidRegisterDocumentFormattingEditProvider",t.DidResetConfiguration="DidResetConfiguration"})(PT=$o.ApiEvent||($o.ApiEvent={}))});var Fi=T(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.Notification=Fn.CodeActionKind=Fn.CommandId=void 0;var DT=mr(),TT;(function(t){t.ApplyAutoFix="stylelint.applyAutoFix",t.OpenRuleDoc="stylelint.openRuleDoc"})(TT=Fn.CommandId||(Fn.CommandId={}));Fn.CodeActionKind={StylelintSourceFixAll:`${DT.CodeActionKind.SourceFixAll}.stylelint`};var qT;(function(t){t.DidRegisterCodeActionRequestHandler="stylelint/didRegisterCodeActionRequestHandler",t.DidRegisterDocumentFormattingEditProvider="textDocument/didRegisterDocumentFormattingEditProvider",t.DidResetConfiguration="stylelint/didResetConfiguration"})(qT=Fn.Notification||(Fn.Notification={}))});var gv=T(Cr=>{"use strict";var dv=Cr&&Cr.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Tt=Cr&&Cr.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Uu,Rr,mn,fv;Object.defineProperty(Cr,"__esModule",{value:!0});Cr.AutoFixModule=void 0;var ET=ie(),hv=Fi(),Bu=class{constructor({context:e,logger:n}){Uu.add(this),Rr.set(this,void 0),mn.set(this,void 0),dv(this,Rr,e,"f"),dv(this,mn,n,"f")}onInitialize(){return{capabilities:{executeCommandProvider:{commands:[hv.CommandId.ApplyAutoFix]}}}}onDidRegisterHandlers(){Tt(this,mn,"f")?.debug("Registering onExecuteCommand handler"),Tt(this,Rr,"f").commands.on(hv.CommandId.ApplyAutoFix,async({arguments:e})=>{if(!e)return{};let n=e[0],r=n.uri,i=Tt(this,Rr,"f").documents.get(r);if(!i||!await Tt(this,Uu,"m",fv).call(this,i))return Tt(this,mn,"f")?.isDebugEnabled()&&(i?Tt(this,mn,"f").debug("Document should not be auto-fixed, ignoring",{uri:r,language:i.languageId}):Tt(this,mn,"f").debug("Unknown document, ignoring",{uri:r})),{};if(n.version!==i.version)return Tt(this,mn,"f")?.debug("Document has been modified, ignoring",{uri:r}),{};let s=new ET.WorkspaceChange,o=s.getTextEditChange(n),a=await Tt(this,Rr,"f").getFixes(i);a.forEach(c=>o.add(c)),Tt(this,mn,"f")?.debug("Applying fixes",{uri:r,edits:a});try{let c=await Tt(this,Rr,"f").connection.workspace.applyEdit(s.edit);c.applied||Tt(this,mn,"f")?.debug("Failed to apply fixes",{uri:r,response:c})}catch(c){Tt(this,mn,"f")?.debug("Failed to apply fixes",{uri:r,error:c})}return{}})}};Cr.AutoFixModule=Bu;Rr=new WeakMap,mn=new WeakMap,Uu=new WeakSet,fv=async function(e){return(await Tt(this,Rr,"f").getOptions(e.uri)).validate.includes(e.languageId)};Bu.id="auto-fix"});var yv=T(qt=>{"use strict";var OT=qt&&qt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),FT=qt&&qt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kT=qt&&qt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&OT(e,t,n);return FT(e,t),e},pv=qt&&qt.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Lt=qt&&qt.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},fa,Yt,Ho;Object.defineProperty(qt,"__esModule",{value:!0});qt.CommandManager=void 0;var mv=kT(ie()),vv=class{constructor(e,n){fa.set(this,void 0),Yt.set(this,void 0),Ho.set(this,new Map),pv(this,fa,e,"f"),pv(this,Yt,n,"f")}on(e,n){if(Array.isArray(e)){Lt(this,Yt,"f")?.debug("Registering commands",{commands:e});for(let r of e)Lt(this,Ho,"f").set(r,n)}else Lt(this,Yt,"f")?.debug("Registering command",{command:e}),Lt(this,Ho,"f").set(e,n)}register(){Lt(this,Yt,"f")?.debug("Registering ExecuteCommandRequest handler"),Lt(this,fa,"f").onExecuteCommand(async(...e)=>{Lt(this,Yt,"f")?.debug("Received ExecuteCommandRequest",{command:e[0].command,arguments:e[0].arguments});let n=Lt(this,Ho,"f").get(e[0].command);if(!n)return Lt(this,Yt,"f")?.debug("No handler registered for command",{command:e[0].command}),{};Lt(this,Yt,"f")?.debug("Executing command",{command:e[0].command});try{let r=await n(...e);return Lt(this,Yt,"f")?.debug("Sending command response",{command:e[0].command,response:r}),r}catch(r){return Lt(this,Yt,"f")?.error("Error executing command",{command:e[0].command,error:r}),new mv.ResponseError(mv.ErrorCodes.InternalError,`Error executing command ${e[0].command}`,r)}}),Lt(this,Yt,"f")?.debug("ExecuteCommandRequest handler registered")}};qt.CommandManager=vv;fa=new WeakMap,Yt=new WeakMap,Ho=new WeakMap});var _v=T(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.createDisableCompletionItem=void 0;var zo=mr();function MT(t,e=""){let n=zo.CompletionItem.create(t);return n.kind=zo.CompletionItemKind.Snippet,n.insertTextFormat=zo.InsertTextFormat.Snippet,t==="stylelint-disable"?(n.insertText=`/* stylelint-disable \${0:${e||"rule"}} */
/* stylelint-enable \${0:${e||"rule"}} */`,n.detail="Turn off all Stylelint or individual rules, after which you do not need to re-enable Stylelint. (Stylelint)",n.documentation={kind:zo.MarkupKind.Markdown,value:`\`\`\`css
/* stylelint-disable ${e||"rule"} */
/* stylelint-enable ${e||"rule"} */
\`\`\``}):(n.insertText=`/* ${t} \${0:${e||"rule"}} */`,n.detail=t==="stylelint-disable-line"?"Turn off Stylelint rules for individual lines only, after which you do not need to explicitly re-enable them. (Stylelint)":"Turn off Stylelint rules for the next line only, after which you do not need to explicitly re-enable them. (Stylelint)",n.documentation={kind:zo.MarkupKind.Markdown,value:`\`\`\`css
/* ${t} ${e||"rule"} */
\`\`\``}),n}ha.createDisableCompletionItem=MT});var wv=T(Zt=>{"use strict";var xT=Zt&&Zt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),IT=Zt&&Zt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),NT=Zt&&Zt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&xT(e,t,n);return IT(e,t),e},AT=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.createDisableRuleFileCodeAction=void 0;var LT=AT(require("os")),Sr=NT(ie());function jT(t,{code:e}){let n=new Sr.WorkspaceChange,r=t.getText(Sr.Range.create(Sr.Position.create(0,0),Sr.Position.create(0,2)));return n.getTextEditChange(t).add(Sr.TextEdit.insert(Sr.Position.create(r==="#!"?1:0,0),`/* stylelint-disable ${e} */${LT.default.EOL}`)),Sr.CodeAction.create(`Disable ${e} for the entire file`,n.edit,Sr.CodeActionKind.QuickFix)}Zt.createDisableRuleFileCodeAction=jT});var bv=T(tn=>{"use strict";var WT=tn&&tn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),$T=tn&&tn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),HT=tn&&tn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&WT(e,t,n);return $T(e,t),e},zT=tn&&tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tn,"__esModule",{value:!0});tn.createDisableRuleLineCodeAction=void 0;var KT=zT(require("os")),en=HT(ie());function UT(t,{code:e,range:n},r){let i=new en.WorkspaceChange;if(r==="sameLine")i.getTextEditChange(t).add(en.TextEdit.insert(en.Position.create(n.start.line,en.uinteger.MAX_VALUE),` /* stylelint-disable-line ${e} */`));else{let o=t.getText(en.Range.create(en.Position.create(n.start.line,0),en.Position.create(n.start.line,en.uinteger.MAX_VALUE))).match(/^([ \t]+)/)?.[1]??"";i.getTextEditChange(t).add(en.TextEdit.insert(en.Position.create(n.start.line,0),`${o}/* stylelint-disable-next-line ${e} */${KT.default.EOL}`))}return en.CodeAction.create(`Disable ${e} for this line`,i.edit,en.CodeActionKind.QuickFix)}tn.createDisableRuleLineCodeAction=UT});var Cv=T(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.isIterableObject=ki.isIterable=void 0;function Rv(t){return t!=null&&typeof t[Symbol.iterator]=="function"}ki.isIterable=Rv;function BT(t){return Rv(t)&&typeof t=="object"}ki.isIterableObject=BT});var Sv=T(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.displayError=void 0;var GT=Cv();function XT(t,e){if(!(e instanceof Error)){t.window.showErrorMessage(String(e).replace(/\n/gu," "));return}if((0,GT.isIterableObject)(e?.reasons)){for(let n of e.reasons)t.window.showErrorMessage(`Stylelint: ${n}`);return}if(e?.code===78){t.window.showErrorMessage(`Stylelint: ${e.message}`);return}t.window.showErrorMessage((e.stack||e.message).replace(/\n/gu," "))}ga.displayError=XT});var Tv=T(Pr=>{"use strict";var Pv=Pr&&Pr.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},nr=Pr&&Pr.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},pa,Ko,Uo,Bo,Gu;Object.defineProperty(Pr,"__esModule",{value:!0});Pr.NotificationManager=void 0;var Dv=class{constructor(e,n){pa.add(this),Ko.set(this,void 0),Uo.set(this,void 0),Bo.set(this,new Map),Pv(this,Ko,e,"f"),Pv(this,Uo,n,"f")}on(e,n){let r=typeof e=="function",[i,s]=r?[void 0,e]:[e,n];if(!s)throw new Error("Handler must be defined");let o=nr(this,Bo,"f").get(i);if(o){o.push(s);return}if(nr(this,Bo,"f").set(i,[s]),r){nr(this,Ko,"f").onNotification((...a)=>nr(this,pa,"m",Gu).call(this,void 0,a));return}nr(this,Ko,"f").onNotification(e,(...a)=>nr(this,pa,"m",Gu).call(this,e,a))}};Pr.NotificationManager=Dv;Ko=new WeakMap,Uo=new WeakMap,Bo=new WeakMap,pa=new WeakSet,Gu=async function(e,n){nr(this,Uo,"f")?.debug("Received notification",{notificationType:e??"<all>",params:n});let r=nr(this,Bo,"f").get(e);await Promise.all(r.map(async i=>{try{await i(...n)}catch(s){nr(this,Uo,"f")?.error("Error handling notification",{notificationType:e??"<all>",error:s})}}))}});var Ev=T(Mi=>{"use strict";var Xu=Mi&&Mi.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Go;Object.defineProperty(Mi,"__esModule",{value:!0});Mi.RuleCodeActionsCollection=void 0;var qv=class{constructor(){Go.set(this,new Map)}get(e){let n=Xu(this,Go,"f").get(e);if(n)return n;let r={};return Xu(this,Go,"f").set(e,r),r}*[(Go=new WeakMap,Symbol.iterator)](){for(let e of Xu(this,Go,"f").values())e.disableLine&&(yield e.disableLine),e.disableFile&&(yield e.disableFile),e.documentation&&(yield e.documentation)}get size(){let e=this[Symbol.iterator](),n=0;for(;!e.next().done;)n++;return n}};Mi.RuleCodeActionsCollection=qv});var Fv=T(Ov=>{"use strict";Object.defineProperty(Ov,"__esModule",{value:!0})});var ma=T(Et=>{"use strict";var VT=Et&&Et.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Dr=Et&&Et.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&VT(e,t,n)};Object.defineProperty(Et,"__esModule",{value:!0});Dr(yv(),Et);Dr(_v(),Et);Dr(wv(),Et);Dr(bv(),Et);Dr(Sv(),Et);Dr(Tv(),Et);Dr(Ev(),Et);Dr(Fv(),Et)});var Vu=T((rk,xv)=>{"use strict";var kv=require("path");xv.exports=function(t,e){return t=Mv(t),e=Mv(e),process.platform==="win32"&&(t=t.toLowerCase(),e=e.toLowerCase()),t.lastIndexOf(e,0)===0&&(t[e.length]===kv.sep||t[e.length]===void 0)};function Mv(t){return t[t.length-1]===kv.sep?t.slice(0,-1):t}});var xi=T((Xo,Ju)=>{(function(t,e){if(typeof Xo=="object"&&typeof Ju=="object")Ju.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n=e();for(var r in n)(typeof Xo=="object"?Xo:t)[r]=n[r]}})(Xo,function(){return(()=>{"use strict";var t={470:n=>{function r(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function i(o,a){for(var c,d="",h=0,p=-1,m=0,v=0;v<=o.length;++v){if(v<o.length)c=o.charCodeAt(v);else{if(c===47)break;c=47}if(c===47){if(!(p===v-1||m===1))if(p!==v-1&&m===2){if(d.length<2||h!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var O=d.lastIndexOf("/");if(O!==d.length-1){O===-1?(d="",h=0):h=(d=d.slice(0,O)).length-1-d.lastIndexOf("/"),p=v,m=0;continue}}else if(d.length===2||d.length===1){d="",h=0,p=v,m=0;continue}}a&&(d.length>0?d+="/..":d="..",h=2)}else d.length>0?d+="/"+o.slice(p+1,v):d=o.slice(p+1,v),h=v-p-1;p=v,m=0}else c===46&&m!==-1?++m:m=-1}return d}var s={resolve:function(){for(var o,a="",c=!1,d=arguments.length-1;d>=-1&&!c;d--){var h;d>=0?h=arguments[d]:(o===void 0&&(o=process.cwd()),h=o),r(h),h.length!==0&&(a=h+"/"+a,c=h.charCodeAt(0)===47)}return a=i(a,!c),c?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(o){if(r(o),o.length===0)return".";var a=o.charCodeAt(0)===47,c=o.charCodeAt(o.length-1)===47;return(o=i(o,!a)).length!==0||a||(o="."),o.length>0&&c&&(o+="/"),a?"/"+o:o},isAbsolute:function(o){return r(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,a=0;a<arguments.length;++a){var c=arguments[a];r(c),c.length>0&&(o===void 0?o=c:o+="/"+c)}return o===void 0?".":s.normalize(o)},relative:function(o,a){if(r(o),r(a),o===a||(o=s.resolve(o))===(a=s.resolve(a)))return"";for(var c=1;c<o.length&&o.charCodeAt(c)===47;++c);for(var d=o.length,h=d-c,p=1;p<a.length&&a.charCodeAt(p)===47;++p);for(var m=a.length-p,v=h<m?h:m,O=-1,F=0;F<=v;++F){if(F===v){if(m>v){if(a.charCodeAt(p+F)===47)return a.slice(p+F+1);if(F===0)return a.slice(p+F)}else h>v&&(o.charCodeAt(c+F)===47?O=F:F===0&&(O=0));break}var N=o.charCodeAt(c+F);if(N!==a.charCodeAt(p+F))break;N===47&&(O=F)}var b="";for(F=c+O+1;F<=d;++F)F!==d&&o.charCodeAt(F)!==47||(b.length===0?b+="..":b+="/..");return b.length>0?b+a.slice(p+O):(p+=O,a.charCodeAt(p)===47&&++p,a.slice(p))},_makeLong:function(o){return o},dirname:function(o){if(r(o),o.length===0)return".";for(var a=o.charCodeAt(0),c=a===47,d=-1,h=!0,p=o.length-1;p>=1;--p)if((a=o.charCodeAt(p))===47){if(!h){d=p;break}}else h=!1;return d===-1?c?"/":".":c&&d===1?"//":o.slice(0,d)},basename:function(o,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');r(o);var c,d=0,h=-1,p=!0;if(a!==void 0&&a.length>0&&a.length<=o.length){if(a.length===o.length&&a===o)return"";var m=a.length-1,v=-1;for(c=o.length-1;c>=0;--c){var O=o.charCodeAt(c);if(O===47){if(!p){d=c+1;break}}else v===-1&&(p=!1,v=c+1),m>=0&&(O===a.charCodeAt(m)?--m==-1&&(h=c):(m=-1,h=v))}return d===h?h=v:h===-1&&(h=o.length),o.slice(d,h)}for(c=o.length-1;c>=0;--c)if(o.charCodeAt(c)===47){if(!p){d=c+1;break}}else h===-1&&(p=!1,h=c+1);return h===-1?"":o.slice(d,h)},extname:function(o){r(o);for(var a=-1,c=0,d=-1,h=!0,p=0,m=o.length-1;m>=0;--m){var v=o.charCodeAt(m);if(v!==47)d===-1&&(h=!1,d=m+1),v===46?a===-1?a=m:p!==1&&(p=1):a!==-1&&(p=-1);else if(!h){c=m+1;break}}return a===-1||d===-1||p===0||p===1&&a===d-1&&a===c+1?"":o.slice(a,d)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return function(a,c){var d=c.dir||c.root,h=c.base||(c.name||"")+(c.ext||"");return d?d===c.root?d+h:d+"/"+h:h}(0,o)},parse:function(o){r(o);var a={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return a;var c,d=o.charCodeAt(0),h=d===47;h?(a.root="/",c=1):c=0;for(var p=-1,m=0,v=-1,O=!0,F=o.length-1,N=0;F>=c;--F)if((d=o.charCodeAt(F))!==47)v===-1&&(O=!1,v=F+1),d===46?p===-1?p=F:N!==1&&(N=1):p!==-1&&(N=-1);else if(!O){m=F+1;break}return p===-1||v===-1||N===0||N===1&&p===v-1&&p===m+1?v!==-1&&(a.base=a.name=m===0&&h?o.slice(1,v):o.slice(m,v)):(m===0&&h?(a.name=o.slice(1,p),a.base=o.slice(1,v)):(a.name=o.slice(m,p),a.base=o.slice(m,v)),a.ext=o.slice(p,v)),m>0?a.dir=o.slice(0,m-1):h&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,n.exports=s},465:(n,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utils=r.URI=void 0;var s=i(796);Object.defineProperty(r,"URI",{enumerable:!0,get:function(){return s.URI}});var o=i(679);Object.defineProperty(r,"Utils",{enumerable:!0,get:function(){return o.Utils}})},674:(n,r)=>{if(Object.defineProperty(r,"__esModule",{value:!0}),r.isWindows=void 0,typeof process=="object")r.isWindows=process.platform==="win32";else if(typeof navigator=="object"){var i=navigator.userAgent;r.isWindows=i.indexOf("Windows")>=0}},796:function(n,r,i){var s,o,a=this&&this.__extends||(s=function(j,x){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,z){L.__proto__=z}||function(L,z){for(var de in z)Object.prototype.hasOwnProperty.call(z,de)&&(L[de]=z[de])})(j,x)},function(j,x){function L(){this.constructor=j}s(j,x),j.prototype=x===null?Object.create(x):(L.prototype=x.prototype,new L)});Object.defineProperty(r,"__esModule",{value:!0}),r.uriToFsPath=r.URI=void 0;var c=i(674),d=/^\w[\w\d+.-]*$/,h=/^\//,p=/^\/\//,m="",v="/",O=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,F=function(){function j(x,L,z,de,Z,le){le===void 0&&(le=!1),typeof x=="object"?(this.scheme=x.scheme||m,this.authority=x.authority||m,this.path=x.path||m,this.query=x.query||m,this.fragment=x.fragment||m):(this.scheme=function(ne,Ie){return ne||Ie?ne:"file"}(x,le),this.authority=L||m,this.path=function(ne,Ie){switch(ne){case"https":case"http":case"file":Ie?Ie[0]!==v&&(Ie=v+Ie):Ie=v}return Ie}(this.scheme,z||m),this.query=de||m,this.fragment=Z||m,function(ne,Ie){if(!ne.scheme&&Ie)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+ne.authority+'", path: "'+ne.path+'", query: "'+ne.query+'", fragment: "'+ne.fragment+'"}');if(ne.scheme&&!d.test(ne.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(ne.path){if(ne.authority){if(!h.test(ne.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(ne.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}(this,le))}return j.isUri=function(x){return x instanceof j||!!x&&typeof x.authority=="string"&&typeof x.fragment=="string"&&typeof x.path=="string"&&typeof x.query=="string"&&typeof x.scheme=="string"&&typeof x.fsPath=="function"&&typeof x.with=="function"&&typeof x.toString=="function"},Object.defineProperty(j.prototype,"fsPath",{get:function(){return W(this,!1)},enumerable:!1,configurable:!0}),j.prototype.with=function(x){if(!x)return this;var L=x.scheme,z=x.authority,de=x.path,Z=x.query,le=x.fragment;return L===void 0?L=this.scheme:L===null&&(L=m),z===void 0?z=this.authority:z===null&&(z=m),de===void 0?de=this.path:de===null&&(de=m),Z===void 0?Z=this.query:Z===null&&(Z=m),le===void 0?le=this.fragment:le===null&&(le=m),L===this.scheme&&z===this.authority&&de===this.path&&Z===this.query&&le===this.fragment?this:new b(L,z,de,Z,le)},j.parse=function(x,L){L===void 0&&(L=!1);var z=O.exec(x);return z?new b(z[2]||m,ke(z[4]||m),ke(z[5]||m),ke(z[7]||m),ke(z[9]||m),L):new b(m,m,m,m,m)},j.file=function(x){var L=m;if(c.isWindows&&(x=x.replace(/\\/g,v)),x[0]===v&&x[1]===v){var z=x.indexOf(v,2);z===-1?(L=x.substring(2),x=v):(L=x.substring(2,z),x=x.substring(z)||v)}return new b("file",L,x,m,m)},j.from=function(x){return new b(x.scheme,x.authority,x.path,x.query,x.fragment)},j.prototype.toString=function(x){return x===void 0&&(x=!1),ee(this,x)},j.prototype.toJSON=function(){return this},j.revive=function(x){if(x){if(x instanceof j)return x;var L=new b(x);return L._formatted=x.external,L._fsPath=x._sep===N?x.fsPath:null,L}return x},j}();r.URI=F;var N=c.isWindows?1:void 0,b=function(j){function x(){var L=j!==null&&j.apply(this,arguments)||this;return L._formatted=null,L._fsPath=null,L}return a(x,j),Object.defineProperty(x.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=W(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),x.prototype.toString=function(L){return L===void 0&&(L=!1),L?ee(this,!0):(this._formatted||(this._formatted=ee(this,!1)),this._formatted)},x.prototype.toJSON=function(){var L={$mid:1};return this._fsPath&&(L.fsPath=this._fsPath,L._sep=N),this._formatted&&(L.external=this._formatted),this.path&&(L.path=this.path),this.scheme&&(L.scheme=this.scheme),this.authority&&(L.authority=this.authority),this.query&&(L.query=this.query),this.fragment&&(L.fragment=this.fragment),L},x}(F),w=((o={})[58]="%3A",o[47]="%2F",o[63]="%3F",o[35]="%23",o[91]="%5B",o[93]="%5D",o[64]="%40",o[33]="%21",o[36]="%24",o[38]="%26",o[39]="%27",o[40]="%28",o[41]="%29",o[42]="%2A",o[43]="%2B",o[44]="%2C",o[59]="%3B",o[61]="%3D",o[32]="%20",o);function q(j,x){for(var L=void 0,z=-1,de=0;de<j.length;de++){var Z=j.charCodeAt(de);if(Z>=97&&Z<=122||Z>=65&&Z<=90||Z>=48&&Z<=57||Z===45||Z===46||Z===95||Z===126||x&&Z===47)z!==-1&&(L+=encodeURIComponent(j.substring(z,de)),z=-1),L!==void 0&&(L+=j.charAt(de));else{L===void 0&&(L=j.substr(0,de));var le=w[Z];le!==void 0?(z!==-1&&(L+=encodeURIComponent(j.substring(z,de)),z=-1),L+=le):z===-1&&(z=de)}}return z!==-1&&(L+=encodeURIComponent(j.substring(z))),L!==void 0?L:j}function k(j){for(var x=void 0,L=0;L<j.length;L++){var z=j.charCodeAt(L);z===35||z===63?(x===void 0&&(x=j.substr(0,L)),x+=w[z]):x!==void 0&&(x+=j[L])}return x!==void 0?x:j}function W(j,x){var L;return L=j.authority&&j.path.length>1&&j.scheme==="file"?"//"+j.authority+j.path:j.path.charCodeAt(0)===47&&(j.path.charCodeAt(1)>=65&&j.path.charCodeAt(1)<=90||j.path.charCodeAt(1)>=97&&j.path.charCodeAt(1)<=122)&&j.path.charCodeAt(2)===58?x?j.path.substr(1):j.path[1].toLowerCase()+j.path.substr(2):j.path,c.isWindows&&(L=L.replace(/\//g,"\\")),L}function ee(j,x){var L=x?k:q,z="",de=j.scheme,Z=j.authority,le=j.path,ne=j.query,Ie=j.fragment;if(de&&(z+=de,z+=":"),(Z||de==="file")&&(z+=v,z+=v),Z){var Te=Z.indexOf("@");if(Te!==-1){var tt=Z.substr(0,Te);Z=Z.substr(Te+1),(Te=tt.indexOf(":"))===-1?z+=L(tt,!1):(z+=L(tt.substr(0,Te),!1),z+=":",z+=L(tt.substr(Te+1),!1)),z+="@"}(Te=(Z=Z.toLowerCase()).indexOf(":"))===-1?z+=L(Z,!1):(z+=L(Z.substr(0,Te),!1),z+=Z.substr(Te))}if(le){if(le.length>=3&&le.charCodeAt(0)===47&&le.charCodeAt(2)===58)(Ze=le.charCodeAt(1))>=65&&Ze<=90&&(le="/"+String.fromCharCode(Ze+32)+":"+le.substr(3));else if(le.length>=2&&le.charCodeAt(1)===58){var Ze;(Ze=le.charCodeAt(0))>=65&&Ze<=90&&(le=String.fromCharCode(Ze+32)+":"+le.substr(2))}z+=L(le,!0)}return ne&&(z+="?",z+=L(ne,!1)),Ie&&(z+="#",z+=x?Ie:q(Ie,!1)),z}function ve(j){try{return decodeURIComponent(j)}catch{return j.length>3?j.substr(0,3)+ve(j.substr(3)):j}}r.uriToFsPath=W;var we=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ke(j){return j.match(we)?j.replace(we,function(x){return ve(x)}):j}},679:function(n,r,i){var s=this&&this.__spreadArrays||function(){for(var d=0,h=0,p=arguments.length;h<p;h++)d+=arguments[h].length;var m=Array(d),v=0;for(h=0;h<p;h++)for(var O=arguments[h],F=0,N=O.length;F<N;F++,v++)m[v]=O[F];return m};Object.defineProperty(r,"__esModule",{value:!0}),r.Utils=void 0;var o,a=i(470),c=a.posix||a;(o=r.Utils||(r.Utils={})).joinPath=function(d){for(var h=[],p=1;p<arguments.length;p++)h[p-1]=arguments[p];return d.with({path:c.join.apply(c,s([d.path],h))})},o.resolvePath=function(d){for(var h=[],p=1;p<arguments.length;p++)h[p-1]=arguments[p];var m=d.path||"/";return d.with({path:c.resolve.apply(c,s([m],h))})},o.dirname=function(d){var h=c.dirname(d.path);return h.length===1&&h.charCodeAt(0)===46?d:d.with({path:h})},o.basename=function(d){return c.basename(d.path)},o.extname=function(d){return c.extname(d.path)}}},e={};return function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}(465)})()})});var Qu=T(Ii=>{"use strict";var Iv=Ii&&Ii.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.findPackageRoot=void 0;var JT=Iv(require("fs/promises")),Vo=Iv(require("path"));async function QT(t,e="package.json"){let n=t;for(;;){let r=Vo.default.join(n,e);try{if((await JT.default.stat(r)).isFile())return n;let s=Vo.default.dirname(n);if(!Vo.default.relative(s,n))return;n=s}catch(i){if(i.code==="ENOENT"||i.code==="ENOTDIR"){let s=Vo.default.dirname(n);if(!Vo.default.relative(s,n))return;n=s}else throw i}}}Ii.findPackageRoot=QT});var Av=T(Ni=>{"use strict";var Nv=Ni&&Ni.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.runProcessFindLine=void 0;var YT=Nv(require("child_process")),ZT=Nv(require("readline"));function e0(t,e,n,r){return new Promise((i,s)=>{let o=YT.default.spawn(t,e,n),a=ZT.default.createInterface({input:o.stdout}),c,d,h=!1,p=!1,m=()=>{h||d===void 0||!p||(h=!0,d===0?i(c):s(new Error(`Command "${t}" exited with code ${d}.`)))},v=O=>{h=!0,o.removeAllListeners(),a.close();try{o.kill()}catch{}s(O)};a.on("line",O=>{if(!(h||c!==void 0))try{let F=r(O);F!==void 0&&(c=F),m()}catch(F){v(F)}}),a.on("close",()=>{h||(p=!0,m())}),o.on("error",v),o.on("exit",(O,F)=>{d=O??F,m()})})}Ni.runProcessFindLine=e0});var tl=T(kn=>{"use strict";var Lv=kn&&kn.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},at=kn&&kn.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},jv=kn&&kn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Jo,vn,va,ri,Yu,Wv,$v,Hv;Object.defineProperty(kn,"__esModule",{value:!0});kn.GlobalPathResolver=void 0;var t0=jv(require("os")),Zu=jv(require("path")),el=Av(),zv=class{constructor(e){Jo.add(this),vn.set(this,void 0),va.set(this,{yarn:void 0,npm:void 0,pnpm:void 0}),ri.set(this,void 0),Yu.set(this,{yarn:at(this,Jo,"m",Wv).bind(this),npm:at(this,Jo,"m",$v).bind(this),pnpm:at(this,Jo,"m",Hv).bind(this)}),Lv(this,vn,e,"f"),Lv(this,ri,t0.default.platform()==="win32","f")}async resolve(e){let n=at(this,va,"f")[e];if(n)return n;let r=at(this,Yu,"f")[e];if(!r){at(this,vn,"f")?.warn("Unsupported package manager.",{packageManager:e});return}try{let i=await r();return i&&(at(this,va,"f")[e]=i),i}catch(i){at(this,vn,"f")?.warn("Failed to resolve global node_modules path.",{packageManager:e,error:i});return}}};kn.GlobalPathResolver=zv;vn=new WeakMap,va=new WeakMap,ri=new WeakMap,Yu=new WeakMap,Jo=new WeakSet,Wv=async function(){let e=r=>{try{return JSON.parse(r)}catch{return}},n=await(0,el.runProcessFindLine)("yarn",["global","dir","--json"],at(this,ri,"f")?{shell:!0}:void 0,r=>{let i=e(r);if(!i||i.type!=="log"||!i.data)return;let s=Zu.default.join(i.data,"node_modules");return at(this,vn,"f")?.debug("Yarn returned global node_modules path.",{path:s}),s});if(!n){at(this,vn,"f")?.warn('"yarn global dir --json" did not return a path.');return}return n},$v=async function(){let e=await(0,el.runProcessFindLine)("npm",["config","get","prefix"],at(this,ri,"f")?{shell:!0}:void 0,n=>{let r=n.trim();if(!r)return;let i=at(this,ri,"f")?Zu.default.join(r,"node_modules"):Zu.default.join(r,"lib/node_modules");return at(this,vn,"f")?.debug("npm returned global node_modules path.",{path:i}),i});if(!e){at(this,vn,"f")?.warn('"npm config get prefix" did not return a path.');return}return e},Hv=async function(){let e=await(0,el.runProcessFindLine)("pnpm",["root","-g"],at(this,ri,"f")?{shell:!0}:void 0,n=>{let r=n.trim();if(!!r)return at(this,vn,"f")?.debug("pnpm returned global node_modules path.",{path:r}),r});if(!e){at(this,vn,"f")?.warn('"pnpm root -g" did not return a path.');return}return e}});var ya=T(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.thenable=Ye.typedArray=Ye.stringArray=Ye.array=Ye.func=Ye.error=Ye.number=Ye.string=Ye.boolean=void 0;function n0(t){return t===!0||t===!1}Ye.boolean=n0;function Kv(t){return typeof t=="string"||t instanceof String}Ye.string=Kv;function r0(t){return typeof t=="number"||t instanceof Number}Ye.number=r0;function i0(t){return t instanceof Error}Ye.error=i0;function Uv(t){return typeof t=="function"}Ye.func=Uv;function Bv(t){return Array.isArray(t)}Ye.array=Bv;function o0(t){return Bv(t)&&t.every(e=>Kv(e))}Ye.stringArray=o0;function s0(t,e){return Array.isArray(t)&&t.every(e)}Ye.typedArray=s0;function a0(t){return t&&Uv(t.then)}Ye.thenable=a0});var nl=T(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.generateUuid=nn.parse=nn.isUUID=nn.v4=nn.empty=void 0;var _a=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},pe=class extends _a{constructor(){super([pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),"-",pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),"-","4",pe._randomHex(),pe._randomHex(),pe._randomHex(),"-",pe._oneOf(pe._timeHighBits),pe._randomHex(),pe._randomHex(),pe._randomHex(),"-",pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex(),pe._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return pe._oneOf(pe._chars)}};pe._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];pe._timeHighBits=["8","9","a","b"];nn.empty=new _a("00000000-0000-0000-0000-000000000000");function Gv(){return new pe}nn.v4=Gv;var c0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Xv(t){return c0.test(t)}nn.isUUID=Xv;function u0(t){if(!Xv(t))throw new Error("invalid uuid");return new _a(t)}nn.parse=u0;function l0(){return Gv().asHex()}nn.generateUuid=l0});var Jv=T(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.attachPartialResult=qr.ProgressFeature=qr.attachWorkDone=void 0;var Tr=ie(),d0=nl(),rr=class{constructor(e,n){this._connection=e,this._token=n,rr.Instances.set(this._token,this)}begin(e,n,r,i){let s={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(Tr.WorkDoneProgress.type,this._token,s)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(Tr.WorkDoneProgress.type,this._token,r)}done(){rr.Instances.delete(this._token),this._connection.sendProgress(Tr.WorkDoneProgress.type,this._token,{kind:"end"})}};rr.Instances=new Map;var rl=class extends rr{constructor(e,n){super(e,n);this._source=new Tr.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},wa=class{constructor(){}begin(){}report(){}done(){}},il=class extends wa{constructor(){super();this._source=new Tr.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function f0(t,e){if(e===void 0||e.workDoneToken===void 0)return new wa;let n=e.workDoneToken;return delete e.workDoneToken,new rr(t,n)}qr.attachWorkDone=f0;var h0=t=>class extends t{constructor(){super();this._progressSupported=!1}initialize(e){var n;((n=e==null?void 0:e.window)===null||n===void 0?void 0:n.workDoneProgress)===!0&&(this._progressSupported=!0,this.connection.onNotification(Tr.WorkDoneProgressCancelNotification.type,r=>{let i=rr.Instances.get(r.token);(i instanceof rl||i instanceof il)&&i.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new wa:new rr(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=d0.generateUuid();return this.connection.sendRequest(Tr.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new rl(this.connection,e))}else return Promise.resolve(new il)}};qr.ProgressFeature=h0;var ol;(function(t){t.type=new Tr.ProgressType})(ol||(ol={}));var Vv=class{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(ol.type,this._token,e)}};function g0(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new Vv(t,n)}qr.attachPartialResult=g0});var Qv=T(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.ConfigurationFeature=void 0;var p0=ie(),m0=ya(),v0=t=>class extends t{getConfiguration(e){return e?m0.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(p0.ConfigurationRequest.type,n).then(r=>Array.isArray(e)?r:r[0])}};ba.ConfigurationFeature=v0});var Yv=T(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.WorkspaceFoldersFeature=void 0;var Ra=ie(),y0=t=>class extends t{initialize(e){let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Ra.Emitter,this.connection.onNotification(Ra.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(Ra.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(Ra.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Ca.WorkspaceFoldersFeature=y0});var Zv=T(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.CallHierarchyFeature=void 0;var sl=ie(),_0=t=>class extends t{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(sl.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))},onIncomingCalls:e=>{let n=sl.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:e=>{let n=sl.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Sa.CallHierarchyFeature=_0});var cl=T(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.SemanticTokensBuilder=Ai.SemanticTokensFeature=void 0;var al=ie(),w0=t=>class extends t{get semanticTokens(){return{on:e=>{let n=al.SemanticTokensRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:e=>{let n=al.SemanticTokensDeltaRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:e=>{let n=al.SemanticTokensRangeRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ai.SemanticTokensFeature=w0;var ey=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,s){let o=e,a=n;this._dataLen>0&&(o-=this._prevLine,o===0&&(a-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=a,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){if(this._prevData!==void 0){let e=this._prevData.length,n=this._data.length,r=0;for(;r<n&&r<e&&this._prevData[r]===this._data[r];)r++;if(r<n&&r<e){let i=0;for(;i<n&&i<e&&this._prevData[e-1-i]===this._data[n-1-i];)i++;let s=this._data.slice(r,n-i);return{resultId:this.id,edits:[{start:r,deleteCount:e-i-r,data:s}]}}else return r<n?{resultId:this.id,edits:[{start:r,deleteCount:0,data:this._data.slice(r)}]}:r<e?{resultId:this.id,edits:[{start:r,deleteCount:e-r}]}:{resultId:this.id,edits:[]}}else return this.build()}};Ai.SemanticTokensBuilder=ey});var ty=T(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.ShowDocumentFeature=void 0;var b0=ie(),R0=t=>class extends t{showDocument(e){return this.connection.sendRequest(b0.ShowDocumentRequest.type,e)}};Pa.ShowDocumentFeature=R0});var ny=T(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.FileOperationsFeature=void 0;var Li=ie(),C0=t=>class extends t{onDidCreateFiles(e){this.connection.onNotification(Li.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){this.connection.onNotification(Li.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){this.connection.onNotification(Li.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(Li.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(Li.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(Li.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}};Da.FileOperationsFeature=C0});var ry=T(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.LinkedEditingRangeFeature=void 0;var S0=ie(),P0=t=>class extends t{onLinkedEditingRange(e){this.connection.onRequest(S0.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}};Ta.LinkedEditingRangeFeature=P0});var iy=T(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.MonikerFeature=void 0;var D0=ie(),T0=t=>class extends t{get moniker(){return{on:e=>{let n=D0.MonikerRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};qa.MonikerFeature=T0});var vl=T(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.createConnection=Re.combineFeatures=Re.combineLanguagesFeatures=Re.combineWorkspaceFeatures=Re.combineWindowFeatures=Re.combineClientFeatures=Re.combineTracerFeatures=Re.combineTelemetryFeatures=Re.combineConsoleFeatures=Re._LanguagesImpl=Re.BulkUnregistration=Re.BulkRegistration=Re.ErrorMessageTracker=Re.TextDocuments=void 0;var H=ie(),rn=ya(),ul=nl(),ce=Jv(),q0=Qv(),E0=Yv(),O0=Zv(),F0=cl(),k0=ty(),M0=ny(),x0=ry(),I0=iy();function ll(t){if(t!==null)return t}var oy=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new H.Emitter,this._onDidOpen=new H.Emitter,this._onDidClose=new H.Emitter,this._onDidSave=new H.Emitter,this._onWillSave=new H.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=H.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(n=>{let r=n.textDocument,i=this._configuration.create(r.uri,r.languageId,r.version,r.text);this._documents[r.uri]=i;let s=Object.freeze({document:i});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)}),e.onDidChangeTextDocument(n=>{let r=n.textDocument,i=n.contentChanges;if(i.length===0)return;let s=this._documents[r.uri],{version:o}=r;if(o==null)throw new Error(`Received document change event for ${r.uri} without valid version identifier`);s=this._configuration.update(s,i,o),this._documents[r.uri]=s,this._onDidChangeContent.fire(Object.freeze({document:s}))}),e.onDidCloseTextDocument(n=>{let r=this._documents[n.textDocument.uri];r&&(delete this._documents[n.textDocument.uri],this._onDidClose.fire(Object.freeze({document:r})))}),e.onWillSaveTextDocument(n=>{let r=this._documents[n.textDocument.uri];r&&this._onWillSave.fire(Object.freeze({document:r,reason:n.reason}))}),e.onWillSaveTextDocumentWaitUntil((n,r)=>{let i=this._documents[n.textDocument.uri];return i&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:i,reason:n.reason}),r):[]}),e.onDidSaveTextDocument(n=>{let r=this._documents[n.textDocument.uri];r&&this._onDidSave.fire(Object.freeze({document:r}))})}};Re.TextDocuments=oy;var sy=class{constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};Re.ErrorMessageTracker=sy;var dl=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(H.MessageType.Error,e)}warn(e){this.send(H.MessageType.Warning,e)}info(e){this.send(H.MessageType.Info,e)}log(e){this.send(H.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(H.LogMessageNotification.type,{type:e,message:n})}},ay=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:H.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(H.ShowMessageRequest.type,r).then(ll)}showWarningMessage(e,...n){let r={type:H.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(H.ShowMessageRequest.type,r).then(ll)}showInformationMessage(e,...n){let r={type:H.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(H.ShowMessageRequest.type,r).then(ll)}},cy=k0.ShowDocumentFeature(ce.ProgressFeature(ay)),N0;(function(t){function e(){return new fl}t.create=e})(N0=Re.BulkRegistration||(Re.BulkRegistration={}));var fl=class{constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=rn.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=ul.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},A0;(function(t){function e(){return new Ea(void 0,[])}t.create=e})(A0=Re.BulkUnregistration||(Re.BulkUnregistration={}));var Ea=class{constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(H.UnregistrationRequest.type,n).then(void 0,r=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=rn.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(H.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},s=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},hl=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof fl?this.registerMany(e):e instanceof Ea?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=rn.string(n)?n:n.method,s=ul.generateUuid(),o={registrations:[{id:s,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(H.RegistrationRequest.type,o).then(a=>(e.add({id:s,method:i}),e),a=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(a)))}registerSingle2(e,n){let r=rn.string(e)?e:e.method,i=ul.generateUuid(),s={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(H.RegistrationRequest.type,s).then(o=>H.Disposable.create(()=>{this.unregisterSingle(i,r)}),o=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(o)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(H.UnregistrationRequest.type,r).then(void 0,i=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(H.RegistrationRequest.type,n).then(()=>new Ea(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},uy=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(H.ApplyWorkspaceEditRequest.type,r)}},ly=M0.FileOperationsFeature(E0.WorkspaceFoldersFeature(q0.ConfigurationFeature(uy))),gl=class{constructor(){this._trace=H.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==H.Trace.Off&&this.connection.sendNotification(H.LogTraceNotification.type,{message:e,verbose:this._trace===H.Trace.Verbose?n:void 0})}},pl=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(H.TelemetryEventNotification.type,e)}},ml=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return ce.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,n){return ce.attachPartialResult(this.connection,n)}};Re._LanguagesImpl=ml;var dy=I0.MonikerFeature(x0.LinkedEditingRangeFeature(F0.SemanticTokensFeature(O0.CallHierarchyFeature(ml))));function fy(t,e){return function(n){return e(t(n))}}Re.combineConsoleFeatures=fy;function hy(t,e){return function(n){return e(t(n))}}Re.combineTelemetryFeatures=hy;function gy(t,e){return function(n){return e(t(n))}}Re.combineTracerFeatures=gy;function py(t,e){return function(n){return e(t(n))}}Re.combineClientFeatures=py;function my(t,e){return function(n){return e(t(n))}}Re.combineWindowFeatures=my;function vy(t,e){return function(n){return e(t(n))}}Re.combineWorkspaceFeatures=vy;function L0(t,e){return function(n){return e(t(n))}}Re.combineLanguagesFeatures=L0;function j0(t,e){function n(i,s,o){return i&&s?o(i,s):i||s}return{__brand:"features",console:n(t.console,e.console,fy),tracer:n(t.tracer,e.tracer,gy),telemetry:n(t.telemetry,e.telemetry,hy),client:n(t.client,e.client,py),window:n(t.window,e.window,my),workspace:n(t.workspace,e.workspace,vy)}}Re.combineFeatures=j0;function W0(t,e,n){let r=n&&n.console?new(n.console(dl)):new dl,i=t(r);r.rawAttach(i);let s=n&&n.tracer?new(n.tracer(gl)):new gl,o=n&&n.telemetry?new(n.telemetry(pl)):new pl,a=n&&n.client?new(n.client(hl)):new hl,c=n&&n.window?new(n.window(cy)):new cy,d=n&&n.workspace?new(n.workspace(ly)):new ly,h=n&&n.languages?new(n.languages(dy)):new dy,p=[r,s,o,a,c,d,h];function m(b){return b instanceof Promise?b:rn.thenable(b)?new Promise((w,q)=>{b.then(k=>w(k),k=>q(k))}):Promise.resolve(b)}let v,O,F,N={listen:()=>i.listen(),sendRequest:(b,...w)=>i.sendRequest(rn.string(b)?b:b.method,...w),onRequest:(b,w)=>i.onRequest(b,w),sendNotification:(b,w)=>{let q=rn.string(b)?b:b.method;arguments.length===1?i.sendNotification(q):i.sendNotification(q,w)},onNotification:(b,w)=>i.onNotification(b,w),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:b=>O=b,onInitialized:b=>i.onNotification(H.InitializedNotification.type,b),onShutdown:b=>v=b,onExit:b=>F=b,get console(){return r},get telemetry(){return o},get tracer(){return s},get client(){return a},get window(){return c},get workspace(){return d},get languages(){return h},onDidChangeConfiguration:b=>i.onNotification(H.DidChangeConfigurationNotification.type,b),onDidChangeWatchedFiles:b=>i.onNotification(H.DidChangeWatchedFilesNotification.type,b),__textDocumentSync:void 0,onDidOpenTextDocument:b=>i.onNotification(H.DidOpenTextDocumentNotification.type,b),onDidChangeTextDocument:b=>i.onNotification(H.DidChangeTextDocumentNotification.type,b),onDidCloseTextDocument:b=>i.onNotification(H.DidCloseTextDocumentNotification.type,b),onWillSaveTextDocument:b=>i.onNotification(H.WillSaveTextDocumentNotification.type,b),onWillSaveTextDocumentWaitUntil:b=>i.onRequest(H.WillSaveTextDocumentWaitUntilRequest.type,b),onDidSaveTextDocument:b=>i.onNotification(H.DidSaveTextDocumentNotification.type,b),sendDiagnostics:b=>i.sendNotification(H.PublishDiagnosticsNotification.type,b),onHover:b=>i.onRequest(H.HoverRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),void 0)),onCompletion:b=>i.onRequest(H.CompletionRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onCompletionResolve:b=>i.onRequest(H.CompletionResolveRequest.type,b),onSignatureHelp:b=>i.onRequest(H.SignatureHelpRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),void 0)),onDeclaration:b=>i.onRequest(H.DeclarationRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onDefinition:b=>i.onRequest(H.DefinitionRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onTypeDefinition:b=>i.onRequest(H.TypeDefinitionRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onImplementation:b=>i.onRequest(H.ImplementationRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onReferences:b=>i.onRequest(H.ReferencesRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onDocumentHighlight:b=>i.onRequest(H.DocumentHighlightRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onDocumentSymbol:b=>i.onRequest(H.DocumentSymbolRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onWorkspaceSymbol:b=>i.onRequest(H.WorkspaceSymbolRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onCodeAction:b=>i.onRequest(H.CodeActionRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onCodeActionResolve:b=>i.onRequest(H.CodeActionResolveRequest.type,(w,q)=>b(w,q)),onCodeLens:b=>i.onRequest(H.CodeLensRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onCodeLensResolve:b=>i.onRequest(H.CodeLensResolveRequest.type,(w,q)=>b(w,q)),onDocumentFormatting:b=>i.onRequest(H.DocumentFormattingRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),void 0)),onDocumentRangeFormatting:b=>i.onRequest(H.DocumentRangeFormattingRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),void 0)),onDocumentOnTypeFormatting:b=>i.onRequest(H.DocumentOnTypeFormattingRequest.type,(w,q)=>b(w,q)),onRenameRequest:b=>i.onRequest(H.RenameRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),void 0)),onPrepareRename:b=>i.onRequest(H.PrepareRenameRequest.type,(w,q)=>b(w,q)),onDocumentLinks:b=>i.onRequest(H.DocumentLinkRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onDocumentLinkResolve:b=>i.onRequest(H.DocumentLinkResolveRequest.type,(w,q)=>b(w,q)),onDocumentColor:b=>i.onRequest(H.DocumentColorRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onColorPresentation:b=>i.onRequest(H.ColorPresentationRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onFoldingRanges:b=>i.onRequest(H.FoldingRangeRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onSelectionRanges:b=>i.onRequest(H.SelectionRangeRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),ce.attachPartialResult(i,w))),onExecuteCommand:b=>i.onRequest(H.ExecuteCommandRequest.type,(w,q)=>b(w,q,ce.attachWorkDone(i,w),void 0)),dispose:()=>i.dispose()};for(let b of p)b.attach(N);return i.onRequest(H.InitializeRequest.type,b=>{e.initialize(b),rn.string(b.trace)&&(s.trace=H.Trace.fromString(b.trace));for(let w of p)w.initialize(b.capabilities);if(O){let w=O(b,new H.CancellationTokenSource().token,ce.attachWorkDone(i,b),void 0);return m(w).then(q=>{if(q instanceof H.ResponseError)return q;let k=q;k||(k={capabilities:{}});let W=k.capabilities;W||(W={},k.capabilities=W),W.textDocumentSync===void 0||W.textDocumentSync===null?W.textDocumentSync=rn.number(N.__textDocumentSync)?N.__textDocumentSync:H.TextDocumentSyncKind.None:!rn.number(W.textDocumentSync)&&!rn.number(W.textDocumentSync.change)&&(W.textDocumentSync.change=rn.number(N.__textDocumentSync)?N.__textDocumentSync:H.TextDocumentSyncKind.None);for(let ee of p)ee.fillServerCapabilities(W);return k})}else{let w={capabilities:{textDocumentSync:H.TextDocumentSyncKind.None}};for(let q of p)q.fillServerCapabilities(w.capabilities);return w}}),i.onRequest(H.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,v)return v(new H.CancellationTokenSource().token)}),i.onNotification(H.ExitNotification.type,()=>{try{F&&F()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(H.SetTraceNotification.type,b=>{s.trace=H.Trace.fromString(b.value)}),N}Re.createConnection=W0});var _y=T(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.resolveModulePath=wt.FileSystem=wt.resolveGlobalYarnPath=wt.resolveGlobalNodePath=wt.resolve=wt.uriToFilePath=void 0;var $0=require("url"),yn=require("path"),yl=require("fs"),_l=require("child_process");function H0(t){let e=$0.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let s=n[0],o=n[1];s.length===0&&o.length>1&&o[1]===":"&&n.shift()}return yn.normalize(n.join("/"))}wt.uriToFilePath=H0;function wl(){return process.platform==="win32"}function Oa(t,e,n,r){let i="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((o,a)=>{let c=process.env,d=Object.create(null);Object.keys(c).forEach(h=>d[h]=c[h]),e&&yl.existsSync(e)&&(d[i]?d[i]=e+yn.delimiter+d[i]:d[i]=e,r&&r(`NODE_PATH value is: ${d[i]}`)),d.ELECTRON_RUN_AS_NODE="1";try{let h=_l.fork("",[],{cwd:n,env:d,execArgv:["-e",s]});if(h.pid===void 0){a(new Error(`Starting process to resolve node module  ${t} failed`));return}h.on("error",m=>{a(m)}),h.on("message",m=>{m.c==="r"&&(h.send({c:"e"}),m.s?o(m.r):a(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};h.send(p)}catch(h){a(h)}})}wt.resolve=Oa;function bl(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(s=>n[s]=process.env[s]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};wl()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let s=_l.spawnSync(e,["config","get","prefix"],r).stdout;if(!s){t&&t("'npm config get prefix' didn't return a value.");return}let o=s.trim();return t&&t(`'npm config get prefix' value is: ${o}`),o.length>0?wl()?yn.join(o,"node_modules"):yn.join(o,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}wt.resolveGlobalNodePath=bl;function z0(t){let e="yarn",n={encoding:"utf8"};wl()&&(e="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=_l.spawnSync(e,["global","dir","--json"],n),s=i.stdout;if(!s){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let o=s.trim().split(/\r?\n/);for(let a of o)try{let c=JSON.parse(a);if(c.type==="log")return yn.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}wt.resolveGlobalYarnPath=z0;var yy;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!yl.existsSync(__filename.toUpperCase())||!yl.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=n;function r(i,s){return n()?yn.normalize(s).indexOf(yn.normalize(i))===0:yn.normalize(s).toLowerCase().indexOf(yn.normalize(i).toLowerCase())===0}t.isParent=r})(yy=wt.FileSystem||(wt.FileSystem={}));function K0(t,e,n,r){return n?(yn.isAbsolute(n)||(n=yn.join(t,n)),Oa(e,n,n,r).then(i=>yy.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Oa(e,bl(r),t,r))):Oa(e,bl(r),t,r)}wt.resolveModulePath=K0});var by=T(jt=>{"use strict";var U0=jt&&jt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),wy=jt&&jt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&U0(e,t,n)};Object.defineProperty(jt,"__esModule",{value:!0});jt.ProposedFeatures=jt.SemanticTokensBuilder=void 0;var B0=cl();Object.defineProperty(jt,"SemanticTokensBuilder",{enumerable:!0,get:function(){return B0.SemanticTokensBuilder}});wy(ie(),jt);wy(vl(),jt);var G0;(function(t){t.all={__brand:"features"}})(G0=jt.ProposedFeatures||(jt.ProposedFeatures={}))});var Py=T(Wt=>{"use strict";var X0=Wt&&Wt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ry=Wt&&Wt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&X0(e,t,n)};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.createConnection=Wt.Files=void 0;var Rl=ya(),V0=vl(),Qo=_y(),ii=Wo();Ry(Wo(),Wt);Ry(by(),Wt);var J0;(function(t){t.uriToFilePath=Qo.uriToFilePath,t.resolveGlobalNodePath=Qo.resolveGlobalNodePath,t.resolveGlobalYarnPath=Qo.resolveGlobalYarnPath,t.resolve=Qo.resolve,t.resolveModulePath=Qo.resolveModulePath})(J0=Wt.Files||(Wt.Files={}));var Cy;function Fa(){if(Cy!==void 0)try{Cy.end()}catch{}}var ji=!1,Sy;function Q0(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(Sy=setInterval(()=>{try{process.kill(r,0)}catch{Fa(),process.exit(ji?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}Q0();var Y0={initialize:t=>{let e=t.processId;Rl.number(e)&&Sy===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(ji?0:1)}},3e3)},get shutdownReceived(){return ji},set shutdownReceived(t){ji=t},exit:t=>{Fa(),process.exit(t)}};function Z0(t,e,n,r){let i,s,o,a;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),ii.ConnectionStrategy.is(t)||ii.ConnectionOptions.is(t)?a=t:(s=t,o=e,a=n),eq(s,o,a,i)}Wt.createConnection=Z0;function eq(t,e,n,r){if(!t&&!e&&process.argv.length>2){let a,c,d=process.argv.slice(2);for(let h=0;h<d.length;h++){let p=d[h];if(p==="--node-ipc"){t=new ii.IPCMessageReader(process),e=new ii.IPCMessageWriter(process);break}else if(p==="--stdio"){t=process.stdin,e=process.stdout;break}else if(p==="--socket"){a=parseInt(d[h+1]);break}else if(p==="--pipe"){c=d[h+1];break}else{var i=p.split("=");if(i[0]==="--socket"){a=parseInt(i[1]);break}else if(i[0]==="--pipe"){c=i[1];break}}}if(a){let h=ii.createServerSocketTransport(a);t=h[0],e=h[1]}else if(c){let h=ii.createServerPipeTransport(c);t=h[0],e=h[1]}}var s="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+s);if(!e)throw new Error("Connection output stream is not set. "+s);if(Rl.func(t.read)&&Rl.func(t.on)){let a=t;a.on("end",()=>{Fa(),process.exit(ji?0:1)}),a.on("close",()=>{Fa(),process.exit(ji?0:1)})}let o=a=>ii.createProtocolConnection(t,e,a,n);return V0.createConnection(o,Y0,r)}});var Cl=T((Rk,Dy)=>{"use strict";Dy.exports=Py()});var xy=T((Ck,My)=>{var Mn=-1,_n=1,Ot=0;function Yo(t,e,n,r){if(t===e)return t?[[Ot,t]]:[];if(n!=null){var i=oq(t,e,n);if(i)return i}var s=Sl(t,e),o=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=Pl(t,e);var a=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var c=tq(t,e);return o&&c.unshift([Ot,o]),a&&c.push([Ot,a]),qy(c,r),c}function tq(t,e){var n;if(!t)return[[_n,e]];if(!e)return[[Mn,t]];var r=t.length>e.length?t:e,i=t.length>e.length?e:t,s=r.indexOf(i);if(s!==-1)return n=[[_n,r.substring(0,s)],[Ot,i],[_n,r.substring(s+i.length)]],t.length>e.length&&(n[0][0]=n[2][0]=Mn),n;if(i.length===1)return[[Mn,t],[_n,e]];var o=rq(t,e);if(o){var a=o[0],c=o[1],d=o[2],h=o[3],p=o[4],m=Yo(a,d),v=Yo(c,h);return m.concat([[Ot,p]],v)}return nq(t,e)}function nq(t,e){for(var n=t.length,r=e.length,i=Math.ceil((n+r)/2),s=i,o=2*i,a=new Array(o),c=new Array(o),d=0;d<o;d++)a[d]=-1,c[d]=-1;a[s+1]=0,c[s+1]=0;for(var h=n-r,p=h%2!=0,m=0,v=0,O=0,F=0,N=0;N<i;N++){for(var b=-N+m;b<=N-v;b+=2){var w=s+b,q;b===-N||b!==N&&a[w-1]<a[w+1]?q=a[w+1]:q=a[w-1]+1;for(var k=q-b;q<n&&k<r&&t.charAt(q)===e.charAt(k);)q++,k++;if(a[w]=q,q>n)v+=2;else if(k>r)m+=2;else if(p){var W=s+h-b;if(W>=0&&W<o&&c[W]!==-1){var ee=n-c[W];if(q>=ee)return Ty(t,e,q,k)}}}for(var ve=-N+O;ve<=N-F;ve+=2){var W=s+ve,ee;ve===-N||ve!==N&&c[W-1]<c[W+1]?ee=c[W+1]:ee=c[W-1]+1;for(var we=ee-ve;ee<n&&we<r&&t.charAt(n-ee-1)===e.charAt(r-we-1);)ee++,we++;if(c[W]=ee,ee>n)F+=2;else if(we>r)O+=2;else if(!p){var w=s+h-ve;if(w>=0&&w<o&&a[w]!==-1){var q=a[w],k=s+q-w;if(ee=n-ee,q>=ee)return Ty(t,e,q,k)}}}}return[[Mn,t],[_n,e]]}function Ty(t,e,n,r){var i=t.substring(0,n),s=e.substring(0,r),o=t.substring(n),a=e.substring(r),c=Yo(i,s),d=Yo(o,a);return c.concat(d)}function Sl(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(s,i)==e.substring(s,i)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return Ey(t.charCodeAt(i-1))&&i--,i}function Pl(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return Oy(t.charCodeAt(t.length-i))&&i--,i}function rq(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||r.length*2<n.length)return null;function i(v,O,F){for(var N=v.substring(F,F+Math.floor(v.length/4)),b=-1,w="",q,k,W,ee;(b=O.indexOf(N,b+1))!==-1;){var ve=Sl(v.substring(F),O.substring(b)),we=Pl(v.substring(0,F),O.substring(0,b));w.length<we+ve&&(w=O.substring(b-we,b)+O.substring(b,b+ve),q=v.substring(0,F-we),k=v.substring(F+ve),W=O.substring(0,b-we),ee=O.substring(b+ve))}return w.length*2>=v.length?[q,k,W,ee,w]:null}var s=i(n,r,Math.ceil(n.length/4)),o=i(n,r,Math.ceil(n.length/2)),a;if(!s&&!o)return null;o?s?a=s[4].length>o[4].length?s:o:a=o:a=s;var c,d,h,p;t.length>e.length?(c=a[0],d=a[1],h=a[2],p=a[3]):(h=a[0],p=a[1],c=a[2],d=a[3]);var m=a[4];return[c,d,h,p,m]}function qy(t,e){t.push([Ot,""]);for(var n=0,r=0,i=0,s="",o="",a;n<t.length;){if(n<t.length-1&&!t[n][1]){t.splice(n,1);continue}switch(t[n][0]){case _n:i++,o+=t[n][1],n++;break;case Mn:r++,s+=t[n][1],n++;break;case Ot:var c=n-i-r-1;if(e){if(c>=0&&ky(t[c][1])){var d=t[c][1].slice(-1);if(t[c][1]=t[c][1].slice(0,-1),s=d+s,o=d+o,!t[c][1]){t.splice(c,1),n--;var h=c-1;t[h]&&t[h][0]===_n&&(i++,o=t[h][1]+o,h--),t[h]&&t[h][0]===Mn&&(r++,s=t[h][1]+s,h--),c=h}}if(Fy(t[n][1])){var d=t[n][1].charAt(0);t[n][1]=t[n][1].slice(1),s+=d,o+=d}}if(n<t.length-1&&!t[n][1]){t.splice(n,1);break}if(s.length>0||o.length>0){s.length>0&&o.length>0&&(a=Sl(o,s),a!==0&&(c>=0?t[c][1]+=o.substring(0,a):(t.splice(0,0,[Ot,o.substring(0,a)]),n++),o=o.substring(a),s=s.substring(a)),a=Pl(o,s),a!==0&&(t[n][1]=o.substring(o.length-a)+t[n][1],o=o.substring(0,o.length-a),s=s.substring(0,s.length-a)));var p=i+r;s.length===0&&o.length===0?(t.splice(n-p,p),n=n-p):s.length===0?(t.splice(n-p,p,[_n,o]),n=n-p+1):o.length===0?(t.splice(n-p,p,[Mn,s]),n=n-p+1):(t.splice(n-p,p,[Mn,s],[_n,o]),n=n-p+2)}n!==0&&t[n-1][0]===Ot?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,s="",o="";break}}t[t.length-1][1]===""&&t.pop();var m=!1;for(n=1;n<t.length-1;)t[n-1][0]===Ot&&t[n+1][0]===Ot&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),m=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),m=!0)),n++;m&&qy(t,e)}function Ey(t){return t>=55296&&t<=56319}function Oy(t){return t>=56320&&t<=57343}function Fy(t){return Oy(t.charCodeAt(0))}function ky(t){return Ey(t.charCodeAt(t.length-1))}function iq(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}function Dl(t,e,n,r){return ky(t)||Fy(r)?null:iq([[Ot,t],[Mn,e],[_n,n],[Ot,r]])}function oq(t,e,n){var r=typeof n=="number"?{index:n,length:0}:n.oldRange,i=typeof n=="number"?null:n.newRange,s=t.length,o=e.length;if(r.length===0&&(i===null||i.length===0)){var a=r.index,c=t.slice(0,a),d=t.slice(a),h=i?i.index:null;e:{var p=a+o-s;if(h!==null&&h!==p||p<0||p>o)break e;var m=e.slice(0,p),v=e.slice(p);if(v!==d)break e;var O=Math.min(a,p),F=c.slice(0,O),N=m.slice(0,O);if(F!==N)break e;var b=c.slice(O),w=m.slice(O);return Dl(F,b,w,d)}e:{if(h!==null&&h!==a)break e;var q=a,m=e.slice(0,q),v=e.slice(q);if(m!==c)break e;var k=Math.min(s-q,o-q),W=d.slice(d.length-k),ee=v.slice(v.length-k);if(W!==ee)break e;var b=d.slice(0,d.length-k),w=v.slice(0,v.length-k);return Dl(c,b,w,W)}}if(r.length>0&&i&&i.length===0){e:{var F=t.slice(0,r.index),W=t.slice(r.index+r.length),O=F.length,k=W.length;if(o<O+k)break e;var N=e.slice(0,O),ee=e.slice(o-k);if(F!==N||W!==ee)break e;var b=t.slice(O,s-k),w=e.slice(O,o-k);return Dl(F,b,w,W)}}return null}function ka(t,e,n){return Yo(t,e,n,!0)}ka.INSERT=_n;ka.DELETE=Mn;ka.EQUAL=Ot;My.exports=ka});var ql=T(Wi=>{"use strict";var sq=Wi&&Wi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.createTextEdits=void 0;var Ma=sq(xy()),Tl=mr();function aq(t,e){let n=(0,Ma.default)(t.getText(),e),r=[],i=0;for(let[s,o]of n){let a=i;switch(s){case Ma.default.EQUAL:i+=o.length;break;case Ma.default.DELETE:i+=o.length,r.push(Tl.TextEdit.del(Tl.Range.create(t.positionAt(a),t.positionAt(i))));break;case Ma.default.INSERT:r.push(Tl.TextEdit.insert(t.positionAt(a),o));break}}return r}Wi.createTextEdits=aq});var Ny=T(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.getDisableType=void 0;var Iy=mr();function cq(t,e){let n=t.offsetAt(Iy.Position.create(e.line,0)),r=t.offsetAt(Iy.Position.create(e.line+1,0)),i=t.getText().slice(n,r),s=i.slice(0,e.character),o=i.slice(e.character),a=s.match(/\/\*\s*(stylelint-disable(?:(?:-next)?-line)?)\s[a-z\-/\s,]*$/i)?.[1]?.toLowerCase();return a&&/^[a-z\-/\s,]*\*\//i.test(o)?a:void 0}xa.getDisableType=cq});var Ay=T(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.getFixes=void 0;var uq=ql();async function lq(t,e,n={},r={}){let i=await t.lintDocument(e,{...n,fix:!0},r);return typeof i.output=="string"?(0,uq.createTextEdits)(e,i.output):[]}Ia.getFixes=lq});var Ly=T($i=>{"use strict";var dq=$i&&$i.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($i,"__esModule",{value:!0});$i.getWorkspaceFolder=void 0;var fq=dq(Vu()),El=xi();async function hq(t,e){let{scheme:n,fsPath:r}=El.URI.parse(e.uri);if(n==="untitled"){let i=(await t.workspace.getWorkspaceFolders())?.[0]?.uri;return i?El.URI.parse(i).fsPath:void 0}if(r){let i=await t.workspace.getWorkspaceFolders();if(i)for(let{uri:s}of i){let o=El.URI.parse(s).fsPath;if((0,fq.default)(r,o))return o}}}$i.getWorkspaceFolder=hq});var Hi=T(xn=>{"use strict";var gq=xn&&xn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Na=xn&&xn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&gq(e,t,n)};Object.defineProperty(xn,"__esModule",{value:!0});Na(ql(),xn);Na(Ny(),xn);Na(Ay(),xn);Na(Ly(),xn)});var jy=T(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.getFirstResolvedValue=zi.getFirstReturnValue=void 0;function pq(...t){for(let e of t){let n=e();if(n!==void 0)return n}}zi.getFirstReturnValue=pq;async function mq(...t){for(let e of t){let n=await e();if(n!==void 0)return n}}zi.getFirstResolvedValue=mq});var Wy=T(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.lazyCallAsync=Ki.lazyCall=void 0;function vq(t){let e=!1,n;return()=>(e||(n=t(),e=!0),n)}Ki.lazyCall=vq;function yq(t){let e=!1,n;return async()=>(e||(n=await t(),e=!0),n)}Ki.lazyCallAsync=yq});var Hy=T(Er=>{"use strict";var _q=Er&&Er.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),$y=Er&&Er.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&_q(e,t,n)};Object.defineProperty(Er,"__esModule",{value:!0});$y(jy(),Er);$y(Wy(),Er)});var Qy=T(In=>{"use strict";var Ol=In&&In.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Pe=In&&In.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Fl=In&&In.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},wn,ir,lt,Aa,La,zy,Ky,Uy,By,Gy,Xy;Object.defineProperty(In,"__esModule",{value:!0});In.StylelintResolver=void 0;var wq=Fl(require("fs/promises")),bq=require("module"),ja=Fl(require("path")),Rq=Fl(require("process")),Cq=Cl(),Sq=xi(),Pq=Hi(),Vy=Qu(),Dq=tl(),kl=Hy(),Jy=class{constructor(e,n){wn.add(this),ir.set(this,void 0),lt.set(this,void 0),Aa.set(this,void 0),Ol(this,ir,e,"f"),Ol(this,lt,n,"f"),Ol(this,Aa,new Dq.GlobalPathResolver(n),"f")}async resolve({packageManager:e,stylelintPath:n},r){let i=(0,kl.lazyCallAsync)(async()=>Pe(this,ir,"f")&&await(0,Pq.getWorkspaceFolder)(Pe(this,ir,"f"),r)),s=await(0,kl.getFirstResolvedValue)(()=>Pe(this,wn,"m",Gy).call(this,n,i),()=>Pe(this,wn,"m",Xy).call(this,r,i,e));if(!s){Pe(this,lt,"f")?.warn("Failed to load Stylelint either globally or from the current workspace.");return}return s}};In.StylelintResolver=Jy;ir=new WeakMap,lt=new WeakMap,Aa=new WeakMap,wn=new WeakSet,La=function(e,n){Pe(this,lt,"f")&&Pe(this,lt,"f")?.error(e,n&&{error:n}),Pe(this,ir,"f")&&Pe(this,ir,"f").window.showErrorMessage(`Stylelint: ${e}`)},zy=async function(e){let n=[".pnp.cjs",".pnp.js"];for(let r of n){let i=ja.default.join(e,r);try{if((await wq.default.stat(i)).isFile())return i}catch(s){Pe(this,lt,"f")?.debug("Did not find PnP loader at tested path",{path:i,error:s})}}Pe(this,lt,"f")?.debug("Could not find a PnP loader",{path:e})},Ky=async function(e){if(!e)return;let n=await(0,Vy.findPackageRoot)(e,"yarn.lock");if(!n){Pe(this,lt,"f")?.debug("Could not find a Yarn lockfile",{cwd:e});return}let r=await Pe(this,wn,"m",zy).call(this,n);if(!!r){if(!Rq.default.versions.pnp)try{require(r).setup()}catch(i){Pe(this,lt,"f")?.warn("Could not setup PnP",{path:r,error:i});return}try{let i=(0,bq.createRequire)(r),s=i.resolve("stylelint"),o=await(0,Vy.findPackageRoot)(s);if(!o){Pe(this,lt,"f")?.warn("Failed to find the Stylelint package root",{path:s});return}let c={stylelint:i("stylelint"),resolvedPath:o};return Pe(this,lt,"f")?.debug("Resolved Stylelint using PnP",{path:r}),c}catch(i){Pe(this,lt,"f")?.warn("Could not load Stylelint using PnP",{path:n,error:i});return}}},Uy=async function(e,n,r){try{let i=await Cq.Files.resolve("stylelint",n,e,r),s={stylelint:require(i),resolvedPath:i};return Pe(this,lt,"f")?.debug("Resolved Stylelint from node_modules",{path:i}),s}catch(i){Pe(this,lt,"f")?.warn("Could not load Stylelint from node_modules",{error:i});return}},By=async function(e,n){if(!Pe(this,ir,"f")||ja.default.isAbsolute(e))return e;let r=await n();return r?ja.default.join(r,e):e},Gy=async function(e,n){if(!e)return;let r=`Failed to load Stylelint from "stylelintPath": ${e}.`;try{let i=await Pe(this,wn,"m",By).call(this,e,n),s=require(i);if(s&&typeof s.lint=="function")return{stylelint:s,resolvedPath:i}}catch(i){throw Pe(this,wn,"m",La).call(this,r,i),i}Pe(this,wn,"m",La).call(this,r)},Xy=async function(e,n,r){let i=Pe(this,ir,"f");try{let s=r?await Pe(this,Aa,"f").resolve(r):void 0,o=Sq.URI.parse(e.uri),a=o.scheme==="file"?ja.default.dirname(o.fsPath):await n(),c=await(0,kl.getFirstResolvedValue)(async()=>await Pe(this,wn,"m",Ky).call(this,a),async()=>await Pe(this,wn,"m",Uy).call(this,a,s,(d,h)=>{Pe(this,lt,"f")?.debug(d.replace(/\n/g,"  "),{verbose:h}),i?.tracer.log(d,h)}));if(!c)return;if(typeof c.stylelint?.lint!="function"){Pe(this,wn,"m",La).call(this,"stylelint.lint is not a function.");return}return c}catch(s){Pe(this,lt,"f")?.debug("Failed to resolve Stylelint from workspace or globally-installed packages.",{error:s})}}});var Zy=T(Yy=>{"use strict";Object.defineProperty(Yy,"__esModule",{value:!0})});var Zo=T(Nn=>{"use strict";var Tq=Nn&&Nn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Wa=Nn&&Nn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Tq(e,t,n)};Object.defineProperty(Nn,"__esModule",{value:!0});Wa(Qu(),Nn);Wa(tl(),Nn);Wa(Qy(),Nn);Wa(Zy(),Nn)});var Ml=T(Ui=>{"use strict";var e_=Ui&&Ui.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.buildStylelintOptions=void 0;var es=e_(require("path")),qq=e_(Vu()),Eq=xi(),Oq=Zo();async function Fq(t,e,n={},{config:r,configFile:i,configBasedir:s,customSyntax:o,ignoreDisables:a,reportNeedlessDisables:c,reportInvalidScopeDisables:d}={}){let h={...n,config:r??n.config,configFile:i?e?i.replace(/\$\{workspaceFolder\}/gu,e):i:n.configFile,configBasedir:s?es.default.isAbsolute(s)?s:es.default.join(e??"",s):n.configBasedir,customSyntax:o?e?o.replace(/\$\{workspaceFolder\}/gu,e):o:n.customSyntax,ignoreDisables:a??n.ignoreDisables,reportNeedlessDisables:c??n.reportNeedlessDisables,reportInvalidScopeDisables:d??n.reportInvalidScopeDisables},p=Eq.URI.parse(t).fsPath;return p&&(e&&(0,qq.default)(p,e)&&(h.ignorePath=es.default.join(e,".stylelintignore")),h.ignorePath===void 0&&(h.ignorePath=es.default.join(await(0,Oq.findPackageRoot)(p)||es.default.parse(p).root,".stylelintignore"))),h}Ui.buildStylelintOptions=Fq});var t_=T($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.intersect=void 0;function kq(t,e){if(!t)return e;if(!e)return t;let[n,r]=t.size<e.size?[t,e]:[e,t],i=new Set;for(let s of n)r.has(s)&&i.add(s);return i}$a.intersect=kq});var ts=T(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.InvalidOptionError=oi.DisableReportRuleNames=void 0;var Mq;(function(t){t.Needless="--report-needless-disables",t.InvalidScope="--report-invalid-scope-disables",t.Descriptionless="--report-descriptionless-disables",t.Illegal="reportDisables"})(Mq=oi.DisableReportRuleNames||(oi.DisableReportRuleNames={}));var n_=class extends Error{constructor(e){let n=e.map(r=>r.text);super(n.join(`
`));this.reasons=n}};oi.InvalidOptionError=n_});var xl=T(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.getDisableDiagnosticRule=void 0;var Ha=ts();function xq(t){switch(t.code){case Ha.DisableReportRuleNames.Needless:return t.message.match(/^Needless disable for "(.+)"$/)?.[1];case Ha.DisableReportRuleNames.InvalidScope:return t.message.match(/^Rule "(.+)" isn't enabled$/)?.[1];case Ha.DisableReportRuleNames.Descriptionless:return t.message.match(/^Disable for "(.+)" is missing a description$/)?.[1];case Ha.DisableReportRuleNames.Illegal:return t.message.match(/^Rule "(.+)" may not be disabled$/)?.[1];default:return}}za.getDisableDiagnosticRule=xq});var o_=T(Bi=>{"use strict";var bn=Bi&&Bi.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ka,ns,rs,is,Il;Object.defineProperty(Bi,"__esModule",{value:!0});Bi.DisableMetadataLookupTable=void 0;var r_=t_(),Iq=xl(),i_=class{constructor(e){Ka.add(this),ns.set(this,new Map),rs.set(this,new Map),is.set(this,new Map);for(let n of e){let r=(0,Iq.getDisableDiagnosticRule)(n);if(!r)continue;let i=n.code,s=bn(this,ns,"f").get(i);s?s.add(n):bn(this,ns,"f").set(i,new Set([n]));let o=bn(this,rs,"f").get(r);o?o.add(n):bn(this,rs,"f").set(r,new Set([n]));let a=bn(this,Ka,"m",Il).call(this,n.range),c=bn(this,is,"f").get(a);c?c.add(n):bn(this,is,"f").set(a,new Set([n]))}}find({type:e,rule:n,range:r}){let i=e?bn(this,ns,"f").get(e):void 0,s=n?bn(this,rs,"f").get(n):void 0,o=r?bn(this,is,"f").get(bn(this,Ka,"m",Il).call(this,r)):void 0;return(0,r_.intersect)((0,r_.intersect)(i,s),o)??new Set}};Bi.DisableMetadataLookupTable=i_;ns=new WeakMap,rs=new WeakMap,is=new WeakMap,Ka=new WeakSet,Il=function({start:e,end:n}){return`${e.line}:${e.character}:${n.line}:${n.character}`}});var s_=T(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.formattingOptionsToRules=void 0;function Nq({insertSpaces:t,tabSize:e,insertFinalNewline:n,trimTrailingWhitespace:r}){let i={indentation:[t?e:"tab"]};return n!==void 0&&(i["no-missing-end-of-source-newline"]=n||null),r!==void 0&&(i["no-eol-whitespace"]=r||null),i}Ua.formattingOptionsToRules=Nq});var a_=T(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.isDisableReportRule=void 0;var Ba=ts();function Aq(t){switch(t){case Ba.DisableReportRuleNames.Descriptionless:case Ba.DisableReportRuleNames.Illegal:case Ba.DisableReportRuleNames.InvalidScope:case Ba.DisableReportRuleNames.Needless:return!0;default:return!1}}Ga.isDisableReportRule=Aq});var Nl=T(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.warningToDiagnostic=void 0;var os=mr();function Lq(t,e){let n=os.Position.create(t.line-1,t.column-1),r=os.Position.create(t.line-1,t.column),i=e?.[t.rule]?.url,s=os.Diagnostic.create(os.Range.create(n,r),t.text,os.DiagnosticSeverity[t.severity==="warning"?"Warning":"Error"],t.rule,"Stylelint");return i&&(s.codeDescription={href:i}),s}Xa.warningToDiagnostic=Lq});var Al=T(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.processLinterResult=void 0;var jq=Nl(),Wq=ts();function $q(t,{results:e,output:n,ruleMetadata:r}){if(e.length===0)return{diagnostics:[]};let[{invalidOptionWarnings:i,warnings:s,ignored:o}]=e;if(o)return{diagnostics:[]};if(i.length!==0)throw new Wq.InvalidOptionError(i);r||(r=new Proxy({},{get:(c,d)=>t.rules?.[d]?.meta}));let a=s.map(c=>(0,jq.warningToDiagnostic)(c,r));return n?{output:n,diagnostics:a}:{diagnostics:a}}Va.processLinterResult=$q});var l_=T(An=>{"use strict";var Ll=An&&An.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Gi=An&&An.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Hq=An&&An.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ss,Xi,Ja;Object.defineProperty(An,"__esModule",{value:!0});An.StylelintRunner=void 0;var zq=Hq(require("os")),Kq=xi(),Uq=Zo(),Bq=Hi(),c_=Al(),Gq=Ml(),u_=class{constructor(e,n,r){ss.set(this,void 0),Xi.set(this,void 0),Ja.set(this,void 0),Ll(this,ss,e,"f"),Ll(this,Xi,n,"f"),Ll(this,Ja,r??new Uq.StylelintResolver(e,n),"f")}async lintDocument(e,n={},r={}){let i=Gi(this,ss,"f")&&await(0,Bq.getWorkspaceFolder)(Gi(this,ss,"f"),e),s=await Gi(this,Ja,"f").resolve(r,e);if(!s)return Gi(this,Xi,"f")?.info("No Stylelint found with which to lint document",{uri:e.uri,options:r}),{diagnostics:[]};let{stylelint:o}=s,{fsPath:a}=Kq.URI.parse(e.uri),c=zq.default.platform()==="win32"?a.replace(/^[a-z]:/,h=>h.toUpperCase()):a,d={...await(0,Gq.buildStylelintOptions)(e.uri,i,n,r),code:e.getText(),formatter:()=>""};c?d.codeFilename=c:n?.config?.rules||(d.config={rules:{}}),Gi(this,Xi,"f")?.isDebugEnabled()&&Gi(this,Xi,"f")?.debug("Running Stylelint",{options:{...d,code:"..."}});try{return(0,c_.processLinterResult)(o,await o.lint(d))}catch(h){if(h instanceof Error&&(h.message.startsWith("No configuration provided for")||h.message.includes("No rules found within configuration")))return(0,c_.processLinterResult)(o,await o.lint({...d,config:{rules:{}}}));throw h}}};An.StylelintRunner=u_;ss=new WeakMap,Xi=new WeakMap,Ja=new WeakMap});var as=T(bt=>{"use strict";var Xq=bt&&bt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),or=bt&&bt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Xq(e,t,n)};Object.defineProperty(bt,"__esModule",{value:!0});or(Ml(),bt);or(o_(),bt);or(s_(),bt);or(xl(),bt);or(a_(),bt);or(Al(),bt);or(l_(),bt);or(ts(),bt);or(Nl(),bt)});var v_=T(kt=>{"use strict";var Vq=kt&&kt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Jq=kt&&kt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qq=kt&&kt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Vq(e,t,n);return Jq(e,t),e},d_=kt&&kt.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},De=kt&&kt.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},si,on,et,f_,h_,g_,p_,m_;Object.defineProperty(kt,"__esModule",{value:!0});kt.CodeActionModule=void 0;var Ft=Qq(ie()),Or=Fi(),jl=ma(),Yq=as(),Zq=ie(),Wl=class{constructor({context:e,logger:n}){si.add(this),on.set(this,void 0),et.set(this,void 0),d_(this,on,e,"f"),d_(this,et,n,"f")}onInitialize(){return{capabilities:{codeActionProvider:{codeActionKinds:[Ft.CodeActionKind.QuickFix,Or.CodeActionKind.StylelintSourceFixAll]},executeCommandProvider:{commands:[Or.CommandId.OpenRuleDoc]}}}}onDidRegisterHandlers(){De(this,et,"f")?.debug("Registering onCodeAction handler"),De(this,on,"f").connection.onCodeAction(async({context:e,textDocument:{uri:n}})=>{De(this,et,"f")?.debug("Received onCodeAction",{context:e,uri:n});let r=De(this,on,"f").documents.get(n);if(!r)return De(this,et,"f")?.debug("Unknown document, ignoring",{uri:n}),[];if(!await De(this,si,"m",f_).call(this,r))return De(this,et,"f")?.debug("Document should not be validated, ignoring",{uri:n,language:r.languageId}),[];let i=await De(this,si,"m",m_).call(this,r,e);return De(this,et,"f")?.debug("Returning code actions",{actions:i}),i}),De(this,et,"f")?.debug("onCodeAction handler registered"),De(this,on,"f").commands.on(Or.CommandId.OpenRuleDoc,async({arguments:e})=>{let n=e?.[0];if(!n)return De(this,et,"f")?.debug("No URL provided, ignoring command request"),{};let{uri:r}=n;return De(this,et,"f")?.debug("Opening rule documentation",{uri:r}),(await De(this,on,"f").connection.window.showDocument({uri:r,external:!0})).success?{}:(De(this,et,"f")?.warn("Failed to open rule documentation",{uri:r}),new Ft.ResponseError(Ft.ErrorCodes.InternalError,"Failed to open rule documentation"))}),De(this,on,"f").notifications.on(Zq.InitializedNotification.type,()=>De(this,on,"f").connection.sendNotification(Or.Notification.DidRegisterCodeActionRequestHandler))}};kt.CodeActionModule=Wl;on=new WeakMap,et=new WeakMap,si=new WeakSet,f_=async function(e){return(await De(this,on,"f").getOptions(e.uri)).validate.includes(e.languageId)},h_=async function(e){let n=await De(this,on,"f").getFixes(e),r={uri:e.uri,version:e.version};return n.length>0?Ft.CodeAction.create("Fix all Stylelint auto-fixable problems",{documentChanges:[Ft.TextDocumentEdit.create(r,n)]},Or.CodeActionKind.StylelintSourceFixAll):void 0},g_=function(e){let n=Ft.Command.create("Fix all Stylelint auto-fixable problems",Or.CommandId.ApplyAutoFix,{uri:e.uri,version:e.version});return Ft.CodeAction.create("Fix all Stylelint auto-fixable problems",n,Ft.CodeActionKind.Source)},p_=function({code:e,codeDescription:n}){let r=n?.href;if(!r)return;let i=Ft.Command.create(`Open documentation for ${e}`,Or.CommandId.OpenRuleDoc,{uri:r});return Ft.CodeAction.create(`Show documentation for ${e}`,i,Ft.CodeActionKind.QuickFix)},m_=async function(e,n){let r=n.only&&new Set(n.only);if(De(this,et,"f")?.debug("Creating code actions",{only:n.only}),r?.has(Ft.CodeActionKind.SourceFixAll)||r?.has(Or.CodeActionKind.StylelintSourceFixAll)){De(this,et,"f")?.debug('Creating "source-fix-all" code action');let s=await De(this,si,"m",h_).call(this,e);return s?[s]:[]}if(r?.has(Ft.CodeActionKind.Source))return De(this,et,"f")?.debug('Creating "source" code action'),[De(this,si,"m",g_).call(this,e)];if(r&&!r.has(Ft.CodeActionKind.QuickFix))return De(this,et,"f")?.debug("No quick fix actions requested, skipping action creation"),[];let i=new jl.RuleCodeActionsCollection;for(let s of n.diagnostics){let{source:o,code:a}=s;if(!(o!=="Stylelint"||typeof a!="string")){if(!(0,Yq.isDisableReportRule)(a)){let c=await De(this,on,"f").getOptions(e.uri),{location:d}=c.codeAction.disableRuleComment;De(this,et,"f")?.debug("Creating disable rule for line code action",{rule:a,location:d}),i.get(a).disableLine=(0,jl.createDisableRuleLineCodeAction)(e,s,d),i.get(a).disableFile||(De(this,et,"f")?.debug("Creating disable rule for file code action",{rule:a}),i.get(a).disableFile=(0,jl.createDisableRuleFileCodeAction)(e,s))}i.get(a).documentation||(De(this,et,"f")?.debug("Creating documentation code action",{rule:a}),i.get(a).documentation=De(this,si,"m",p_).call(this,s))}}return[...i]};Wl.id="code-action"});var C_=T(Fr=>{"use strict";var y_=Fr&&Fr.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Mt=Fr&&Fr.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Qa,ai,Rn,__,w_;Object.defineProperty(Fr,"__esModule",{value:!0});Fr.CompletionModule=void 0;var b_=mr(),eE=Hi(),Vi=ma(),R_=as(),$l=class{constructor({context:e,logger:n}){Qa.add(this),ai.set(this,void 0),Rn.set(this,void 0),y_(this,ai,e,"f"),y_(this,Rn,n,"f")}onInitialize(){return{capabilities:{completionProvider:{}}}}onDidRegisterHandlers(){Mt(this,Rn,"f")?.debug("Registering onCompletion handler"),Mt(this,ai,"f").connection.onCompletion(Mt(this,Qa,"m",w_).bind(this)),Mt(this,Rn,"f")?.debug("onCompletion handler registered")}};Fr.CompletionModule=$l;ai=new WeakMap,Rn=new WeakMap,Qa=new WeakSet,__=async function(e){let n=await Mt(this,ai,"f").getOptions(e.uri);return n.validate.includes(e.languageId)&&n.snippet.includes(e.languageId)},w_=async function({textDocument:e,position:n}){let{uri:r}=e;Mt(this,Rn,"f")?.debug("Received onCompletion",{uri:r,position:n});let i=Mt(this,ai,"f").documents.get(r);if(!i||!await Mt(this,Qa,"m",__).call(this,i))return Mt(this,Rn,"f")?.isDebugEnabled()&&(i?Mt(this,Rn,"f").debug("Snippets or validation not enabled for language, ignoring",{uri:r,language:i.languageId}):Mt(this,Rn,"f").debug("Unknown document, ignoring",{uri:r})),[];let o=Mt(this,ai,"f").getModule("validator")?.getDiagnostics(r);if(!o||o.length===0){let m=[(0,Vi.createDisableCompletionItem)("stylelint-disable-line"),(0,Vi.createDisableCompletionItem)("stylelint-disable-next-line"),(0,Vi.createDisableCompletionItem)("stylelint-disable")];return Mt(this,Rn,"f")?.debug("No diagnostics for document, returning generic completion items",{uri:r,items:m}),m}let a=new Set,c=new Set,d=new R_.DisableMetadataLookupTable(o);for(let{code:m,range:v}of o)!m||typeof m!="string"||m==="CssSyntaxError"||d.find({type:R_.DisableReportRuleNames.Needless,rule:m,range:v}).size>0||(v.start.line===n.line?a.add(m):v.start.line===n.line+1&&c.add(m));let h=[],p=(0,eE.getDisableType)(i,n);if(p==="stylelint-disable-line")for(let m of a)h.push({label:m,kind:b_.CompletionItemKind.Snippet,detail:`disable ${m} rule. (Stylelint)`});else if(p==="stylelint-disable"||p==="stylelint-disable-next-line")for(let m of c)h.push({label:m,kind:b_.CompletionItemKind.Snippet,detail:`disable ${m} rule. (Stylelint)`});else h.push((0,Vi.createDisableCompletionItem)("stylelint-disable-line",a.size===1?a.values().next().value:void 0)),h.push((0,Vi.createDisableCompletionItem)("stylelint-disable-next-line",c.size===1?c.values().next().value:void 0)),h.push((0,Vi.createDisableCompletionItem)("stylelint-disable"));return Mt(this,Rn,"f")?.debug("Returning completion items",{uri:r,results:h}),h};$l.id="completion"});var P_=T(xt=>{"use strict";var tE=xt&&xt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),nE=xt&&xt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rE=xt&&xt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&tE(e,t,n);return nE(e,t),e},Hl=xt&&xt.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Y=xt&&xt.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ln,Rt,Oe,cs,kr,zl,Ya,S_,Kl;Object.defineProperty(xt,"__esModule",{value:!0});xt.FormatterModule=void 0;var Ul=rE(ie()),iE=as(),oE=Fi(),sE=xi(),Bl=class{constructor({context:e,logger:n}){Ln.add(this),Rt.set(this,void 0),Oe.set(this,void 0),cs.set(this,!1),kr.set(this,new Map),Hl(this,Rt,e,"f"),Hl(this,Oe,n,"f")}onInitialize({capabilities:e}){return Hl(this,cs,Boolean(e.textDocument?.formatting?.dynamicRegistration),"f"),{capabilities:{documentFormattingProvider:!Y(this,cs,"f")}}}onDidRegisterHandlers(){Y(this,Oe,"f")?.debug("Registering connection.onDocumentFormatting handler"),Y(this,Rt,"f").connection.onDocumentFormatting(async({textDocument:e,options:n})=>{if(Y(this,Oe,"f")?.debug("Received onDocumentFormatting",{textDocument:e,options:n}),!e)return Y(this,Oe,"f")?.debug("No text document provided, ignoring"),null;let{uri:r}=e,i=Y(this,Rt,"f").documents.get(r);if(!i||!await Y(this,Ln,"m",zl).call(this,i))return Y(this,Oe,"f")?.isDebugEnabled()&&(i?Y(this,Oe,"f").debug("Document should not be formatted, ignoring",{uri:r,language:i.languageId}):Y(this,Oe,"f").debug("Unknown document, ignoring",{uri:r})),null;let s={config:{rules:(0,iE.formattingOptionsToRules)(n)}};Y(this,Oe,"f")?.debug("Formatting document",{uri:r,linterOptions:s});let o=Y(this,Rt,"f").getFixes(i,s);return Y(this,Oe,"f")?.debug("Returning fixes",{uri:r,fixes:o}),o}),Y(this,Oe,"f")?.debug("connection.onDocumentFormatting handler registered"),Y(this,Oe,"f")?.debug("Registering documents.onDidOpen handler"),Y(this,Rt,"f").documents.onDidOpen(({document:e})=>Y(this,Ln,"m",Ya).call(this,e)),Y(this,Oe,"f")?.debug("documents.onDidOpen handler registered"),Y(this,Oe,"f")?.debug("Registering documents.onDidChangeContent handler"),Y(this,Rt,"f").documents.onDidChangeContent(({document:e})=>Y(this,Ln,"m",Ya).call(this,e)),Y(this,Oe,"f")?.debug("documents.onDidChangeContent handler registered"),Y(this,Oe,"f")?.debug("Registering documents.onDidSave handler"),Y(this,Rt,"f").documents.onDidSave(({document:e})=>Y(this,Ln,"m",Ya).call(this,e)),Y(this,Oe,"f")?.debug("documents.onDidSave handler registered"),Y(this,Oe,"f")?.debug("Registering documents.onDidClose handler"),Y(this,Rt,"f").documents.onDidClose(({document:e})=>Y(this,Ln,"m",S_).call(this,e.uri)),Y(this,Oe,"f")?.debug("documents.onDidClose handler registered"),Y(this,Oe,"f")?.debug("Registering DidChangeConfigurationNotification"),Y(this,Rt,"f").notifications.on(Ul.DidChangeConfigurationNotification.type,()=>Y(this,Ln,"m",Kl).call(this)),Y(this,Oe,"f")?.debug("DidChangeConfigurationNotification registered"),Y(this,Oe,"f")?.debug("Registering DidChangeWorkspaceFoldersNotification"),Y(this,Rt,"f").notifications.on(Ul.DidChangeWorkspaceFoldersNotification.type,()=>Y(this,Ln,"m",Kl).call(this)),Y(this,Oe,"f")?.debug("DidChangeWorkspaceFoldersNotification registered")}};xt.FormatterModule=Bl;Rt=new WeakMap,Oe=new WeakMap,cs=new WeakMap,kr=new WeakMap,Ln=new WeakSet,zl=async function(e){return(await Y(this,Rt,"f").getOptions(e.uri)).validate.includes(e.languageId)},Ya=async function(e){if(!Y(this,cs,"f")||!await Y(this,Ln,"m",zl).call(this,e)||Y(this,kr,"f").has(e.uri))return;let{scheme:n,fsPath:r}=sE.URI.parse(e.uri),i=(n==="file"?r.replace(/\\/g,"/"):r).replace(/[[\]{}]/g,"?"),o={documentSelector:[{scheme:n,pattern:i}]};Y(this,kr,"f").set(e.uri,Y(this,Rt,"f").connection.client.register(Ul.DocumentFormattingRequest.type,o)),Y(this,Oe,"f")?.debug("Registering formatter for document",{uri:e.uri,options:o}),Y(this,Rt,"f").connection.sendNotification(oE.Notification.DidRegisterDocumentFormattingEditProvider,{uri:e.uri,options:o})},S_=function(e){let n=Y(this,kr,"f").get(e);!n||(Y(this,Oe,"f")?.debug("Deregistering formatter for document",{uri:e}),n.then(({dispose:r})=>r()).catch(r=>{Y(this,Oe,"f")?.error("Error deregistering formatter for document",{uri:e,error:r})}),Y(this,kr,"f").delete(e))},Kl=function(){for(let[e,n]of Y(this,kr,"f"))Y(this,Oe,"f")?.debug("Deregistering formatter for document",{uri:e}),n.then(({dispose:r})=>r()).catch(r=>{Y(this,Oe,"f")?.error("Error deregistering formatter for document",{uri:e,error:r})});Y(this,kr,"f").clear()};Bl.id="formatter"});var E_=T(Wn=>{"use strict";var Gl=Wn&&Wn.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},He=Wn&&Wn.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Xl=Wn&&Wn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Za,jn,It,ec,tc,D_,T_;Object.defineProperty(Wn,"__esModule",{value:!0});Wn.OldStylelintWarningModule=void 0;var aE=Xl(require("path")),cE=Xl(require("fs/promises")),q_=Xl(Pc()),uE=Hi(),lE=Zo(),Vl=class{constructor({context:e,logger:n}){Za.add(this),jn.set(this,void 0),It.set(this,void 0),ec.set(this,new Set),tc.set(this,!1),Gl(this,jn,e,"f"),Gl(this,It,n,"f")}onInitialize({capabilities:e}){Gl(this,tc,e.window?.showDocument?.support??!1,"f")}onDidRegisterHandlers(){He(this,It,"f")?.debug("Registering onDidOpen handler"),He(this,jn,"f").documents.onDidOpen(async({document:e})=>{let n=await He(this,Za,"m",T_).call(this,e);if(!n)return;He(this,It,"f")?.warn(`Found unsupported version of Stylelint: ${n}`);let r=`Stylelint version ${n} is no longer supported. While it may continue to work for a while, you may encounter unexpected behavior. Please upgrade to version 14.0.0 or newer. See the migration guide for more information.`;if(!He(this,tc,"f")){He(this,jn,"f").connection.window.showWarningMessage(r);return}(await He(this,jn,"f").connection.window.showWarningMessage(r,{title:"Open migration guide"}))?.title==="Open migration guide"&&((await He(this,jn,"f").connection.window.showDocument({uri:"https://github.com/stylelint/vscode-stylelint#migrating-from-vscode-stylelint-0xstylelint-13x",external:!0})).success||He(this,It,"f")?.warn("Failed to open migration guide"))}),He(this,It,"f")?.debug("onDidOpen handler registered")}};Wn.OldStylelintWarningModule=Vl;jn=new WeakMap,It=new WeakMap,ec=new WeakMap,tc=new WeakMap,Za=new WeakSet,D_=async function(e){let n=await He(this,jn,"f").resolveStylelint(e);if(!n){He(this,It,"f")?.debug("Stylelint not found",{uri:e.uri});return}let r=await(0,lE.findPackageRoot)(n.resolvedPath);if(!r){He(this,It,"f")?.debug("Stylelint package root not found",{uri:e.uri});return}let i=aE.default.join(r,"package.json");try{let s=await cE.default.readFile(i,"utf8");return JSON.parse(s).version}catch(s){He(this,It,"f")?.debug("Stylelint package manifest could not be read",{uri:e.uri,manifestPath:i,error:s});return}},T_=async function(e){if(!(await He(this,jn,"f").getOptions(e.uri)).validate.includes(e.languageId)){He(this,It,"f")?.debug("Document should not be validated, ignoring",{uri:e.uri,language:e.languageId});return}let r=await(0,uE.getWorkspaceFolder)(He(this,jn,"f").connection,e);if(!r){He(this,It,"f")?.debug("Document not part of a workspace, ignoring",{uri:e.uri});return}if(He(this,ec,"f").has(r)){He(this,It,"f")?.debug("Document has already been checked, ignoring",{uri:e.uri});return}He(this,ec,"f").add(r);let i=await He(this,Za,"m",D_).call(this,e);if(!!i)try{let s=q_.default.coerce(i);if(!s)throw new Error(`Could not coerce version "${i}"`);return q_.default.lt(s,"14.0.0")?i:void 0}catch(s){He(this,It,"f")?.debug("Stylelint version could not be parsed",{uri:e.uri,version:i,error:s});return}};Vl.id="old-stylelint-warning"});var k_=T(Mr=>{"use strict";var O_=Mr&&Mr.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},ye=Mr&&Mr.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},$n,sn,dt,Ji,F_,Jl,nc,Ql;Object.defineProperty(Mr,"__esModule",{value:!0});Mr.ValidatorModule=void 0;var dE=ie(),Yl=class{constructor({context:e,logger:n}){$n.add(this),sn.set(this,void 0),dt.set(this,void 0),Ji.set(this,new Map),O_(this,sn,e,"f"),O_(this,dt,n,"f")}getDiagnostics(e){return ye(this,Ji,"f").get(e)??[]}onInitialize(){ye(this,$n,"m",nc).call(this)}onDidRegisterHandlers(){ye(this,dt,"f")?.debug("Registering handlers"),ye(this,sn,"f").notifications.on(dE.DidChangeWatchedFilesNotification.type,async()=>await ye(this,$n,"m",nc).call(this)),ye(this,dt,"f")?.debug("onDidChangeWatchedFiles handler registered"),ye(this,sn,"f").documents.onDidChangeContent(async({document:e})=>await ye(this,$n,"m",Jl).call(this,e)),ye(this,dt,"f")?.debug("onDidChangeContent handler registered"),ye(this,sn,"f").documents.onDidClose(({document:e})=>{ye(this,$n,"m",Ql).call(this,e)}),ye(this,dt,"f")?.debug("onDidClose handler registered"),ye(this,dt,"f")?.debug("Handlers registered")}async onDidChangeConfiguration(){ye(this,dt,"f")?.debug("Received onDidChangeConfiguration"),await ye(this,$n,"m",nc).call(this)}};Mr.ValidatorModule=Yl;sn=new WeakMap,dt=new WeakMap,Ji=new WeakMap,$n=new WeakSet,F_=async function(e){return(await ye(this,sn,"f").getOptions(e.uri)).validate.includes(e.languageId)},Jl=async function(e){if(!await ye(this,$n,"m",F_).call(this,e)){ye(this,Ji,"f").has(e.uri)?(ye(this,dt,"f")?.debug("Document should not be validated, clearing diagnostics",{uri:e.uri,language:e.languageId}),ye(this,$n,"m",Ql).call(this,e)):ye(this,dt,"f")?.debug("Document should not be validated, ignoring",{uri:e.uri,language:e.languageId});return}let n=await ye(this,sn,"f").lintDocument(e);if(!n){ye(this,dt,"f")?.debug("No lint result, ignoring",{uri:e.uri});return}ye(this,dt,"f")?.debug("Sending diagnostics",{uri:e.uri,result:n});try{ye(this,sn,"f").connection.sendDiagnostics({uri:e.uri,diagnostics:n.diagnostics}),ye(this,Ji,"f").set(e.uri,n.diagnostics),ye(this,dt,"f")?.debug("Diagnostics sent",{uri:e.uri})}catch(r){ye(this,sn,"f").displayError(r),ye(this,dt,"f")?.error("Failed to send diagnostics",{uri:e.uri,error:r})}},nc=async function(){await Promise.allSettled(ye(this,sn,"f").documents.all().map(e=>ye(this,$n,"m",Jl).call(this,e)))},Ql=function({uri:e}){ye(this,dt,"f")?.debug("Clearing diagnostics for document",{uri:e}),ye(this,Ji,"f").delete(e),ye(this,sn,"f").connection.sendDiagnostics({uri:e,diagnostics:[]}),ye(this,dt,"f")?.debug("Diagnostics cleared",{uri:e})};Yl.id="validator"});var M_=T(an=>{"use strict";var fE=an&&an.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Qi=an&&an.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&fE(e,t,n)};Object.defineProperty(an,"__esModule",{value:!0});Qi(gv(),an);Qi(v_(),an);Qi(C_(),an);Qi(P_(),an);Qi(E_(),an);Qi(k_(),an)});var I_=T((x_,rc)=>{(function(t){if(typeof rc=="object"&&typeof rc.exports=="object"){var e=t(require,x_);e!==void 0&&(rc.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=void 0;class n{constructor(d,h,p,m){this._uri=d,this._languageId=h,this._version=p,this._content=m,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(d){if(d){let h=this.offsetAt(d.start),p=this.offsetAt(d.end);return this._content.substring(h,p)}return this._content}update(d,h){for(let p of d)if(n.isIncremental(p)){let m=o(p.range),v=this.offsetAt(m.start),O=this.offsetAt(m.end);this._content=this._content.substring(0,v)+p.text+this._content.substring(O,this._content.length);let F=Math.max(m.start.line,0),N=Math.max(m.end.line,0),b=this._lineOffsets,w=s(p.text,!1,v);if(N-F===w.length)for(let k=0,W=w.length;k<W;k++)b[k+F+1]=w[k];else w.length<1e4?b.splice(F+1,N-F,...w):this._lineOffsets=b=b.slice(0,F+1).concat(w,b.slice(N+1));let q=p.text.length-(O-v);if(q!==0)for(let k=F+1+w.length,W=b.length;k<W;k++)b[k]=b[k]+q}else if(n.isFull(p))this._content=p.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=h}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=s(this._content,!0)),this._lineOffsets}positionAt(d){d=Math.max(Math.min(d,this._content.length),0);let h=this.getLineOffsets(),p=0,m=h.length;if(m===0)return{line:0,character:d};for(;p<m;){let O=Math.floor((p+m)/2);h[O]>d?m=O:p=O+1}let v=p-1;return{line:v,character:d-h[v]}}offsetAt(d){let h=this.getLineOffsets();if(d.line>=h.length)return this._content.length;if(d.line<0)return 0;let p=h[d.line],m=d.line+1<h.length?h[d.line+1]:this._content.length;return Math.max(Math.min(p+d.character,m),p)}get lineCount(){return this.getLineOffsets().length}static isIncremental(d){let h=d;return h!=null&&typeof h.text=="string"&&h.range!==void 0&&(h.rangeLength===void 0||typeof h.rangeLength=="number")}static isFull(d){let h=d;return h!=null&&typeof h.text=="string"&&h.range===void 0&&h.rangeLength===void 0}}var r;(function(c){function d(m,v,O,F){return new n(m,v,O,F)}c.create=d;function h(m,v,O){if(m instanceof n)return m.update(v,O),m;throw new Error("TextDocument.update: document must be created by TextDocument.create")}c.update=h;function p(m,v){let O=m.getText(),F=i(v.map(a),(w,q)=>{let k=w.range.start.line-q.range.start.line;return k===0?w.range.start.character-q.range.start.character:k}),N=0,b=[];for(let w of F){let q=m.offsetAt(w.range.start);if(q<N)throw new Error("Overlapping edit");q>N&&b.push(O.substring(N,q)),w.newText.length&&b.push(w.newText),N=m.offsetAt(w.range.end)}return b.push(O.substr(N)),b.join("")}c.applyEdits=p})(r=e.TextDocument||(e.TextDocument={}));function i(c,d){if(c.length<=1)return c;let h=c.length/2|0,p=c.slice(0,h),m=c.slice(h);i(p,d),i(m,d);let v=0,O=0,F=0;for(;v<p.length&&O<m.length;)d(p[v],m[O])<=0?c[F++]=p[v++]:c[F++]=m[O++];for(;v<p.length;)c[F++]=p[v++];for(;O<m.length;)c[F++]=m[O++];return c}function s(c,d,h=0){let p=d?[h]:[];for(let m=0;m<c.length;m++){let v=c.charCodeAt(m);(v===13||v===10)&&(v===13&&m+1<c.length&&c.charCodeAt(m+1)===10&&m++,p.push(h+m+1))}return p}function o(c){let d=c.start,h=c.end;return d.line>h.line||d.line===h.line&&d.character>h.character?{start:h,end:d}:c}function a(c){let d=o(c.range);return d!==c.range?{newText:c.newText,range:d}:c}})});var oc=T(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.isObject=void 0;function hE(t){return typeof t=="object"&&t!==null}ic.isObject=hE});var A_=T(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.mergeAssign=void 0;var gE=oc();function N_(t,e,n){let r=t;for(let i of[e,n])if(!!i)for(let s of Object.getOwnPropertyNames(i)){if(s==="__proto__"||s==="constructor")continue;let o=i[s];if((0,gE.isObject)(o)){if(Array.isArray(o)){let a=r[s];r[s]=Array.isArray(a)?a.concat(o):o;continue}r[s]||(r[s]={}),r[s]=N_(r[s],o)}else r[s]=o}return r}sc.mergeAssign=N_});var j_=T((eM,L_)=>{"use strict";L_.exports=pE;function Yi(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function pE(t){if(t=t||{},t.circles)return mE(t);return t.proto?r:n;function e(i,s){for(var o=Object.keys(i),a=new Array(o.length),c=0;c<o.length;c++){var d=o[c],h=i[d];typeof h!="object"||h===null?a[d]=h:h instanceof Date?a[d]=new Date(h):ArrayBuffer.isView(h)?a[d]=Yi(h):a[d]=s(h)}return a}function n(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return e(i,n);if(i instanceof Map)return new Map(e(Array.from(i),n));if(i instanceof Set)return new Set(e(Array.from(i),n));var s={};for(var o in i)if(Object.hasOwnProperty.call(i,o)!==!1){var a=i[o];typeof a!="object"||a===null?s[o]=a:a instanceof Date?s[o]=new Date(a):a instanceof Map?s[o]=new Map(e(Array.from(a),n)):a instanceof Set?s[o]=new Set(e(Array.from(a),n)):ArrayBuffer.isView(a)?s[o]=Yi(a):s[o]=n(a)}return s}function r(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return e(i,r);if(i instanceof Map)return new Map(e(Array.from(i),r));if(i instanceof Set)return new Set(e(Array.from(i),r));var s={};for(var o in i){var a=i[o];typeof a!="object"||a===null?s[o]=a:a instanceof Date?s[o]=new Date(a):a instanceof Map?s[o]=new Map(e(Array.from(a),r)):a instanceof Set?s[o]=new Set(e(Array.from(a),r)):ArrayBuffer.isView(a)?s[o]=Yi(a):s[o]=r(a)}return s}}function mE(t){var e=[],n=[];return t.proto?s:i;function r(o,a){for(var c=Object.keys(o),d=new Array(c.length),h=0;h<c.length;h++){var p=c[h],m=o[p];if(typeof m!="object"||m===null)d[p]=m;else if(m instanceof Date)d[p]=new Date(m);else if(ArrayBuffer.isView(m))d[p]=Yi(m);else{var v=e.indexOf(m);v!==-1?d[p]=n[v]:d[p]=a(m)}}return d}function i(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return r(o,i);if(o instanceof Map)return new Map(r(Array.from(o),i));if(o instanceof Set)return new Set(r(Array.from(o),i));var a={};e.push(o),n.push(a);for(var c in o)if(Object.hasOwnProperty.call(o,c)!==!1){var d=o[c];if(typeof d!="object"||d===null)a[c]=d;else if(d instanceof Date)a[c]=new Date(d);else if(d instanceof Map)a[c]=new Map(r(Array.from(d),i));else if(d instanceof Set)a[c]=new Set(r(Array.from(d),i));else if(ArrayBuffer.isView(d))a[c]=Yi(d);else{var h=e.indexOf(d);h!==-1?a[c]=n[h]:a[c]=i(d)}}return e.pop(),n.pop(),a}function s(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return r(o,s);if(o instanceof Map)return new Map(r(Array.from(o),s));if(o instanceof Set)return new Set(r(Array.from(o),s));var a={};e.push(o),n.push(a);for(var c in o){var d=o[c];if(typeof d!="object"||d===null)a[c]=d;else if(d instanceof Date)a[c]=new Date(d);else if(d instanceof Map)a[c]=new Map(r(Array.from(d),s));else if(d instanceof Set)a[c]=new Set(r(Array.from(d),s));else if(ArrayBuffer.isView(d))a[c]=Yi(d);else{var h=e.indexOf(d);h!==-1?a[c]=n[h]:a[c]=s(d)}}return e.pop(),n.pop(),a}}});var $_=T(Zi=>{"use strict";var vE=Zi&&Zi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.mergeOptionsWithDefaults=void 0;var yE=vE(j_()),Zl=oc(),ac=(0,yE.default)();function W_(t,e,n,r,i){if(!(0,Zl.isObject)(t))return ac(e);let s={};for(let o of Object.keys(e)){let a=e[o],c=t[o];if(c!==void 0){if((0,Zl.isObject)(c)){if(n.has(c)){i.add([c,s,o]);continue}n.add(c);let d=Array.isArray(c)?c.map(h=>ac(h)):(0,Zl.isObject)(a)&&!Array.isArray(a)?W_(c,a,n,r,i):ac(c);r.set(c,d),s[o]=d;continue}s[o]=c;continue}s[o]=ac(a)}return s}function _E(t,e){let n=new WeakSet,r=new WeakMap,i=new Set,s=W_(t,e,n,r,i);for(let[o,a,c]of i)a[c]=r.get(o);return s}Zi.mergeOptionsWithDefaults=_E});var H_=T(sr=>{"use strict";var wE=sr&&sr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ed=sr&&sr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&wE(e,t,n)};Object.defineProperty(sr,"__esModule",{value:!0});ed(oc(),sr);ed(A_(),sr);ed($_(),sr)});var Z_=T(xr=>{"use strict";var Cn=xr&&xr.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},A=xr&&xr.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},je,Sn,ue,eo,us,ci,ls,to,no,cc,ro,io,oo,so,ds,z_,K_,U_,B_,G_,fs,X_,V_,J_,Q_;Object.defineProperty(xr,"__esModule",{value:!0});xr.StylelintLanguageServer=void 0;var bE=I_(),RE=Cl(),uc=ie(),CE=Hi(),td=ma(),nd=H_(),SE=as(),PE=Zo(),DE=Fi(),rd={codeAction:{disableRuleComment:{location:"separateLine"}},config:null,configFile:"",configBasedir:"",customSyntax:"",ignoreDisables:!1,packageManager:"npm",reportInvalidScopeDisables:!1,reportNeedlessDisables:!1,snippet:["css","postcss"],stylelintPath:"",validate:["css","postcss"]},Y_=class{constructor({connection:e,logger:n,modules:r}){je.add(this),Sn.set(this,void 0),ue.set(this,void 0),eo.set(this,void 0),us.set(this,void 0),ci.set(this,void 0),ls.set(this,void 0),to.set(this,void 0),no.set(this,void 0),cc.set(this,void 0),ro.set(this,new Map),io.set(this,!1),oo.set(this,new Map),Cn(this,Sn,e,"f"),Cn(this,ue,n?.child({component:"language-server"}),"f"),Cn(this,eo,new td.NotificationManager(e,A(this,ue,"f")),"f"),Cn(this,us,new td.CommandManager(e,A(this,ue,"f")),"f"),Cn(this,ci,rd,"f"),Cn(this,ls,new PE.StylelintResolver(e,A(this,ue,"f")),"f"),Cn(this,to,new SE.StylelintRunner(e,A(this,ue,"f"),A(this,ls,"f")),"f"),Cn(this,no,new RE.TextDocuments(bE.TextDocument),"f"),Cn(this,cc,{connection:A(this,Sn,"f"),notifications:A(this,eo,"f"),commands:A(this,us,"f"),documents:A(this,no,"f"),runner:A(this,to,"f"),getOptions:A(this,je,"m",ds).bind(this),getModule:A(this,je,"m",B_).bind(this),getFixes:A(this,je,"m",U_).bind(this),displayError:A(this,je,"m",so).bind(this),lintDocument:A(this,je,"m",K_).bind(this),resolveStylelint:A(this,je,"m",z_).bind(this)},"f");let i=new Proxy(A(this,cc,"f"),{get(s,o){return s[o]},set(){throw new Error("Cannot set read-only property")}});if(r)for(let s of r){if(A(this,ue,"f")?.info("Registering module",{module:s.id}),!s.id)throw new Error("Modules must have an ID");if(typeof s.id!="string")throw new Error("Module IDs must be strings");let o=new s({context:i,logger:n?.child({component:`language-server:${s.id}`})});if(A(this,ro,"f").has(s.id))throw new Error(`Module with ID "${s.id}" already registered`);A(this,ro,"f").set(s.id,o),A(this,ue,"f")?.info("Module registered",{module:s.id})}}start(){A(this,ue,"f")?.info("Starting language server"),A(this,no,"f").listen(A(this,Sn,"f")),A(this,Sn,"f").listen(),A(this,je,"m",G_).call(this),A(this,ue,"f")?.info("Language server started")}};xr.StylelintLanguageServer=Y_;Sn=new WeakMap,ue=new WeakMap,eo=new WeakMap,us=new WeakMap,ci=new WeakMap,ls=new WeakMap,to=new WeakMap,no=new WeakMap,cc=new WeakMap,ro=new WeakMap,io=new WeakMap,oo=new WeakMap,je=new WeakSet,so=function(e){(0,td.displayError)(A(this,Sn,"f"),e)},ds=async function(e){if(!A(this,io,"f"))return A(this,ci,"f");let n=A(this,oo,"f").get(e);if(n)return A(this,ue,"f")?.debug("Returning cached options",{resource:e}),n;A(this,ue,"f")?.debug("Requesting options from client",{resource:e});let r=await A(this,Sn,"f").workspace.getConfiguration({scopeUri:e,section:"stylelint"});A(this,ue,"f")?.debug("Received options from client",{resource:e,options:r});let i=(0,nd.mergeOptionsWithDefaults)(r,rd);return Object.freeze(i),A(this,oo,"f").set(e,i),A(this,ue,"f")?.debug("Returning options",{resource:e,options:i}),i},z_=async function(e){A(this,ue,"f")?.debug("Resolving Stylelint",{uri:e.uri});try{let n=await A(this,je,"m",ds).call(this,e.uri),r=await A(this,ls,"f").resolve(n,e);return r?A(this,ue,"f")?.debug("Stylelint resolved",{uri:e.uri,resolvedPath:r.resolvedPath}):A(this,ue,"f")?.warn("Failed to resolve Stylelint",{uri:e.uri}),r}catch(n){A(this,je,"m",so).call(this,n),A(this,ue,"f")?.error("Error resolving Stylelint",{uri:e.uri,error:n});return}},K_=async function(e,n={}){A(this,ue,"f")?.debug("Linting document",{uri:e.uri,linterOptions:n});try{let r=await A(this,je,"m",ds).call(this,e.uri),i=await A(this,to,"f").lintDocument(e,n,r);return A(this,ue,"f")?.debug("Lint run complete",{uri:e.uri,results:i}),i}catch(r){A(this,je,"m",so).call(this,r),A(this,ue,"f")?.error("Error running lint",{uri:e.uri,error:r});return}},U_=async function(e,n={}){try{let r=await A(this,je,"m",ds).call(this,e.uri),i=await(0,CE.getFixes)(A(this,to,"f"),e,n,r);return A(this,ue,"f")?.debug("Fixes retrieved",{uri:e.uri,edits:i}),i}catch(r){return A(this,je,"m",so).call(this,r),A(this,ue,"f")?.error("Error getting fixes",{uri:e.uri,error:r}),[]}},B_=function(e){return A(this,ro,"f").get(e)},G_=function(){A(this,ue,"f")?.info("Registering handlers"),A(this,Sn,"f").onInitialize(A(this,je,"m",X_).bind(this)),A(this,ue,"f")?.debug("connection.onInitialize handler registered"),A(this,eo,"f").on(uc.InitializedNotification.type,A(this,je,"m",V_).bind(this)),A(this,ue,"f")?.debug("connection.onInitialized handler registered"),A(this,us,"f").register(),A(this,eo,"f").on(uc.DidChangeConfigurationNotification.type,A(this,je,"m",Q_).bind(this)),A(this,ue,"f")?.debug("connection.onDidChangeConfiguration handler registered"),A(this,no,"f").onDidClose(A(this,je,"m",J_).bind(this)),A(this,ue,"f")?.debug("documents.onDidClose handler registered"),A(this,je,"m",fs).call(this,"onDidRegisterHandlers"),A(this,ue,"f")?.info("Handlers registered")},fs=function(e,...n){A(this,ue,"f")?.debug(`Invoking ${String(e)}`);let r=Object.create(null);for(let[i,s]of A(this,ro,"f")){let o=s[e];if(o)try{r[i]=o.apply(s,n),A(this,ue,"f")?.debug(`Invoked ${String(e)}`,{module:i,returnValue:r[i]})}catch(a){A(this,je,"m",so).call(this,a),A(this,ue,"f")?.error(`Error invoking ${String(e)}`,{module:i,error:a})}}return r},X_=function(e){A(this,ue,"f")?.debug("received onInitialize",{params:e});let n={capabilities:{textDocumentSync:{openClose:!0,change:uc.TextDocumentSyncKind.Full}}};e.capabilities.workspace?.configuration&&(A(this,ue,"f")?.debug("Client reports workspace configuration support; using scoped configuration"),Cn(this,io,!0,"f"));for(let[,r]of Object.entries(A(this,je,"m",fs).call(this,"onInitialize",e)))r&&(0,nd.mergeAssign)(n,r);return A(this,ue,"f")?.debug("Returning initialization results",{result:n}),n},V_=async function(e){A(this,ue,"f")?.debug("received onInitialized",{params:e}),A(this,io,"f")&&(A(this,ue,"f")?.debug("Registering DidChangeConfigurationNotification"),await A(this,Sn,"f").client.register(uc.DidChangeConfigurationNotification.type,{section:"stylelint"}))},J_=function({document:e}){A(this,ue,"f")?.debug("received documents.onDidClose, clearing cached options",{uri:e.uri}),A(this,oo,"f").delete(e.uri)},Q_=function(e){if(A(this,io,"f")){A(this,ue,"f")?.debug("received onDidChangeConfiguration, clearing cached options",{params:e}),A(this,oo,"f").clear(),A(this,je,"m",fs).call(this,"onDidChangeConfiguration"),A(this,Sn,"f").sendNotification(DE.Notification.DidResetConfiguration);return}A(this,ue,"f")?.debug("received onDidChangeConfiguration",{params:e}),Cn(this,ci,(0,nd.mergeOptionsWithDefaults)(e.settings.stylelint,rd),"f"),Object.freeze(A(this,ci,"f")),A(this,ue,"f")?.debug("Global options updated",{options:A(this,ci,"f")}),A(this,je,"m",fs).call(this,"onDidChangeConfiguration")}});var nw=T(Nt=>{"use strict";var ew=Nt&&Nt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),TE=Nt&&Nt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qE=Nt&&Nt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&ew(e,t,n);return TE(e,t),e},tw=Nt&&Nt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&ew(e,t,n)};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.modules=void 0;Nt.modules=qE(M_());tw(Z_(),Nt);tw(Fi(),Nt)});var iw=T(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.activate=void 0;var EE=require("events"),id=lv(),hs=require("vscode"),rw=Ku(),lc=nw();function OE({subscriptions:t}){let e=require.resolve("./start-server"),n=Object.assign(new EE.EventEmitter,{codeActionReady:!1}),r=new id.LanguageClient("Stylelint",{run:{module:e},debug:{module:e,options:{execArgv:["--nolazy","--inspect=6004"]}}},{documentSelector:[{scheme:"file"},{scheme:"untitled"}],diagnosticCollectionName:"Stylelint",synchronize:{fileEvents:hs.workspace.createFileSystemWatcher("**/{.stylelintrc{,.js,.json,.yaml,.yml},stylelint.config.js,.stylelintignore}")}});return r.onReady().then(()=>{r.onNotification(lc.Notification.DidRegisterCodeActionRequestHandler,()=>{n.codeActionReady=!0}),r.onNotification(lc.Notification.DidRegisterDocumentFormattingEditProvider,i=>{n.emit(rw.ApiEvent.DidRegisterDocumentFormattingEditProvider,i)}),r.onNotification(lc.Notification.DidResetConfiguration,()=>{n.emit(rw.ApiEvent.DidResetConfiguration)})}).catch(async i=>{await hs.window.showErrorMessage(`Stylelint: ${i instanceof Error?i.message:String(i)}`)}),t.push(hs.commands.registerCommand("stylelint.executeAutofix",async()=>{let i=hs.window.activeTextEditor;if(!i)return;let s={uri:i.document.uri.toString(),version:i.document.version},o={command:lc.CommandId.ApplyAutoFix,arguments:[s]};await r.sendRequest(id.ExecuteCommandRequest.type,o).then(void 0,async()=>{await hs.window.showErrorMessage("Failed to apply Stylelint fixes to the document. Please consider opening an issue with steps to reproduce.")})})),t.push(new id.SettingMonitor(r,"stylelint.enable").start()),n}dc.activate=OE});"use strict";var FE=exports&&exports.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ow=exports&&exports.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&FE(e,t,n)};Object.defineProperty(exports,"__esModule",{value:!0});ow(iw(),exports);ow(Ku(),exports);
